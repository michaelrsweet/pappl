<!DOCTYPE html>
<html lang="en-US">
<head>
<title>PAPPL v1.3 Programmers Manual</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="generator" content="codedoc v3.7">
<meta name="author" content="Michael R Sweet">
<meta name="language" content="en-US">
<meta name="copyright" content="Copyright © 2020-2022 by Michael R Sweet">
<meta name="version" content="1.3.0">
<style type="text/css"><!--
body {
  background: white;
  color: black;
  font-family: sans-serif;
  font-size: 12pt;
}
a {
  color: black;
}
a:link, a:visited {
  color: #00f;
}
a:link:hover, a:visited:hover, a:active {
  color: #c0c;
}
body, p, h1, h2, h3, h4, h5, h6 {
  font-family: sans-serif;
  line-height: 1.4;
}
h1, h2, h3, h4, h5, h6 {
  font-weight: bold;
  page-break-inside: avoid;
}
h1 {
  font-size: 250%;
  margin: 0;
}
h2 {
  font-size: 250%;
  margin-top: 1.5em;
}
h3 {
  font-size: 200%;
  margin-bottom: 0.5em;
  margin-top: 1.5em;
}
h4 {
  font-size: 150%;
  margin-bottom: 0.5em;
  margin-top: 1.5em;
}
h5 {
  font-size: 125%;
  margin-bottom: 0.5em;
  margin-top: 1.5em;
}
h6 {
  font-size: 110%;
  margin-bottom: 0.5em;
  margin-top: 1.5em;
}
img.title {
  width: 256px;
}
div.header h1, div.header p {
  text-align: center;
}
div.contents, div.body, div.footer {
  page-break-before: always;
}
.class, .enumeration, .function, .struct, .typedef, .union {
  border-bottom: solid 2px gray;
}
.description {
  margin-top: 0.5em;
}
.function {
  margin-bottom: 0;
}
blockquote {
  border: solid thin gray;
  box-shadow: 3px 3px 5px rgba(127,127,127,0.25);
  margin: 1em 0;
  padding: 10px;
  page-break-inside: avoid;
}
p code, li code, p.code, pre, ul.code li {
  font-family: monospace;
  hyphens: manual;
  -webkit-hyphens: manual;
}
p.code, pre, ul.code li {
  background: rgba(127,127,127,0.25);
  border: thin dotted gray;
  padding: 10px;
  page-break-inside: avoid;
}
pre {
  white-space: pre-wrap;
}
a:link, a:visited {
  text-decoration: none;
}
span.info {
  background: black;
  border: solid thin black;
  color: white;
  font-size: 80%;
  font-style: italic;
  font-weight: bold;
  white-space: nowrap;
}
h1 span.info, h2 span.info, h3 span.info, h4 span.info {
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  float: right;
  padding: 3px 6px;
}
ul.code, ul.contents, ul.subcontents {
  list-style-type: none;
  margin: 0;
  padding-left: 0;
}
ul.code li {
  margin: 0;
}
ul.contents > li {
  margin-top: 1em;
}
ul.contents li ul.code, ul.contents li ul.subcontents {
  padding-left: 2em;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
td {
  border: solid 1px gray;
  padding: 5px 10px;
  vertical-align: top;
}
td.left {
  text-align: left;
}
td.center {
  text-align: center;
}
td.right {
  text-align: right;
}
th {
  border-bottom: solid 2px gray;
  padding: 1px 5px;
  text-align: center;
  vertical-align: bottom;
}
tr:nth-child(even) {
  background: rgba(127,127,127,0.25);
}
table.list {
  border-collapse: collapse;
  width: 100%;
}
table.list th {
  border-bottom: none;
  border-right: 2px solid gray;
  font-family: monospace;
  font-weight: normal;
  padding: 5px 10px 5px 2px;
  text-align: right;
  vertical-align: top;
}
table.list td {
  border: none;
  padding: 5px 2px 5px 10px;
  text-align: left;
  vertical-align: top;
}
h2.title, h3.title {
  border-bottom: solid 2px gray;
}
/* Syntax highlighting */
span.comment {
  color: darkgreen;
}
span.directive {
  color: purple;
}
span.number {
  color: brown;
}
span.reserved {
  color: darkcyan;
}
span.string {
  color: magenta;
}
/* Dark mode overrides */
@media (prefers-color-scheme: dark) {
  body {
    background: black;
    color: #ccc;
  }
  a {
    color: #ccc;
  }
  a:link, a:visited {
    color: #66f;
  }
  a:link:hover, a:visited:hover, a:active {
    color: #f06;
  }
}
/* Show contents on left side in web browser */
@media screen and (min-width: 800px) {
  div.contents {
    border-right: solid thin gray;
    bottom: 0px;
    box-shadow: 3px 3px 5px rgba(127,127,127,0.5);
    font-size: 10pt;
    left: 0px;
    overflow: scroll;
    padding: 1%;
    position: fixed;
    top: 0px;
    width: 18%;
  }
  div.contents h2.title {
    margin-top: 0px;
  }
  div.header, div.body, div.footer {
    margin-left: 20%;
    padding: 1% 2%;
  }
}
/* Center title page content vertically */
@media print {
  div.header {
    padding-top: 33%;
  }
}
--></style>
</head>
<body>
<div class="header">
<p><img class="title" src="pappl-512.png"></p>
<h1 class="title">PAPPL v1.3 Programmers Manual</h1>
<p>Michael R Sweet</p>
<p>Copyright © 2020-2022 by Michael R Sweet</p>
</div>
<div class="contents">
<h2 class="title">Contents</h2>
<ul class="contents">
<li><a href="#introduction">Introduction</a><ul class="subcontents">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#getting-prerequisites">Getting Prerequisites</a></li>
<li><a href="#building-pappl">Building PAPPL</a></li>
<li><a href="#installing-pappl">Installing PAPPL</a></li>
<li><a href="#detecting-pappl">Detecting PAPPL</a></li>
<li><a href="#header-files">Header Files</a></li>
</ul></li>
<li><a href="#api-overview">API Overview</a><ul class="subcontents">
<li><a href="#the-system">The System</a></li>
<li><a href="#localization">Localization</a></li>
<li><a href="#clients">Clients</a></li>
<li><a href="#devices">Devices</a></li>
<li><a href="#printers">Printers</a></li>
<li><a href="#jobs">Jobs</a></li>
</ul></li>
<li><a href="#the-hp-printer-application-example">The HP Printer Application Example</a><ul class="subcontents">
<li><a href="#the-main-loop">The Main Loop</a></li>
<li><a href="#the-driver-callback">The Driver Callback</a></li>
<li><a href="#the-auto-add-callback">The Auto-Add Callback</a></li>
<li><a href="#the-file-printing-callback">The File Printing Callback</a></li>
<li><a href="#the-raster-printing-callbacks">The Raster Printing Callbacks</a></li>
<li><a href="#the-identification-callback">The Identification Callback</a></li>
<li><a href="#the-status-callback">The Status Callback</a></li>
<li><a href="#the-self-test-page-callback">The Self-Test Page Callback</a></li>
</ul></li>
<li><a href="#FUNCTIONS">Functions</a><ul class="subcontents">
<li><a href="#papplClientGetCSRFToken">papplClientGetCSRFToken</a></li>
<li><a href="#papplClientGetCookie">papplClientGetCookie</a></li>
<li><a href="#papplClientGetForm">papplClientGetForm</a></li>
<li><a href="#papplClientGetHTTP">papplClientGetHTTP</a></li>
<li><a href="#papplClientGetHostName">papplClientGetHostName</a></li>
<li><a href="#papplClientGetHostPort">papplClientGetHostPort</a></li>
<li><a href="#papplClientGetJob">papplClientGetJob</a></li>
<li><a href="#papplClientGetLoc">papplClientGetLoc</a></li>
<li><a href="#papplClientGetLocString">papplClientGetLocString</a></li>
<li><a href="#papplClientGetMethod">papplClientGetMethod</a></li>
<li><a href="#papplClientGetOperation">papplClientGetOperation</a></li>
<li><a href="#papplClientGetOptions">papplClientGetOptions</a></li>
<li><a href="#papplClientGetPrinter">papplClientGetPrinter</a></li>
<li><a href="#papplClientGetRequest">papplClientGetRequest</a></li>
<li><a href="#papplClientGetResponse">papplClientGetResponse</a></li>
<li><a href="#papplClientGetSystem">papplClientGetSystem</a></li>
<li><a href="#papplClientGetURI">papplClientGetURI</a></li>
<li><a href="#papplClientGetUsername">papplClientGetUsername</a></li>
<li><a href="#papplClientHTMLAuthorize">papplClientHTMLAuthorize</a></li>
<li><a href="#papplClientHTMLEscape">papplClientHTMLEscape</a></li>
<li><a href="#papplClientHTMLFooter">papplClientHTMLFooter</a></li>
<li><a href="#papplClientHTMLHeader">papplClientHTMLHeader</a></li>
<li><a href="#papplClientHTMLPrinterFooter">papplClientHTMLPrinterFooter</a></li>
<li><a href="#papplClientHTMLPrinterHeader">papplClientHTMLPrinterHeader</a></li>
<li><a href="#papplClientHTMLPrintf">papplClientHTMLPrintf</a></li>
<li><a href="#papplClientHTMLPuts">papplClientHTMLPuts</a></li>
<li><a href="#papplClientHTMLStartForm">papplClientHTMLStartForm</a></li>
<li><a href="#papplClientIsAuthorized">papplClientIsAuthorized</a></li>
<li><a href="#papplClientIsValidForm">papplClientIsValidForm</a></li>
<li><a href="#papplClientRespond">papplClientRespond</a></li>
<li><a href="#papplClientRespondIPP">papplClientRespondIPP</a></li>
<li><a href="#papplClientRespondIPPUnsupported">papplClientRespondIPPUnsupported</a></li>
<li><a href="#papplClientRespondRedirect">papplClientRespondRedirect</a></li>
<li><a href="#papplClientSetCookie">papplClientSetCookie</a></li>
<li><a href="#papplClientSetUsername">papplClientSetUsername</a></li>
<li><a href="#papplCopyString">papplCopyString</a></li>
<li><a href="#papplCreateTempFile">papplCreateTempFile</a></li>
<li><a href="#papplDeviceAddScheme">papplDeviceAddScheme</a></li>
<li><a href="#papplDeviceAddScheme2">papplDeviceAddScheme2</a></li>
<li><a href="#papplDeviceClose">papplDeviceClose</a></li>
<li><a href="#papplDeviceError">papplDeviceError</a></li>
<li><a href="#papplDeviceFlush">papplDeviceFlush</a></li>
<li><a href="#papplDeviceGetData">papplDeviceGetData</a></li>
<li><a href="#papplDeviceGetID">papplDeviceGetID</a></li>
<li><a href="#papplDeviceGetMetrics">papplDeviceGetMetrics</a></li>
<li><a href="#papplDeviceGetStatus">papplDeviceGetStatus</a></li>
<li><a href="#papplDeviceGetSupplies">papplDeviceGetSupplies</a></li>
<li><a href="#papplDeviceIsSupported">papplDeviceIsSupported</a></li>
<li><a href="#papplDeviceList">papplDeviceList</a></li>
<li><a href="#papplDeviceOpen">papplDeviceOpen</a></li>
<li><a href="#papplDeviceParseID">papplDeviceParseID</a></li>
<li><a href="#papplDevicePrintf">papplDevicePrintf</a></li>
<li><a href="#papplDevicePuts">papplDevicePuts</a></li>
<li><a href="#papplDeviceRead">papplDeviceRead</a></li>
<li><a href="#papplDeviceSetData">papplDeviceSetData</a></li>
<li><a href="#papplDeviceWrite">papplDeviceWrite</a></li>
<li><a href="#papplGetRand">papplGetRand</a></li>
<li><a href="#papplGetTempDir">papplGetTempDir</a></li>
<li><a href="#papplJobCancel">papplJobCancel</a></li>
<li><a href="#papplJobCreatePrintOptions">papplJobCreatePrintOptions</a></li>
<li><a href="#papplJobCreateWithFile">papplJobCreateWithFile</a></li>
<li><a href="#papplJobDeletePrintOptions">papplJobDeletePrintOptions</a></li>
<li><a href="#papplJobFilterImage">papplJobFilterImage</a></li>
<li><a href="#papplJobGetAttribute">papplJobGetAttribute</a></li>
<li><a href="#papplJobGetData">papplJobGetData</a></li>
<li><a href="#papplJobGetFilename">papplJobGetFilename</a></li>
<li><a href="#papplJobGetFormat">papplJobGetFormat</a></li>
<li><a href="#papplJobGetID">papplJobGetID</a></li>
<li><a href="#papplJobGetImpressions">papplJobGetImpressions</a></li>
<li><a href="#papplJobGetImpressionsCompleted">papplJobGetImpressionsCompleted</a></li>
<li><a href="#papplJobGetMessage">papplJobGetMessage</a></li>
<li><a href="#papplJobGetName">papplJobGetName</a></li>
<li><a href="#papplJobGetPrinter">papplJobGetPrinter</a></li>
<li><a href="#papplJobGetReasons">papplJobGetReasons</a></li>
<li><a href="#papplJobGetState">papplJobGetState</a></li>
<li><a href="#papplJobGetTimeCompleted">papplJobGetTimeCompleted</a></li>
<li><a href="#papplJobGetTimeCreated">papplJobGetTimeCreated</a></li>
<li><a href="#papplJobGetTimeProcessed">papplJobGetTimeProcessed</a></li>
<li><a href="#papplJobGetUsername">papplJobGetUsername</a></li>
<li><a href="#papplJobHold">papplJobHold</a></li>
<li><a href="#papplJobIsCanceled">papplJobIsCanceled</a></li>
<li><a href="#papplJobOpenFile">papplJobOpenFile</a></li>
<li><a href="#papplJobRelease">papplJobRelease</a></li>
<li><a href="#papplJobSetData">papplJobSetData</a></li>
<li><a href="#papplJobSetImpressions">papplJobSetImpressions</a></li>
<li><a href="#papplJobSetImpressionsCompleted">papplJobSetImpressionsCompleted</a></li>
<li><a href="#papplJobSetMessage">papplJobSetMessage</a></li>
<li><a href="#papplJobSetReasons">papplJobSetReasons</a></li>
<li><a href="#papplLocFormatString">papplLocFormatString</a></li>
<li><a href="#papplLocGetDefaultMediaSizeName">papplLocGetDefaultMediaSizeName</a></li>
<li><a href="#papplLocGetString">papplLocGetString</a></li>
<li><a href="#papplLog">papplLog</a></li>
<li><a href="#papplLogClient">papplLogClient</a></li>
<li><a href="#papplLogDevice">papplLogDevice</a></li>
<li><a href="#papplLogJob">papplLogJob</a></li>
<li><a href="#papplLogPrinter">papplLogPrinter</a></li>
<li><a href="#papplMainloop">papplMainloop</a></li>
<li><a href="#papplMainloopShutdown">papplMainloopShutdown</a></li>
<li><a href="#papplPrinterAddLink">papplPrinterAddLink</a></li>
<li><a href="#papplPrinterCancelAllJobs">papplPrinterCancelAllJobs</a></li>
<li><a href="#papplPrinterCloseDevice">papplPrinterCloseDevice</a></li>
<li><a href="#papplPrinterCreate">papplPrinterCreate</a></li>
<li><a href="#papplPrinterDelete">papplPrinterDelete</a></li>
<li><a href="#papplPrinterDisable">papplPrinterDisable</a></li>
<li><a href="#papplPrinterEnable">papplPrinterEnable</a></li>
<li><a href="#papplPrinterFindJob">papplPrinterFindJob</a></li>
<li><a href="#papplPrinterGetContact">papplPrinterGetContact</a></li>
<li><a href="#papplPrinterGetDNSSDName">papplPrinterGetDNSSDName</a></li>
<li><a href="#papplPrinterGetDeviceID">papplPrinterGetDeviceID</a></li>
<li><a href="#papplPrinterGetDeviceURI">papplPrinterGetDeviceURI</a></li>
<li><a href="#papplPrinterGetDriverAttributes">papplPrinterGetDriverAttributes</a></li>
<li><a href="#papplPrinterGetDriverData">papplPrinterGetDriverData</a></li>
<li><a href="#papplPrinterGetDriverName">papplPrinterGetDriverName</a></li>
<li><a href="#papplPrinterGetGeoLocation">papplPrinterGetGeoLocation</a></li>
<li><a href="#papplPrinterGetID">papplPrinterGetID</a></li>
<li><a href="#papplPrinterGetImpressionsCompleted">papplPrinterGetImpressionsCompleted</a></li>
<li><a href="#papplPrinterGetLocation">papplPrinterGetLocation</a></li>
<li><a href="#papplPrinterGetMaxActiveJobs">papplPrinterGetMaxActiveJobs</a></li>
<li><a href="#papplPrinterGetMaxCompletedJobs">papplPrinterGetMaxCompletedJobs</a></li>
<li><a href="#papplPrinterGetMaxPreservedJobs">papplPrinterGetMaxPreservedJobs</a></li>
<li><a href="#papplPrinterGetName">papplPrinterGetName</a></li>
<li><a href="#papplPrinterGetNextJobID">papplPrinterGetNextJobID</a></li>
<li><a href="#papplPrinterGetNumberOfActiveJobs">papplPrinterGetNumberOfActiveJobs</a></li>
<li><a href="#papplPrinterGetNumberOfCompletedJobs">papplPrinterGetNumberOfCompletedJobs</a></li>
<li><a href="#papplPrinterGetNumberOfJobs">papplPrinterGetNumberOfJobs</a></li>
<li><a href="#papplPrinterGetOrganization">papplPrinterGetOrganization</a></li>
<li><a href="#papplPrinterGetOrganizationalUnit">papplPrinterGetOrganizationalUnit</a></li>
<li><a href="#papplPrinterGetPath">papplPrinterGetPath</a></li>
<li><a href="#papplPrinterGetPrintGroup">papplPrinterGetPrintGroup</a></li>
<li><a href="#papplPrinterGetReasons">papplPrinterGetReasons</a></li>
<li><a href="#papplPrinterGetState">papplPrinterGetState</a></li>
<li><a href="#papplPrinterGetSupplies">papplPrinterGetSupplies</a></li>
<li><a href="#papplPrinterGetSystem">papplPrinterGetSystem</a></li>
<li><a href="#papplPrinterHoldNewJobs">papplPrinterHoldNewJobs</a></li>
<li><a href="#papplPrinterIsAcceptingJobs">papplPrinterIsAcceptingJobs</a></li>
<li><a href="#papplPrinterIsDeleted">papplPrinterIsDeleted</a></li>
<li><a href="#papplPrinterIsHoldingNewJobs">papplPrinterIsHoldingNewJobs</a></li>
<li><a href="#papplPrinterIterateActiveJobs">papplPrinterIterateActiveJobs</a></li>
<li><a href="#papplPrinterIterateAllJobs">papplPrinterIterateAllJobs</a></li>
<li><a href="#papplPrinterIterateCompletedJobs">papplPrinterIterateCompletedJobs</a></li>
<li><a href="#papplPrinterOpenDevice">papplPrinterOpenDevice</a></li>
<li><a href="#papplPrinterOpenFile">papplPrinterOpenFile</a></li>
<li><a href="#papplPrinterPause">papplPrinterPause</a></li>
<li><a href="#papplPrinterReleaseHeldNewJobs">papplPrinterReleaseHeldNewJobs</a></li>
<li><a href="#papplPrinterRemoveLink">papplPrinterRemoveLink</a></li>
<li><a href="#papplPrinterResume">papplPrinterResume</a></li>
<li><a href="#papplPrinterSetContact">papplPrinterSetContact</a></li>
<li><a href="#papplPrinterSetDNSSDName">papplPrinterSetDNSSDName</a></li>
<li><a href="#papplPrinterSetDriverData">papplPrinterSetDriverData</a></li>
<li><a href="#papplPrinterSetDriverDefaults">papplPrinterSetDriverDefaults</a></li>
<li><a href="#papplPrinterSetGeoLocation">papplPrinterSetGeoLocation</a></li>
<li><a href="#papplPrinterSetImpressionsCompleted">papplPrinterSetImpressionsCompleted</a></li>
<li><a href="#papplPrinterSetLocation">papplPrinterSetLocation</a></li>
<li><a href="#papplPrinterSetMaxActiveJobs">papplPrinterSetMaxActiveJobs</a></li>
<li><a href="#papplPrinterSetMaxCompletedJobs">papplPrinterSetMaxCompletedJobs</a></li>
<li><a href="#papplPrinterSetMaxPreservedJobs">papplPrinterSetMaxPreservedJobs</a></li>
<li><a href="#papplPrinterSetNextJobID">papplPrinterSetNextJobID</a></li>
<li><a href="#papplPrinterSetOrganization">papplPrinterSetOrganization</a></li>
<li><a href="#papplPrinterSetOrganizationalUnit">papplPrinterSetOrganizationalUnit</a></li>
<li><a href="#papplPrinterSetPrintGroup">papplPrinterSetPrintGroup</a></li>
<li><a href="#papplPrinterSetReadyMedia">papplPrinterSetReadyMedia</a></li>
<li><a href="#papplPrinterSetReasons">papplPrinterSetReasons</a></li>
<li><a href="#papplPrinterSetSupplies">papplPrinterSetSupplies</a></li>
<li><a href="#papplPrinterSetUSB">papplPrinterSetUSB</a></li>
<li><a href="#papplSubscriptionCancel">papplSubscriptionCancel</a></li>
<li><a href="#papplSubscriptionCreate">papplSubscriptionCreate</a></li>
<li><a href="#papplSubscriptionGetEvents">papplSubscriptionGetEvents</a></li>
<li><a href="#papplSubscriptionGetID">papplSubscriptionGetID</a></li>
<li><a href="#papplSubscriptionGetJob">papplSubscriptionGetJob</a></li>
<li><a href="#papplSubscriptionGetPrinter">papplSubscriptionGetPrinter</a></li>
<li><a href="#papplSubscriptionGetUsername">papplSubscriptionGetUsername</a></li>
<li><a href="#papplSubscriptionRenew">papplSubscriptionRenew</a></li>
<li><a href="#papplSystemAddEvent">papplSystemAddEvent</a></li>
<li><a href="#papplSystemAddLink">papplSystemAddLink</a></li>
<li><a href="#papplSystemAddListeners">papplSystemAddListeners</a></li>
<li><a href="#papplSystemAddMIMEFilter">papplSystemAddMIMEFilter</a></li>
<li><a href="#papplSystemAddResourceCallback">papplSystemAddResourceCallback</a></li>
<li><a href="#papplSystemAddResourceData">papplSystemAddResourceData</a></li>
<li><a href="#papplSystemAddResourceDirectory">papplSystemAddResourceDirectory</a></li>
<li><a href="#papplSystemAddResourceFile">papplSystemAddResourceFile</a></li>
<li><a href="#papplSystemAddResourceString">papplSystemAddResourceString</a></li>
<li><a href="#papplSystemAddStringsData">papplSystemAddStringsData</a></li>
<li><a href="#papplSystemAddStringsFile">papplSystemAddStringsFile</a></li>
<li><a href="#papplSystemAddTimerCallback">papplSystemAddTimerCallback</a></li>
<li><a href="#papplSystemCleanJobs">papplSystemCleanJobs</a></li>
<li><a href="#papplSystemCreate">papplSystemCreate</a></li>
<li><a href="#papplSystemDelete">papplSystemDelete</a></li>
<li><a href="#papplSystemFindLoc">papplSystemFindLoc</a></li>
<li><a href="#papplSystemFindPrinter">papplSystemFindPrinter</a></li>
<li><a href="#papplSystemFindSubscription">papplSystemFindSubscription</a></li>
<li><a href="#papplSystemGetAdminGroup">papplSystemGetAdminGroup</a></li>
<li><a href="#papplSystemGetAuthService">papplSystemGetAuthService</a></li>
<li><a href="#papplSystemGetContact">papplSystemGetContact</a></li>
<li><a href="#papplSystemGetDNSSDName">papplSystemGetDNSSDName</a></li>
<li><a href="#papplSystemGetDefaultPrintGroup">papplSystemGetDefaultPrintGroup</a></li>
<li><a href="#papplSystemGetDefaultPrinterID">papplSystemGetDefaultPrinterID</a></li>
<li><a href="#papplSystemGetFooterHTML">papplSystemGetFooterHTML</a></li>
<li><a href="#papplSystemGetGeoLocation">papplSystemGetGeoLocation</a></li>
<li><a href="#papplSystemGetHostName">papplSystemGetHostName</a></li>
<li><a href="#papplSystemGetHostPort">papplSystemGetHostPort</a></li>
<li><a href="#papplSystemGetLocation">papplSystemGetLocation</a></li>
<li><a href="#papplSystemGetLogLevel">papplSystemGetLogLevel</a></li>
<li><a href="#papplSystemGetMaxClients">papplSystemGetMaxClients</a></li>
<li><a href="#papplSystemGetMaxImageSize">papplSystemGetMaxImageSize</a></li>
<li><a href="#papplSystemGetMaxLogSize">papplSystemGetMaxLogSize</a></li>
<li><a href="#papplSystemGetMaxSubscriptions">papplSystemGetMaxSubscriptions</a></li>
<li><a href="#papplSystemGetName">papplSystemGetName</a></li>
<li><a href="#papplSystemGetNextPrinterID">papplSystemGetNextPrinterID</a></li>
<li><a href="#papplSystemGetOptions">papplSystemGetOptions</a></li>
<li><a href="#papplSystemGetOrganization">papplSystemGetOrganization</a></li>
<li><a href="#papplSystemGetOrganizationalUnit">papplSystemGetOrganizationalUnit</a></li>
<li><a href="#papplSystemGetPassword">papplSystemGetPassword</a></li>
<li><a href="#papplSystemGetServerHeader">papplSystemGetServerHeader</a></li>
<li><a href="#papplSystemGetSessionKey">papplSystemGetSessionKey</a></li>
<li><a href="#papplSystemGetTLSOnly">papplSystemGetTLSOnly</a></li>
<li><a href="#papplSystemGetUUID">papplSystemGetUUID</a></li>
<li><a href="#papplSystemGetVersions">papplSystemGetVersions</a></li>
<li><a href="#papplSystemHashPassword">papplSystemHashPassword</a></li>
<li><a href="#papplSystemIsRunning">papplSystemIsRunning</a></li>
<li><a href="#papplSystemIsShutdown">papplSystemIsShutdown</a></li>
<li><a href="#papplSystemIteratePrinters">papplSystemIteratePrinters</a></li>
<li><a href="#papplSystemLoadState">papplSystemLoadState</a></li>
<li><a href="#papplSystemMatchDriver">papplSystemMatchDriver</a></li>
<li><a href="#papplSystemRemoveLink">papplSystemRemoveLink</a></li>
<li><a href="#papplSystemRemoveResource">papplSystemRemoveResource</a></li>
<li><a href="#papplSystemRemoveTimerCallback">papplSystemRemoveTimerCallback</a></li>
<li><a href="#papplSystemRun">papplSystemRun</a></li>
<li><a href="#papplSystemSaveState">papplSystemSaveState</a></li>
<li><a href="#papplSystemSetAdminGroup">papplSystemSetAdminGroup</a></li>
<li><a href="#papplSystemSetAuthCallback">papplSystemSetAuthCallback</a></li>
<li><a href="#papplSystemSetContact">papplSystemSetContact</a></li>
<li><a href="#papplSystemSetDNSSDName">papplSystemSetDNSSDName</a></li>
<li><a href="#papplSystemSetDefaultPrintGroup">papplSystemSetDefaultPrintGroup</a></li>
<li><a href="#papplSystemSetDefaultPrinterID">papplSystemSetDefaultPrinterID</a></li>
<li><a href="#papplSystemSetEventCallback">papplSystemSetEventCallback</a></li>
<li><a href="#papplSystemSetFooterHTML">papplSystemSetFooterHTML</a></li>
<li><a href="#papplSystemSetGeoLocation">papplSystemSetGeoLocation</a></li>
<li><a href="#papplSystemSetHostName">papplSystemSetHostName</a></li>
<li><a href="#papplSystemSetLocation">papplSystemSetLocation</a></li>
<li><a href="#papplSystemSetLogLevel">papplSystemSetLogLevel</a></li>
<li><a href="#papplSystemSetMIMECallback">papplSystemSetMIMECallback</a></li>
<li><a href="#papplSystemSetMaxClients">papplSystemSetMaxClients</a></li>
<li><a href="#papplSystemSetMaxImageSize">papplSystemSetMaxImageSize</a></li>
<li><a href="#papplSystemSetMaxLogSize">papplSystemSetMaxLogSize</a></li>
<li><a href="#papplSystemSetMaxSubscriptions">papplSystemSetMaxSubscriptions</a></li>
<li><a href="#papplSystemSetNetworkCallbacks">papplSystemSetNetworkCallbacks</a></li>
<li><a href="#papplSystemSetNextPrinterID">papplSystemSetNextPrinterID</a></li>
<li><a href="#papplSystemSetOperationCallback">papplSystemSetOperationCallback</a></li>
<li><a href="#papplSystemSetOrganization">papplSystemSetOrganization</a></li>
<li><a href="#papplSystemSetOrganizationalUnit">papplSystemSetOrganizationalUnit</a></li>
<li><a href="#papplSystemSetPassword">papplSystemSetPassword</a></li>
<li><a href="#papplSystemSetPrinterDrivers">papplSystemSetPrinterDrivers</a></li>
<li><a href="#papplSystemSetSaveCallback">papplSystemSetSaveCallback</a></li>
<li><a href="#papplSystemSetUUID">papplSystemSetUUID</a></li>
<li><a href="#papplSystemSetVersions">papplSystemSetVersions</a></li>
<li><a href="#papplSystemSetWiFiCallbacks">papplSystemSetWiFiCallbacks</a></li>
<li><a href="#papplSystemShutdown">papplSystemShutdown</a></li>
</ul></li>
<li><a href="#TYPES">Data Types</a><ul class="subcontents">
<li><a href="#pappl_auth_cb_t">pappl_auth_cb_t</a></li>
<li><a href="#pappl_client_t">pappl_client_t</a></li>
<li><a href="#pappl_color_mode_t">pappl_color_mode_t</a></li>
<li><a href="#pappl_contact_t">pappl_contact_t</a></li>
<li><a href="#pappl_content_t">pappl_content_t</a></li>
<li><a href="#pappl_default_cb_t">pappl_default_cb_t</a></li>
<li><a href="#pappl_devclose_cb_t">pappl_devclose_cb_t</a></li>
<li><a href="#pappl_deverror_cb_t">pappl_deverror_cb_t</a></li>
<li><a href="#pappl_device_cb_t">pappl_device_cb_t</a></li>
<li><a href="#pappl_device_t">pappl_device_t</a></li>
<li><a href="#pappl_devid_cb_t">pappl_devid_cb_t</a></li>
<li><a href="#pappl_devlist_cb_t">pappl_devlist_cb_t</a></li>
<li><a href="#pappl_devmetrics_t">pappl_devmetrics_t</a></li>
<li><a href="#pappl_devopen_cb_t">pappl_devopen_cb_t</a></li>
<li><a href="#pappl_devread_cb_t">pappl_devread_cb_t</a></li>
<li><a href="#pappl_devstatus_cb_t">pappl_devstatus_cb_t</a></li>
<li><a href="#pappl_devsupplies_cb_t">pappl_devsupplies_cb_t</a></li>
<li><a href="#pappl_devtype_t">pappl_devtype_t</a></li>
<li><a href="#pappl_devwrite_cb_t">pappl_devwrite_cb_t</a></li>
<li><a href="#pappl_dither_t[16][16]">pappl_dither_t[16][16]</a></li>
<li><a href="#pappl_duplex_t">pappl_duplex_t</a></li>
<li><a href="#pappl_event_cb_t">pappl_event_cb_t</a></li>
<li><a href="#pappl_event_t">pappl_event_t</a></li>
<li><a href="#pappl_finishings_t">pappl_finishings_t</a></li>
<li><a href="#pappl_icon_t">pappl_icon_t</a></li>
<li><a href="#pappl_identify_actions_t">pappl_identify_actions_t</a></li>
<li><a href="#pappl_ipp_op_cb_t">pappl_ipp_op_cb_t</a></li>
<li><a href="#pappl_job_cb_t">pappl_job_cb_t</a></li>
<li><a href="#pappl_job_t">pappl_job_t</a></li>
<li><a href="#pappl_jreason_t">pappl_jreason_t</a></li>
<li><a href="#pappl_kind_t">pappl_kind_t</a></li>
<li><a href="#pappl_label_mode_t">pappl_label_mode_t</a></li>
<li><a href="#pappl_loc_t">pappl_loc_t</a></li>
<li><a href="#pappl_loglevel_t">pappl_loglevel_t</a></li>
<li><a href="#pappl_loptions_t">pappl_loptions_t</a></li>
<li><a href="#pappl_media_col_t">pappl_media_col_t</a></li>
<li><a href="#pappl_media_tracking_t">pappl_media_tracking_t</a></li>
<li><a href="#pappl_mime_cb_t">pappl_mime_cb_t</a></li>
<li><a href="#pappl_mime_filter_cb_t">pappl_mime_filter_cb_t</a></li>
<li><a href="#pappl_ml_subcmd_cb_t">pappl_ml_subcmd_cb_t</a></li>
<li><a href="#pappl_ml_system_cb_t">pappl_ml_system_cb_t</a></li>
<li><a href="#pappl_ml_usage_cb_t">pappl_ml_usage_cb_t</a></li>
<li><a href="#pappl_netconf_t">pappl_netconf_t</a></li>
<li><a href="#pappl_network_get_cb_t">pappl_network_get_cb_t</a></li>
<li><a href="#pappl_network_set_cb_t">pappl_network_set_cb_t</a></li>
<li><a href="#pappl_network_t">pappl_network_t</a></li>
<li><a href="#pappl_pr_autoadd_cb_t">pappl_pr_autoadd_cb_t</a></li>
<li><a href="#pappl_pr_create_cb_t">pappl_pr_create_cb_t</a></li>
<li><a href="#pappl_pr_delete_cb_t">pappl_pr_delete_cb_t</a></li>
<li><a href="#pappl_pr_driver_cb_t">pappl_pr_driver_cb_t</a></li>
<li><a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a></li>
<li><a href="#pappl_pr_driver_t">pappl_pr_driver_t</a></li>
<li><a href="#pappl_pr_identify_cb_t">pappl_pr_identify_cb_t</a></li>
<li><a href="#pappl_pr_options_t">pappl_pr_options_t</a></li>
<li><a href="#pappl_pr_printfile_cb_t">pappl_pr_printfile_cb_t</a></li>
<li><a href="#pappl_pr_rendjob_cb_t">pappl_pr_rendjob_cb_t</a></li>
<li><a href="#pappl_pr_rendpage_cb_t">pappl_pr_rendpage_cb_t</a></li>
<li><a href="#pappl_pr_rstartjob_cb_t">pappl_pr_rstartjob_cb_t</a></li>
<li><a href="#pappl_pr_rstartpage_cb_t">pappl_pr_rstartpage_cb_t</a></li>
<li><a href="#pappl_pr_rwriteline_cb_t">pappl_pr_rwriteline_cb_t</a></li>
<li><a href="#pappl_pr_status_cb_t">pappl_pr_status_cb_t</a></li>
<li><a href="#pappl_pr_testpage_cb_t">pappl_pr_testpage_cb_t</a></li>
<li><a href="#pappl_pr_usb_cb_t">pappl_pr_usb_cb_t</a></li>
<li><a href="#pappl_preason_t">pappl_preason_t</a></li>
<li><a href="#pappl_printer_cb_t">pappl_printer_cb_t</a></li>
<li><a href="#pappl_printer_t">pappl_printer_t</a></li>
<li><a href="#pappl_raster_type_t">pappl_raster_type_t</a></li>
<li><a href="#pappl_resource_cb_t">pappl_resource_cb_t</a></li>
<li><a href="#pappl_save_cb_t">pappl_save_cb_t</a></li>
<li><a href="#pappl_scaling_t">pappl_scaling_t</a></li>
<li><a href="#pappl_sides_t">pappl_sides_t</a></li>
<li><a href="#pappl_soptions_t">pappl_soptions_t</a></li>
<li><a href="#pappl_subscription_t">pappl_subscription_t</a></li>
<li><a href="#pappl_supply_color_t">pappl_supply_color_t</a></li>
<li><a href="#pappl_supply_t">pappl_supply_t</a></li>
<li><a href="#pappl_supply_type_t">pappl_supply_type_t</a></li>
<li><a href="#pappl_system_t">pappl_system_t</a></li>
<li><a href="#pappl_timer_cb_t">pappl_timer_cb_t</a></li>
<li><a href="#pappl_uoptions_t">pappl_uoptions_t</a></li>
<li><a href="#pappl_version_t">pappl_version_t</a></li>
<li><a href="#pappl_wifi_join_cb_t">pappl_wifi_join_cb_t</a></li>
<li><a href="#pappl_wifi_list_cb_t">pappl_wifi_list_cb_t</a></li>
<li><a href="#pappl_wifi_state_t">pappl_wifi_state_t</a></li>
<li><a href="#pappl_wifi_status_cb_t">pappl_wifi_status_cb_t</a></li>
<li><a href="#pappl_wifi_t">pappl_wifi_t</a></li>
</ul></li>
<li><a href="#STRUCTURES">Structures</a><ul class="subcontents">
<li><a href="#pappl_contact_s">pappl_contact_s</a></li>
<li><a href="#pappl_devmetrics_s">pappl_devmetrics_s</a></li>
<li><a href="#pappl_icon_s">pappl_icon_s</a></li>
<li><a href="#pappl_media_col_s">pappl_media_col_s</a></li>
<li><a href="#pappl_network_s">pappl_network_s</a></li>
<li><a href="#pappl_pr_driver_data_s">pappl_pr_driver_data_s</a></li>
<li><a href="#pappl_pr_driver_s">pappl_pr_driver_s</a></li>
<li><a href="#pappl_pr_options_s">pappl_pr_options_s</a></li>
<li><a href="#pappl_supply_s">pappl_supply_s</a></li>
<li><a href="#pappl_version_s">pappl_version_s</a></li>
<li><a href="#pappl_wifi_s">pappl_wifi_s</a></li>
</ul></li>
<li><a href="#ENUMERATIONS">Enumerations</a><ul class="subcontents">
<li><a href="#pappl_color_mode_e">pappl_color_mode_e</a></li>
<li><a href="#pappl_content_e">pappl_content_e</a></li>
<li><a href="#pappl_devtype_e">pappl_devtype_e</a></li>
<li><a href="#pappl_duplex_e">pappl_duplex_e</a></li>
<li><a href="#pappl_event_e">pappl_event_e</a></li>
<li><a href="#pappl_finishings_e">pappl_finishings_e</a></li>
<li><a href="#pappl_identify_actions_e">pappl_identify_actions_e</a></li>
<li><a href="#pappl_jreason_e">pappl_jreason_e</a></li>
<li><a href="#pappl_kind_e">pappl_kind_e</a></li>
<li><a href="#pappl_label_mode_e">pappl_label_mode_e</a></li>
<li><a href="#pappl_loglevel_e">pappl_loglevel_e</a></li>
<li><a href="#pappl_loptions_e">pappl_loptions_e</a></li>
<li><a href="#pappl_media_tracking_e">pappl_media_tracking_e</a></li>
<li><a href="#pappl_netconf_e">pappl_netconf_e</a></li>
<li><a href="#pappl_preason_e">pappl_preason_e</a></li>
<li><a href="#pappl_raster_type_e">pappl_raster_type_e</a></li>
<li><a href="#pappl_scaling_e">pappl_scaling_e</a></li>
<li><a href="#pappl_sides_e">pappl_sides_e</a></li>
<li><a href="#pappl_soptions_e">pappl_soptions_e</a></li>
<li><a href="#pappl_supply_color_e">pappl_supply_color_e</a></li>
<li><a href="#pappl_supply_type_e">pappl_supply_type_e</a></li>
<li><a href="#pappl_uoptions_e">pappl_uoptions_e</a></li>
<li><a href="#pappl_wifi_state_e">pappl_wifi_state_e</a></li>
</ul></li>
</ul>
</div>
<div class="body">
<h2 class="title" id="introduction">Introduction</h2>
<p>PAPPL is a simple C-based framework/library for developing CUPS Printer Applications, which are the recommended replacement for printer drivers. It is sufficiently general purpose to support any kind of printer or driver that can be used on desktops, servers, and in embedded environments.</p>
<p>PAPPL embeds a multi-threaded HTTP / <a href="https://www.pwg.org/ipp/everywhere.html">IPP Everywhere™</a> server and provides callbacks for a variety of events that allows a GUI or command-line application to interact with both the local user that is running the Printer Application and any network clients that are submitting print jobs, querying printer status and capabilities, and so forth.</p>
<p>PAPPL provides a simple driver interface for raster graphics printing, and developers of CUPS Raster drivers will readily adapt to it. PAPPL can also be used with printers that support vector graphics printing although you'll have to develop more code to support them. Drivers provide configuration and capability information to PAPPL, and PAPPL then calls the driver to print things as needed. PAPPL automatically supports printing of JPEG, PNG, PWG Raster, Apple Raster, and &quot;raw&quot; files to printers connected via USB and network (AppSocket/JetDirect) connections. Other formats can be supported through &quot;filter&quot; callbacks you register.</p>
<p>PAPPL is Copyright © 2019-2022 by Michael R Sweet and is licensed under the Apache License Version 2.0 with an (optional) exception to allow linking against GPL2/LGPL2 software (like older versions of CUPS), so it can be used <em>freely</em> in any project you'd like. See the files &quot;LICENSE&quot; and &quot;NOTICE&quot; in the source distribution for more information.</p>
<h3 class="title" id="requirements">Requirements</h3>
<p>PAPPL requires Microsoft® Windows® 10 or higher or a POSIX-compliant host operating system such as Linux®, macOS®, QNX®, or VxWorks®. On Windows, the provided project files require Visual Studio 2019 or higher. For POSIX hosts, a &quot;make&quot; utility that supports the <code>include</code> directive (like GNU make), a C99-compatible C compiler such as GCC or Clang, and the &quot;pkg-config&quot; utility are required along with the following support libraries:</p>
<ul>
<li><p>Avahi (0.8 or later) or mDNSResponder for mDNS/DNS-SD support</p>
</li>
<li><p>CUPS (2.2 or later) or libcups (3.0 or later) for the CUPS libraries</p>
</li>
<li><p>GNU TLS (3.0 or later), LibreSSL (3.0 or later), or OpenSSL (1.1 or later) for TLS support</p>
</li>
<li><p>JPEGLIB (8 or later) or libjpeg-turbo (2.0 or later) for JPEG image support (optional for B&amp;W printers)</p>
</li>
<li><p>LIBPNG (1.6 or later) for PNG image support (optional)</p>
</li>
<li><p>LIBPAM for authentication support (optional)</p>
</li>
<li><p>LIBUSB (1.0 or later) for USB printing support (optional)</p>
</li>
<li><p>PAM for authentication support (optional)</p>
</li>
<li><p>ZLIB (1.1 or later) for compression support</p>
</li>
</ul>
<h3 class="title" id="getting-prerequisites">Getting Prerequisites</h3>
<p>CentOS 8/Fedora 23+/RHEL 8+:</p>
<pre><code>sudo dnf groupinstall 'Development Tools'
sudo dnf install avahi-devel cups-devel libjpeg-turbo-devel \
    libpng-devel libssl-devel libusbx-devel pam-devel zlib-devel
</code></pre>
<p>Debian/Raspbian/Ubuntu:</p>
<pre><code>sudo apt-get install build-essential libavahi-client-dev libcups2-dev \
    libcupsimage2-dev libjpeg-dev libpam-dev libpng-dev libssl-dev \
    libusb-1.0-0-dev zlib1g-dev
</code></pre>
<p>macOS (after installing Xcode from the AppStore):</p>
<pre><code>(install brew if necessary from &lt;https://brew.sh&gt;)
brew install libjpeg
brew install libpng
brew install libusb
brew install openssl@3
</code></pre>
<p>or download, build, and install libjpeg, libpng, libusb, and OpenSSL from source.</p>
<p>Windows (after installing Visual Studio 2019 or later) will automatically install the prerequisites via NuGet packages.</p>
<h3 class="title" id="building-pappl">Building PAPPL</h3>
<p>PAPPL uses the usual <code>configure</code> script to generate a <code>make</code> file:</p>
<pre><code>./configure [options]
make
</code></pre>
<p>Use <code>./configure --help</code> to see a full list of options.</p>
<p>There is also an Xcode project under the <code>xcode</code> directory that can be used on macOS:</p>
<pre><code>open xcode/pappl.xcodeproj
</code></pre>
<p>and a Visual Studio solution under the <code>vcnet</code> directory that must be used on Windows.</p>
<p>You can test the build by running the PAPPL test program:</p>
<pre><code>testsuite/testpappl
</code></pre>
<h3 class="title" id="installing-pappl">Installing PAPPL</h3>
<p>Once you have successfully built PAPPL, install it using:</p>
<pre><code>sudo make install
</code></pre>
<p>By default everything will be installed under <code>/usr/local</code>. Use the <code>--prefix</code> configure option to override the base installation directory. Set the <code>DESTDIR</code>, <code>DSTROOT</code>, or <code>RPM_BUILD_ROOT</code> environment variables to redirect the installation to a staging area, as is typically done for most software packaging systems (using one of those environment variables...)</p>
<h3 class="title" id="detecting-pappl">Detecting PAPPL</h3>
<p>PAPPL can be detected using the <code>pkg-config</code> command, for example:</p>
<pre><code>if pkg-config --exists pappl; then
    ...
fi
</code></pre>
<p>In a makefile you can add the necessary compiler and linker options with:</p>
<pre><code class="language-make">CFLAGS  +=      `pkg-config --cflags pappl`
LIBS    +=      `pkg-config --libs pappl`
</code></pre>
<h3 class="title" id="header-files">Header Files</h3>
<p>PAPPL provides a top-level header file that should be used:</p>
<pre><code class="language-c"><span class="directive">#include &lt;pappl/pappl.h&gt;</span>
</code></pre>
<p>This header includes all of the base object headers in PAPPL as well as the CUPS header files that provide the HTTP and IPP support functions.</p>
<h2 class="title" id="api-overview">API Overview</h2>
<p>PAPPL provides five main objects:</p>
<ul>
<li><p><a href="#the-system">The System</a> (<code>pappl_system_t</code>): The main object that manages the whole printer application;</p>
</li>
<li><p><a href="#clients">Clients</a> (<code>pappl_client_t</code>): The objects that manage client connections;</p>
</li>
<li><p><a href="#devices">Devices</a> (<code>pappl_device_t</code>): The objects that manage printer connections;</p>
</li>
<li><p><a href="#printers">Printers</a> (<code>pappl_printer_t</code>): The objects that manage printers; and</p>
</li>
<li><p><a href="#jobs">Jobs</a> (<code>pappl_job_t</code>): The objects that manage print jobs.</p>
</li>
</ul>
<p><img src="pappl-block.png" width="100%" alt="PAPPL Block Diagram::100%"></p>
<h3 class="title" id="the-system">The System</h3>
<p>The system is an object of type <a href="#pappl_system_t"><code>pappl_system_t</code></a> that manages client and device connections, listeners, the log, printers, and resources. It implements a subset of the IPP System Service (<a href="https://ftp.pwg.org/pub/pwg/candidates/cs-ippsystem10-20191122-5100.22.pdf">PWG 5100.22</a>) with each printer implementing IPP Everywhere™ (<a href="https://ftp.pwg.org/pub/pwg/candidates/cs-ippeve11-20200515-5100.14.pdf">PWG 5100.14</a>) and some extensions to provide compatibility with the full range of mobile and desktop client devices. In addition, it provides an optional embedded web interface, raw socket printing, and USB printer gadget (Linux only).</p>
<p>A system object is created using the <a href="#papplSystemCreate"><code>papplSystemCreate</code></a> function and deleted using the <a href="#papplSystemDelete"><code>papplSystemDelete</code></a> function. Each system manages zero or more <a href="#printers">printers</a> which can be accessed using either of the following functions:</p>
<ul>
<li><p><a href="#papplSystemFindPrinter"><code>papplSystemFindPrinter</code></a>: Finds the named or numbered print queue, and</p>
</li>
<li><p><a href="#papplSystemIteratePrinters"><code>papplSystemIteratePrinters</code></a>: Iterates all print queues managed by the system.</p>
</li>
</ul>
<p>The <a href="#papplSystemLoadState"><code>papplSystemLoadState</code></a> function is often used to load system values and printers from a prior run which used the <a href="#papplSystemSaveState"><code>papplSystemSaveState</code></a> function.</p>
<p>IP and domain socket listeners are added using the <a href="#papplSystemAddListeners"><code>papplSystemAddListeners</code></a> function.</p>
<p>The <code>papplSystemGet</code> functions get various system values:</p>
<ul>
<li><p><a href="#papplSystemGetAdminGroup"><code>papplSystemGetAdminGroup</code></a>: Gets the administrative group name,</p>
</li>
<li><p><a href="#papplSystemGetAuthService"><code>papplSystemGetAuthService</code></a>: Gets the PAM authorization service name,</p>
</li>
<li><p><a href="#papplSystemGetContact"><code>papplSystemGetContact</code></a>: Gets the contact information for the system,</p>
</li>
<li><p><a href="#papplSystemGetDefaultPrinterID"><code>papplSystemGetDefaultPrinterID</code></a>: Gets the default printer's ID number,</p>
</li>
<li><p><a href="#papplSystemGetDefaultPrintGroup"><code>papplSystemGetDefaultPrintGroup</code></a>: Gets the default print group name,</p>
</li>
<li><p><a href="#papplSystemGetDNSSDName"><code>papplSystemGetDNSSDName</code></a>: Gets the system's DNS-SD service instance name,</p>
</li>
<li><p><a href="#papplSystemGetFooterHTML"><code>papplSystemGetFooterHTML</code></a>: Gets the HTML to use at the bottom of the web interface,</p>
</li>
<li><p><a href="#papplSystemGetGeoLocation"><code>papplSystemGetGeoLocation</code></a>: Gets the geographic location as a &quot;geo:&quot; URI,</p>
</li>
<li><p><a href="#papplSystemGetHostName"><code>papplSystemGetHostName</code></a>: Gets the hostname for the system,</p>
</li>
<li><p><a href="#papplSystemGetHostPort"><code>papplSystemGetHostPort</code></a>: Gets the port number assigned to the system,</p>
</li>
<li><p><a href="#papplSystemGetLocation"><code>papplSystemGetLocation</code></a>: Gets the human-readable location,</p>
</li>
<li><p><a href="#papplSystemGetLogLevel"><code>papplSystemGetLogLevel</code></a>: Gets the current log level,</p>
</li>
<li><p><a href="#papplSystemGetMaxClients"><code>papplSystemGetMaxClients</code></a>: Gets the maximum number of simultaneous network clients that are allowed,</p>
</li>
<li><p><a href="#papplSystemGetMaxLogSize"><code>papplSystemGetMaxLogSize</code></a>: Gets the maximum log file size (when logging to a file),</p>
</li>
<li><p><a href="#papplSystemGetMaxSubscriptions"><code>papplSystemGetMaxSubscriptions</code></a>: Gets the maximum number of event subscriptions that are allowed,</p>
</li>
<li><p><a href="#papplSystemGetName"><code>papplSystemGetName</code></a>: Gets the name of the system that was passed to <a href="#papplSystemCreate"><code>papplSystemCreate</code></a>,</p>
</li>
<li><p><a href="#papplSystemGetNextPrinterID"><code>papplSystemGetNextPrinterID</code></a>: Gets the ID number that will be used for the next printer that is created,</p>
</li>
<li><p><a href="#papplSystemGetOptions"><code>papplSystemGetOptions</code></a>: Gets the system options that were passed to <a href="#papplSystemCreate"><code>papplSystemCreate</code></a>,</p>
</li>
<li><p><a href="#papplSystemGetOrganization"><code>papplSystemGetOrganization</code></a>: Gets the organization name,</p>
</li>
<li><p><a href="#papplSystemGetOrganizationalUnit"><code>papplSystemGetOrganizationalUnit</code></a>: Gets the organizational unit name,</p>
</li>
<li><p><a href="#papplSystemGetPassword"><code>papplSystemGetPassword</code></a>: Gets the web interface access password,</p>
</li>
<li><p><a href="#papplSystemGetServerHeader"><code>papplSystemGetServerHeader</code></a>: Gets the HTTP &quot;Server:&quot; header value,</p>
</li>
<li><p><a href="#papplSystemGetSessionKey"><code>papplSystemGetSessionKey</code></a>: Gets the current cryptographic session key,</p>
</li>
<li><p><a href="#papplSystemGetTLSOnly"><code>papplSystemGetTLSOnly</code></a>: Gets the &quot;tlsonly&quot; value that was passed to <a href="#papplSystemCreate"><code>papplSystemCreate</code></a>,</p>
</li>
<li><p><a href="#papplSystemGetUUID"><code>papplSystemGetUUID</code></a>: Gets the UUID assigned to the system, and</p>
</li>
<li><p><a href="#papplSystemGetVersions"><code>papplSystemGetVersions</code></a>: Gets the firmware version numbers that are reported to clients.</p>
</li>
</ul>
<p>Similarly, the <code>papplSystemSet</code> functions set various system values:</p>
<ul>
<li><p><a href="#papplSystemSetAdminGroup"><code>papplSystemSetAdminGroup</code></a>: Sets the administrative group name,</p>
</li>
<li><p><a href="#papplSystemSetContact"><code>papplSystemSetContact</code></a>: Sets the contact information for the system,</p>
</li>
<li><p><a href="#papplSystemSetDefaultPrinterID"><code>papplSystemSetDefaultPrinterID</code></a>: Sets the ID number of the default printer,</p>
</li>
<li><p><a href="#papplSystemSetDefaultPrintGroup"><code>papplSystemSetDefaultPrintGroup</code></a>: Sets the default print group name,</p>
</li>
<li><p><a href="#papplSystemSetPrinterDrivers"><code>papplSystemSetPrinterDrivers</code></a>: Sets the list of printer drivers,</p>
</li>
<li><p><a href="#papplSystemSetDNSSDName"><code>papplSystemSetDNSSDName</code></a>: Sets the DNS-SD service instance name,</p>
</li>
<li><p><a href="#papplSystemSetFooterHTML"><code>papplSystemSetFooterHTML</code></a>: Sets the HTML to use at the bottom of the web interface,</p>
</li>
<li><p><a href="#papplSystemSetGeoLocation"><code>papplSystemSetGeoLocation</code></a>: Sets the geographic location of the system as a &quot;geo:&quot; URI,</p>
</li>
<li><p><a href="#papplSystemSetHostName"><code>papplSystemSetHostName</code></a>: Sets the system hostname,</p>
</li>
<li><p><a href="#papplSystemSetLocation"><code>papplSystemSetLocation</code></a>: Sets the human-readable location,</p>
</li>
<li><p><a href="#papplSystemSetLogLevel"><code>papplSystemSetLogLevel</code></a>: Sets the current log level,</p>
</li>
<li><p><a href="#papplSystemSetMaxClients"><code>papplSystemSetMaxClients</code></a>: Sets the maximum number of simultaneous network clients that are allowed,</p>
</li>
<li><p><a href="#papplSystemSetMaxLogSize"><code>papplSystemSetMaxLogSize</code></a>: Sets the maximum log file size (when logging to a file),</p>
</li>
<li><p><a href="#papplSystemSetMaxSubscriptions"><code>papplSystemSetMaxSubscriptions</code></a>: Sets the maximum number of event subscriptions that are allowed,</p>
</li>
<li><p><a href="#papplSystemSetMIMECallback"><code>papplSystemSetMIMECallback</code></a>: Sets a MIME media type detection callback,</p>
</li>
<li><p><a href="#papplSystemSetNextPrinterID"><code>papplSystemSetNextPrinterID</code></a>: Sets the ID to use for the next printer that is created,</p>
</li>
<li><p><a href="#papplSystemSetOperationCallback"><code>papplSystemSetOperationCallback</code></a>: Sets an IPP operation callback,</p>
</li>
<li><p><a href="#papplSystemSetOrganization"><code>papplSystemSetOrganization</code></a>: Sets the organization name,</p>
</li>
<li><p><a href="#papplSystemSetOrganizationalUnit"><code>papplSystemSetOrganizationalUnit</code></a>: Sets the organizational unit name,</p>
</li>
<li><p><a href="#papplSystemSetPassword"><code>papplSystemSetPassword</code></a>: Sets the web interface access password,</p>
</li>
<li><p><a href="#papplSystemSetSaveCallback"><code>papplSystemSetSaveCallback</code></a>: Sets a save callback, usually <a href="#papplSystemSaveState"><code>papplSystemSaveState</code></a>, that is used to save configuration and state changes as the system runs,</p>
</li>
<li><p><a href="#papplSystemSetUUID"><code>papplSystemSetUUID</code></a>: Sets the UUID for the system, and</p>
</li>
<li><p><a href="#papplSystemSetVersions"><code>papplSystemSetVersions</code></a>: Sets the firmware versions that are reported to clients,</p>
</li>
</ul>
<h4 id="logging">Logging</h4>
<p>The PAPPL logging functions record messages to the configured log file. The <a href="#papplLog"><code>papplLog</code></a> records messages applying to the system as a whole while <a href="#papplLogClient"><code>papplLogClient</code></a>, <a href="#papplLogJob"><code>papplLogJob</code></a>, and <a href="#papplLogPrinter"><code>papplLogPrinter</code></a> record messages specific to a client connection, print job, or printer respectively.</p>
<p>The &quot;level&quot; argument specifies a log level from debugging (<code>PAPPL_LOGLEVEL_DEBUG</code>) to fatal (<code>PAPPL_LOGLEVEL_FATAL</code>) and is used to determine whether the message is recorded to the log.</p>
<p>The &quot;message&quot; argument specifies the message using a <code>printf</code> format string.</p>
<h4 id="navigation-links">Navigation Links</h4>
<p>Navigation links can be added to the web interface using the <a href="#papplSystemAddLink"><code>papplSystemAddLink</code></a> function and removed using the <a href="#papplSystemRemoveLink"><code>papplSystemRemoveLink</code></a> function.</p>
<h4 id="run-loops">Run Loops</h4>
<p>PAPPL provides two functions to manage its run loops:</p>
<ul>
<li><p><a href="#papplSystemRun"><code>papplSystemRun</code></a>: Runs a system object that you have created and configured, and</p>
</li>
<li><p><a href="#papplMainloop"><code>papplMainloop</code></a>: Handles processing standard command-line arguments and sub-commands for a printer application.</p>
</li>
</ul>
<p>You can learn more about the second function in the chapter on the <a href="#hp-printer-application-example">HP Printer Application Example</a>.</p>
<p>The system will run until it receives a Shutdown-System request, a termination signal, or you call the <a href="#papplSystemShutdown"><code>papplSystemShutdown</code></a> function. You can test whether is system is running with the <a href="#papplSystmeIsRunning"><code>papplSystmeIsRunning</code></a> function and whether it has been shut down with the <a href="#papplSystemIsShutdown"><code>papplSystemIsShutdown</code></a> function.</p>
<h4 id="resources">Resources</h4>
<p>PAPPL provides several functions for adding static and dynamic resources to the embedded HTTP server:</p>
<ul>
<li><p><a href="#papplSystemAddResourceCallback"><code>papplSystemAddResourceCallback</code></a>: Adds a callback to serve dynamic content (HTTP GET or POST requests),</p>
</li>
<li><p><a href="#papplSystemAddResourceData"><code>papplSystemAddResourceData</code></a>: Adds a static resource using an <code>unsigned char</code> array,</p>
</li>
<li><p><a href="#papplSystemAddResourceDirectory"><code>papplSystemAddResourceDirectory</code></a>: Adds static resource files from a directory,</p>
</li>
<li><p><a href="#papplSystemAddResourceFile"><code>papplSystemAddResourceFile</code></a>: Adds a static resource file,</p>
</li>
<li><p><a href="#papplSystemAddResourceString"><code>papplSystemAddResourceString</code></a>: Adds a static resource using a constant string,</p>
</li>
<li><p><a href="#papplSystemAddStringsData"><code>papplSystemAddStringsData</code></a>: Adds a localization file from a constant string, and</p>
</li>
<li><p><a href="#papplSystemAddStringsFile"><code>papplSystemAddStringsFile</code></a>: Adds a localization file from a file.</p>
</li>
</ul>
<p>Resources may be removed using the <a href="#papplSystemRemoveResource"><code>papplSystemRemoveResource</code></a> function.</p>
<h3 class="title" id="localization">Localization</h3>
<p>Resources added using the <a href="#papplSystemAddStringsData"><code>papplSystemAddStringsData</code></a> and <a href="#papplSystemAddStringsFile"><code>papplSystemAddStringsFile</code></a> functions are automatically used to localize the web interface and are provided to clients to localize printer-specific attributes and values.</p>
<p>PAPPL provides several additional localization functions that can be used to localize your own dynamic content and/or main loop sub-command:</p>
<ul>
<li><p><a href="#papplClientGetLoc"><code>papplClientGetLoc</code></a> returns the collection of localization strings for the client's preferred language,</p>
</li>
<li><p><a href="#papplClientGetLocString"><code>papplClientGetLocString</code></a> returns a localized string for the client's preferred language,</p>
</li>
<li><p><a href="#papplLocFormatString"><code>papplLocFormatString</code></a> formats a localized string from a given collection,</p>
</li>
<li><p><a href="#papplLocGetString"><code>papplLocGetString</code></a> returns a localized string from a given collection, and</p>
</li>
<li><p><a href="#papplSystemFindLoc"><code>papplSystemFindLoc</code></a> finds the collection of localization strings for the specified language.</p>
</li>
</ul>
<p>Key to these functions is the <a href="#pappl_loc_t"><code>pappl_loc_t</code></a> collection of localization strings, which combines the strings from the built-in PAPPL localizations and any strings file resources that have been added.</p>
<h4 id="web-interface-localization">Web Interface Localization</h4>
<p>When localizing the web interface, PAPPL looks up strings for titles and labels passed to <a href="#papplClientHTMLHeader"><code>papplClientHTMLHeader</code></a>, <a href="#papplClientHTMLPrinterHeader"><code>papplClientHTMLPrinterHeader</code></a>, <a href="#papplPrinterAddLink"><code>papplPrinterAddLink</code></a>, and <a href="#papplSystemAddLink"><code>papplSystemAddLink</code></a>, the footer HTML passed to <a href="#papplSystemSetFooterHTML"><code>papplSystemSetFooterHTML</code></a>, string versions passed to <a href="#papplSystemSetVersions"><code>papplSystemSetVersions</code></a>, and attribute names and values for the &quot;Printing Defaults&quot; web pages. The key string for most localization strings is the English text, for example the title &quot;Example Page&quot; might be localized to French with the following line in the corresponding &quot;.strings&quot; file:</p>
<pre><code>&quot;Example Page&quot; = &quot;Exemple de Page&quot;;
</code></pre>
<p>Attribute names are localized using the IPP attribute name string, for example &quot;smi32473-algorithm&quot; might be localized as:</p>
<pre><code>/* English strings file */
&quot;smi32473-algorithm&quot; = &quot;Dithering Algorithm&quot;;

/* French strings file */
&quot;smi32473-algorithm&quot; = &quot;Algorithme de Tramage&quot;;
</code></pre>
<p>Attribute values are localized by concatenating the attribute name with the enum (numeric) or keyword (string) values. For example, the values &quot;ordered&quot; and &quot;contone&quot; might be localized as:</p>
<pre><code>/* English strings file */
&quot;smi32473-algorithm.ordered&quot; = &quot;Patterned&quot;;
&quot;smi32473-algorithm.contone&quot; = &quot;Continuous Tone&quot;;

/* French strings file */
&quot;smi32473-algorithm.ordered&quot; = &quot;À Motifs&quot;;
&quot;smi32473-algorithm.contone&quot; = &quot;Tonalité Continue&quot;;
</code></pre>
<p>Web pages can display a localized HTML banner for the resource path, for example:</p>
<pre><code>/* English strings file */
&quot;/&quot; = &quot;Example text for the root web page.&quot;;
&quot;/network&quot; = &quot;&lt;p&gt;Example text for the &lt;em&gt;network&lt;/em&gt; web page.&lt;/p&gt;&quot;;

/* French strings file */
&quot;/&quot; = &quot;Exemple de texte pour la page Web racine.&quot;;
&quot;/network&quot; = &quot;&lt;p&gt;Exemple de texte pour la page Web du &lt;em&gt;réseau&lt;/em&gt;.&lt;/p&gt;&quot;;
</code></pre>
<h3 class="title" id="clients">Clients</h3>
<p>The PAPPL client functions provide access to client connections. Client connections and the life cycle of the <a href="#pappl_client_t"><code>pappl_client_t</code></a> objects are managed automatically by the system object for the printer application.</p>
<p>The <code>papplClientGet</code> functions get the current values for various client- supplied request data:</p>
<ul>
<li><p><a href="#papplClientGetCSRFToken"><code>papplClientGetCSRFToken</code></a>: Get the current CSRF token.</p>
</li>
<li><p><a href="#papplClientGetCookie"><code>papplClientGetCookie</code></a>: Get the value of a named cookie.</p>
</li>
<li><p><a href="#papplClientGetForm"><code>papplClientGetForm</code></a>: Get form data from the client request.</p>
</li>
<li><p><a href="#papplClientGetHTTP"><code>papplClientGetHTTP</code></a>: Get the HTTP connection associate with a client.</p>
</li>
<li><p><a href="#papplClientGetHostName"><code>papplClientGetHostName</code></a>: Get the host name used for the client request.</p>
</li>
<li><p><a href="#papplClientGetHostPort"><code>papplClientGetHostPort</code></a>: Get the host port used for the client request.</p>
</li>
<li><p><a href="#papplClientGetJob"><code>papplClientGetJob</code></a>: Get the job object associated with the client request.</p>
</li>
<li><p><a href="#papplClientGetLoc"><code>papplClientGetLoc</code></a>: Get the client's preferred localization.</p>
</li>
<li><p><a href="#papplClientGetLocString"><code>papplClientGetLocString</code></a>: Get a localized string using the client's preferred localization.</p>
</li>
<li><p><a href="#papplClientGetMethod"><code>papplClientGetMethod</code></a>: Get the HTTP request method.</p>
</li>
<li><p><a href="#papplClientGetOperation"><code>papplClientGetOperation</code></a>: Get the IPP operation code.</p>
</li>
<li><p><a href="#papplClientGetOptions"><code>papplClientGetOptions</code></a>: Get any options from the HTTP request URI.</p>
</li>
<li><p><a href="#papplClientGetPrinter"><code>papplClientGetPrinter</code></a>: Get the printer object associated with the client request.</p>
</li>
<li><p><a href="#papplClientGetRequest"><code>papplClientGetRequest</code></a>: Get the IPP request.</p>
</li>
<li><p><a href="#papplClientGetResponse"><code>papplClientGetResponse</code></a>: Get the IPP response.</p>
</li>
<li><p><a href="#papplClientGetSystem"><code>papplClientGetSystem</code></a>: Get the system object associated with the client.</p>
</li>
<li><p><a href="#papplClientGetURI"><code>papplClientGetURI</code></a>: Get the HTTP request URI.</p>
</li>
<li><p><a href="#papplClientGetUsername"><code>papplClientGetUsername</code></a>: Get the authenticated username, if any.</p>
</li>
</ul>
<h4 id="responding-to-client-requests">Responding to Client Requests</h4>
<p>The <a href="#papplClientRespond"><code>papplClientRespond</code></a> function starts a HTTP response to a client request. The <a href="#papplClientHTMLHeader"><code>papplClientHTMLHeader</code></a> and <a href="#papplClientHTMLFooter"><code>papplClientHTMLFooter</code></a> functions send standard HTML headers and footers for the printer application's configured web interface while the <a href="#papplClientHTMLEscape"><code>papplClientHTMLEscape</code></a>, <a href="#papplClientHTMLPrintf"><code>papplClientHTMLPrintf</code></a>, <a href="#papplClientHTMLPuts"><code>papplClientHTMLPuts</code></a>, and <a href="#papplClientHTMLStartForm"><code>papplClientHTMLStartForm</code></a> functions send HTML messages or strings. Use the <a href="#papplClientGetHTTP"><code>papplClientGetHTTP</code></a> and (CUPS) <code>httpWrite2</code> functions to send arbitrary data in a client response. Cookies can be included in web browser requests using the <a href="#papplClientSetCookie"><code>papplClientSetCookie</code></a> function.</p>
<p>The <a href="#papplClientRespondIPP"><code>papplClientRespondIPP</code></a> function starts an IPP response. Use the various CUPS <code>ippAdd</code> functions to add attributes to the response message.</p>
<p>The <a href="#papplClientRespondRedirect"><code>papplClientRespondRedirect</code></a> function sends a redirection response to the client.</p>
<h4 id="html-forms">HTML Forms</h4>
<p>PAPPL provides the <a href="#papplClientGetCSRFToken"><code>papplClientGetCSRFToken</code></a>, <a href="#papplClientGetForm"><code>papplClientGetForm</code></a>, <a href="#papplClientHTMLStartForm"><code>papplClientHTMLStartForm</code></a>, and <a href="#papplClientValidateForm"><code>papplClientValidateForm</code></a> functions to securely manage HTML forms.</p>
<p>The <a href="#papplClientHTMLStartForm"><code>papplClientHTMLStartForm</code></a> function starts a HTML form and inserts a hidden variable containing a CSRF token that was generated by PAPPL from a secure session key that is periodically updated. Upon receipt of a follow-up form submission request, the <a href="#papplClientGetForm"><code>papplClientGetForm</code></a> and <a href="#papplClientValidateForm"><code>papplClientValidateForm</code></a> functions can be used to securely read the form data (including any file attachments) and validate the hidden CSRF token.</p>
<h4 id="authentication-and-authorization">Authentication and Authorization</h4>
<p>PAPPL supports both user-based authentication using PAM modules and a simple cookie-based password authentication mechanism that is used to limit administrative access through the web interface.</p>
<p>The <a href="#papplHTMLAuthorize"><code>papplHTMLAuthorize</code></a> function authorizes access to the web interface and handles displaying an authentication form on the client's web browser. The return value indicates whether the client is authorized to access the web page.</p>
<p>The <a href="#papplIsAuthorized"><code>papplIsAuthorized</code></a> function can be used to determine whether the current client is authorized to perform administrative operations and is normally only used for IPP clients. Local users are always authorized while remote users must provide credentials (typically a username and password) for access. This function will return an HTTP status code that can be provided to the <a href="#httpClientSendResponse"><code>httpClientSendResponse</code></a> function. The value <code>HTTP_STATUS_CONTINUE</code> indicates that authorization is granted and the request should continue. The <a href="#papplGetUsername"><code>papplGetUsername</code></a> function can be used to obtain the authenticated user identity.</p>
<h3 class="title" id="devices">Devices</h3>
<p>The PAPPL device functions provide access to output device connections and to list available output devices. Output devices are accessed using Uniform Resource Identifier (URI) strings such as &quot;file:///path/to/file-or-directory&quot;, &quot;socket://11.22.33.44&quot;, and &quot;usb://make/model?serial=number&quot;. The follow URI schemes are supported by PAPPL:</p>
<ul>
<li><p>&quot;dnssd&quot;: Network (AppSocket) printers discovered via DNS-SD/mDNS (Bonjour),</p>
</li>
<li><p>&quot;file&quot;: Local files and directories,</p>
</li>
<li><p>&quot;snmp&quot;: Network (AppSocket) printers discovered via SNMPv1,</p>
</li>
<li><p>&quot;socket&quot;: Network (AppSocket) printers using a numeric IP address or hostname and optional port number, and</p>
</li>
<li><p>&quot;usb&quot;: Local USB printer.</p>
</li>
</ul>
<p>Custom device URI schemes can be registered using the <a href="#papplDeviceAddScheme"><code>papplDeviceAddScheme</code></a> function.</p>
<p>The <a href="#papplDeviceList"><code>papplDeviceList</code></a> function lists available output devices, providing each available output device to the supplied callback function. The list only contains devices whose URI scheme supports discovery, at present USB printers and network printers that advertise themselves using DNS-SD/mDNS and/or SNMPv1.</p>
<p>The <a href="#papplDeviceOpen"><code>papplDeviceOpen</code></a> function opens a connection to an output device using its URI. The <a href="#papplDeviceClose"><code>papplDeviceClose</code></a> function closes the connection.</p>
<p>The <a href="#papplDevicePrintf"><code>papplDevicePrintf</code></a>, <a href="#papplDevicePuts"><code>papplDevicePuts</code></a>, and <a href="#papplDeviceWrite"><code>papplDeviceWrite</code></a> functions send data to the device, while the <a href="#papplDeviceRead"><code>papplDeviceRead</code></a> function reads data from the device.</p>
<p>The <code>papplDeviceGet</code> functions get various device values:</p>
<ul>
<li><p><a href="#papplDeviceGetID"><code>papplDeviceGetID</code></a>: Gets the current IEEE-1284 device ID string,</p>
</li>
<li><p><a href="#papplDeviceGetMetrics"><code>papplDeviceGetMetrics</code></a>: Gets statistical information about all communications with the device while it has been open, and</p>
</li>
<li><p><a href="#papplDeviceGetStatus"><code>papplDeviceGetStatus</code></a>: Gets the hardware status of a device mapped to the <a href="#pappl_preason_t"><code>pappl_preason_t</code></a> bitfield.</p>
</li>
</ul>
<h3 class="title" id="printers">Printers</h3>
<p>Printers are managed by the system and are represented by the <a href="#pappl_printer_t"><code>pappl_printer_t</code></a> type. Each printer is connected to a device and uses a driver to process document data and produce output. PAPPL supports raster printers out-of-the-box and provides filter callbacks to support other kinds of printers.</p>
<p>Printers are created using the <a href="#papplPrinterCreate"><code>papplPrinterCreate</code></a> function and deleted using the <a href="#papplPrinterDelete"><code>papplPrinterDelete</code></a> function. Each printer has zero or more jobs that are pending, processing (printing), or completed which can be access using any of the following functions:</p>
<ul>
<li><p><a href="#papplPrinterFindJob"><code>papplPrinterFindJob</code></a>: Finds the numbered print job,</p>
</li>
<li><p><a href="#papplPrinterIterateActiveJobs"><code>papplPrinterIterateActiveJobs</code></a>: Iterates active print jobs managed by the printer,</p>
</li>
<li><p><a href="#papplPrinterIterateAllJobs"><code>papplPrinterIterateAllJobs</code></a>: Iterates all print jobs managed by the printer, and</p>
</li>
<li><p><a href="#papplPrinterIterateCompletedJobs"><code>papplPrinterIterateCompletedJobs</code></a>: Iterates completed print jobs managed by the printer.</p>
</li>
</ul>
<p>The <code>papplPrinterGet</code> functions get various printer values:</p>
<ul>
<li><p><a href="#papplPrinterGetContact"><code>papplPrinterGetContact</code></a>: Gets the contact information,</p>
</li>
<li><p><a href="#papplPrinterGetDeviceID"><code>papplPrinterGetDeviceID</code></a>: Gets the IEEE-1284 device ID,</p>
</li>
<li><p><a href="#papplPrinterGetDeviceURI"><code>papplPrinterGetDeviceURI</code></a>: Gets the device URI,</p>
</li>
<li><p><a href="#papplPrinterGetDNSSDName"><code>papplPrinterGetDNSSDName</code></a>: Gets the DNS-SD service instance name,</p>
</li>
<li><p><a href="#papplPrinterGetDriverAttributes"><code>papplPrinterGetDriverAttributes</code></a>: Gets the driver IPP attributes,</p>
</li>
<li><p><a href="#papplPrinterGetDriverData"><code>papplPrinterGetDriverData</code></a>: Gets the driver data,</p>
</li>
<li><p><a href="#papplPrinterGetDriverName"><code>papplPrinterGetDriverName</code></a>: Gets the driver name,</p>
</li>
<li><p><a href="#papplPrinterGetGeoLocation"><code>papplPrinterGetGeoLocation</code></a>: Gets the geographic location as a &quot;geo:&quot; URI,</p>
</li>
<li><p><a href="#papplPrinterGetID"><code>papplPrinterGetID</code></a>: Gets the ID number,</p>
</li>
<li><p><a href="#papplPrinterGetImpressionsCompleted"><code>papplPrinterGetImpressionsCompleted</code></a>: Gets the number of impressions (sides) that have been printed,</p>
</li>
<li><p><a href="#papplPrinterGetLocation"><code>papplPrinterGetLocation</code></a>: Gets the human-readable location,</p>
</li>
<li><p><a href="#papplPrinterGetMaxActiveJobs"><code>papplPrinterGetMaxActiveJobs</code></a>: Gets the maximum number of simultaneous active (queued) jobs,</p>
</li>
<li><p><a href="#papplPrinterGetMaxCompletedJobs"><code>papplPrinterGetMaxCompletedJobs</code></a>: Gets the maximum number of completed jobs for the job history,</p>
</li>
<li><p><a href="#papplPrinterGetMaxPreservedJobs"><code>papplPrinterGetMaxPreservedJobs</code></a>: Gets the maximum number of preserved jobs (with document data) for the job history,</p>
</li>
<li><p><a href="#papplPrinterGetName"><code>papplPrinterGetName</code></a>: Gets the name,</p>
</li>
<li><p><a href="#papplPrinterGetNextJobID"><code>papplPrinterGetNextJobID</code></a>: Gets the ID number of the next job that is created,</p>
</li>
<li><p><a href="#papplPrinterGetNumberOfActiveJobs"><code>papplPrinterGetNumberOfActiveJobs</code></a>: Gets the current number of active jobs,</p>
</li>
<li><p><a href="#papplPrinterGetNumberOfCompletedJobs"><code>papplPrinterGetNumberOfCompletedJobs</code></a>: Gets the current number of completed jobs in the job history,</p>
</li>
<li><p><a href="#papplPrinterGetNumberOfJobs"><code>papplPrinterGetNumberOfJobs</code></a>: Gets the total number of jobs in memory,</p>
</li>
<li><p><a href="#papplPrinterGetOrganization"><code>papplPrinterGetOrganization</code></a>: Gets the organization name,</p>
</li>
<li><p><a href="#papplPrinterGetOrganizationalUnit"><code>papplPrinterGetOrganizationalUnit</code></a>: Gets the organizational unit name,</p>
</li>
<li><p><a href="#papplPrinterGetPath"><code>papplPrinterGetPath</code></a>: Gets the path of a printer web page,</p>
</li>
<li><p><a href="#papplPrinterGetPrintGroup"><code>papplPrinterGetPrintGroup</code></a>: Gets the print authorization group name,</p>
</li>
<li><p><a href="#papplPrinterGetReasons"><code>papplPrinterGetReasons</code></a>: Gets the &quot;printer-state-reasons&quot; bitfield,</p>
</li>
<li><p><a href="#papplPrinterGetState"><code>papplPrinterGetState</code></a>: Gets the &quot;printer-state&quot; value,</p>
</li>
<li><p><a href="#papplPrinterGetSupplies"><code>papplPrinterGetSupplies</code></a>: Gets the current supply levels, and</p>
</li>
<li><p><a href="#papplPrinterGetSystem"><code>papplPrinterGetSystem</code></a>: Gets the system managing the printer.</p>
</li>
</ul>
<p>Similarly, the <code>papplPrinterSet</code> functions set those values:</p>
<ul>
<li><p><a href="#papplPrinterSetContact"><code>papplPrinterSetContact</code></a>: Sets the contact information,</p>
</li>
<li><p><a href="#papplPrinterSetDNSSDName"><code>papplPrinterSetDNSSDName</code></a>: Sets the DNS-SD service instance name,</p>
</li>
<li><p><a href="#papplPrinterSetDriverData"><code>papplPrinterSetDriverData</code></a>: Sets the driver data and attributes,</p>
</li>
<li><p><a href="#papplPrinterSetDriverDefaults"><code>papplPrinterSetDriverDefaults</code></a>: Sets the driver defaults,</p>
</li>
<li><p><a href="#papplPrinterSetGeoLocation"><code>papplPrinterSetGeoLocation</code></a>: Sets the geographic location as a &quot;geo:&quot; URI,</p>
</li>
<li><p><a href="#papplPrinterSetImpressionsCompleted"><code>papplPrinterSetImpressionsCompleted</code></a>: Sets the number of impressions that have been printed,</p>
</li>
<li><p><a href="#papplPrinterSetLocation"><code>papplPrinterSetLocation</code></a>: Sets the human-readable location,</p>
</li>
<li><p><a href="#papplPrinterSetMaxActiveJobs"><code>papplPrinterSetMaxActiveJobs</code></a>: Sets the maximum number of jobs that can be queued,</p>
</li>
<li><p><a href="#papplPrinterSetMaxCompletedJobs"><code>papplPrinterSetMaxCompletedJobs</code></a>: Sets the maximum number of completed jobs that are kept in the job history,</p>
</li>
<li><p><a href="#papplPrinterSetMaxPreservedJobs"><code>papplPrinterSetMaxPreservedJobs</code></a>: Sets the maximum number of preserved jobs (with document data) that are kept in the job history,</p>
</li>
<li><p><a href="#papplPrinterSetNextJobID"><code>papplPrinterSetNextJobID</code></a>: Sets the ID number of the next job that is created,</p>
</li>
<li><p><a href="#papplPrinterSetOrganization"><code>papplPrinterSetOrganization</code></a>: Sets the organization name,</p>
</li>
<li><p><a href="#papplPrinterSetOrganizationalUnit"><code>papplPrinterSetOrganizationalUnit</code></a>: Sets the organizational unit name,</p>
</li>
<li><p><a href="#papplPrinterSetPrintGroup"><code>papplPrinterSetPrintGroup</code></a>: Sets the print authorization group name,</p>
</li>
<li><p><a href="#papplPrinterSetReadyMedia"><code>papplPrinterSetReadyMedia</code></a>: Sets the ready (loaded) media,</p>
</li>
<li><p><a href="#papplPrinterSetReasons"><code>papplPrinterSetReasons</code></a>: Sets or clears &quot;printer-state-reasons&quot; values,</p>
</li>
<li><p><a href="#papplPrinterSetSupplies"><code>papplPrinterSetSupplies</code></a>: Sets supply level information, and</p>
</li>
<li><p><a href="#papplPrinterSetUSB"><code>papplPrinterSetUSB</code></a>: Sets the USB vendor ID, product ID, and configuration options.</p>
</li>
</ul>
<h4 id="accessing-the-printer-device">Accessing the Printer Device</h4>
<p>When necessary, the device associated with a printer can be opened with the <a href="#papplPrinterOpenDevice"><code>papplPrinterOpenDevice</code></a> function and subsequently closed using the <a href="#papplPrinterCloseDevice"><code>papplPrinterCloseDevice</code></a> function.</p>
<h4 id="controlling-printers">Controlling Printers</h4>
<p>Printers are stopped using the <a href="#papplPrinterPause"><code>papplPrinterPause</code></a> function and started using the <a href="#papplPrinterResume"><code>papplPrinterResume</code></a> function. New jobs can be held using the <a href="#papplPrinterHoldNewJobs"><code>papplPrinterHoldNewJobs</code></a> function and later released for printing using the <a href="#papplPrinterReleaseHeldNewJobs"><code>papplPrinterReleaseHeldNewJobs</code></a> function.</p>
<h4 id="navigation-links">Navigation Links</h4>
<p>Navigation links can be added to the web interface using the <a href="#papplPrinterAddLink"><code>papplPrinterAddLink</code></a> function and removed using the <a href="#papplPrinterRemoveLink"><code>papplPrinterRemoveLink</code></a> function.</p>
<h3 class="title" id="jobs">Jobs</h3>
<p>Jobs are managed by the system and are represented by the <a href="#pappl_job_t"><code>pappl_job_t</code></a> type. Jobs are created and deleted automatically by the system object for the printer application.</p>
<p>The <code>papplJobGet</code> functions get the current values associated with a job:</p>
<ul>
<li><p><a href="#papplJobGetAttribute"><code>papplJobGetAttribute</code></a>: Gets a named Job Template attribute,</p>
</li>
<li><p><a href="#papplJobGetData"><code>papplJobGetData</code></a>: Gets driver-specific processing data,</p>
</li>
<li><p><a href="#papplJobGetFilename"><code>papplJobGetFilename</code></a>: Gets the filename of the document data,</p>
</li>
<li><p><a href="#papplJobGetFormat"><code>papplJobGetFormat</code></a>: Gets the MIME media type for the document data,</p>
</li>
<li><p><a href="#papplJobGetID"><code>papplJobGetID</code></a>: Gets the job's numeric ID,</p>
</li>
<li><p><a href="#papplJobGetImpressions"><code>papplJobGetImpressions</code></a>: Gets the number of impressions (sides) in the document,</p>
</li>
<li><p><a href="#papplJobGetImpressionsCompleted"><code>papplJobGetImpressionsCompleted</code></a>: Gets the number of impressions (sides) that have been printed,</p>
</li>
<li><p><a href="#papplJobGetMessage"><code>papplJobGetMessage</code></a>: Gets the current processing message (if any),</p>
</li>
<li><p><a href="#papplJobGetName"><code>papplJobGetName</code></a>: Gets the job name/title,</p>
</li>
<li><p><a href="#papplJobGetPrinter"><code>papplJobGetPrinter</code></a>: Gets the printer for the job,</p>
</li>
<li><p><a href="#papplJobGetReasons"><code>papplJobGetReasons</code></a>: Gets the &quot;job-state-reasons&quot; bitfield,</p>
</li>
<li><p><a href="#papplJobGetState"><code>papplJobGetState</code></a>: Gets the &quot;job-state&quot; value,</p>
</li>
<li><p><a href="#papplJobGetTimeCompleted"><code>papplJobGetTimeCompleted</code></a>: Gets the UNIX time when the job completed, aborted, or was canceled,</p>
</li>
<li><p><a href="#papplJobGetTimeCreated"><code>papplJobGetTimeCreated</code></a>: Gets the UNIX time when the job was created,</p>
</li>
<li><p><a href="#papplJobGetTimeProcessed"><code>papplJobGetTimeProcessed</code></a>: Gets the UNIX time when processing started, and</p>
</li>
<li><p><a href="#papplJobGetUsername"><code>papplJobGetUsername</code></a>: Gets the name of the user that created the job.</p>
</li>
</ul>
<p>Similarly, the <code>papplJobSet</code> functions set the current values associated with a job:</p>
<ul>
<li><p><a href="#papplJobSetData"><code>papplJobSetData</code></a>: Sets driver-specific processing data,</p>
</li>
<li><p><a href="#papplJobSetImpressions"><code>papplJobSetImpressions</code></a>: Sets the number of impressions (sides) in the job,</p>
</li>
<li><p><a href="#papplJobSetImpressionsCompleted"><code>papplJobSetImpressionsCompleted</code></a>: Updates the number of impressions (sides) that have been completed,</p>
</li>
<li><p><a href="#papplJobSetMessage"><code>papplJobSetMessage</code></a>: Set the current processing message, and</p>
</li>
<li><p><a href="#papplJobSetReasons"><code>papplJobSetReasons</code></a>: Sets or clears bits in the &quot;job-state-reasons&quot; bitfield.</p>
</li>
</ul>
<h4 id="controlling-jobs">Controlling Jobs</h4>
<p>The <a href="#papplJobCancel"><code>papplJobCancel</code></a> function cancels processing of a job while the <a href="#papplJobIsCanceled"><code>papplJobIsCanceled</code></a> function returns whether a job is in the canceled state (<code>IPP_JSTATE_CANCELED</code>) or is in the process of being canceled (<code>IPP_JSTATE_PROCESSING</code> and <code>PAPPL_JREASON_PROCESSING_TO_STOP_POINT</code>).</p>
<p>The <a href="#papplJobHold"><code>papplJobHold</code></a> function holds a job while the <a href="#papplJobRelease"><code>papplJobRelease</code></a> function releases a job for printing.</p>
<h4 id="processing-jobs">Processing Jobs</h4>
<p>PAPPL stores print options in <a href="#pappl_pr_options_t"><code>pappl_pr_options_t</code></a> objects. The <a href="#papplJobCreatePrintOptions"><code>papplJobCreatePrintOptions</code></a> function creates a new print option object and initializes it using the job's attributes and printer defaults. The creator of a print options object must free it using the <a href="#papplJobDeletePrintOptions"><code>papplJobDeletePrintOptions</code></a> function.</p>
<p>The <a href="#papplJobOpenFile"><code>papplJobOpenFile</code></a> function opens a file associated with the job. The file descriptor must be closed by the caller using the <code>close</code> function. The primary document file for a job can be retrieved using the <a href="#papplJobGetFilename"><code>papplJobGetFilename</code></a> function, and its format using the <a href="#papplJobGetFormat"><code>papplJobGetFormat</code></a> function.</p>
<p>Filters allow a printer application to support different file formats. PAPPL includes raster filters for PWG and Apple raster documents (streamed) as well as JPEG and PNG image files. Filters for other formats or non-raster printers can be added using the <a href="#papplSystemAddMIMEFilter"><code>papplSystemAddMIMEFilter</code></a> function.</p>
<p>The <a href="#papplJobFilterImage"><code>papplJobFilterImage</code></a> function converts raw image data to raster data suitable for the printer, and prints using the printer driver's raster callbacks. Raster filters that output a single page can use this function to handle the details of scaling, cropping, color space conversion, and dithering for raster printers. A raster filter that needs to print more than one image must use the raster callback functions in the <a href="#pappl_pr_driver_data_t"><code>pappl_pr_driver_data_t</code></a> structure directly.</p>
<p>Filters that produce non-raster data can call the <code>papplDevice</code> functions to directly communicate with the printer in its native language.</p>
<h2 class="title" id="the-hp-printer-application-example">The HP Printer Application Example</h2>
<p>This chapter will guide you through creating a simple PCL printer application based on the old CUPS &quot;rastertohp&quot; filter. The complete code can be found in the <a href="https://github.com/michaelrsweet/hp-printer-app">hp-printer-app</a> project and serves as an overgrown &quot;Hello, World!&quot; program for PAPPL.</p>
<h3 class="title" id="the-main-loop">The Main Loop</h3>
<p>All printer applications require some sort of a main loop for processing IPP requests, printing files, and so forth. PAPPL provides the <a href="#papplMainLoop"><code>papplMainloop</code></a> convenience function that provides a standard command-line interface, and in the &quot;hp-printer-app&quot; project the <code>main</code> function just calls <code>papplMainloop</code> to do all of the work:</p>
<pre><code class="language-c"><span class="reserved">int</span>
main(<span class="reserved">int</span>  argc, <span class="reserved">char</span> *argv[])
{
  <span class="reserved">return</span> (papplMainloop(argc, argv,
                        <span class="comment">/*version*/</span><span class="string">&quot;1.0&quot;</span>,
                        <span class="comment">/*footer_html*/</span>NULL,
                        (<span class="reserved">int</span>)(<span class="reserved">sizeof</span>(pcl_drivers) / <span class="reserved">sizeof</span>(pcl_drivers[<span class="number">0</span>])),
                        pcl_drivers, pcl_callback, pcl_autoadd,
                        <span class="comment">/*subcmd_name*/</span>NULL, <span class="comment">/*subcmd_cb*/</span>NULL,
                        <span class="comment">/*system_cb*/</span>NULL,
                        <span class="comment">/*usage_cb*/</span>NULL,
                        <span class="comment">/*data*/</span>NULL));
}
</code></pre>
<p>As you can see, we pass in the command-line arguments, a version number (&quot;1.0&quot;) for our printer application, a list of drivers supported by the printer application, a callback for the driver that will configure a printer for a named driver, and a callback for automatically adding printers.</p>
<p>The &quot;footer_html&quot; argument can be provided to override the default footer text that appears at the bottom of the web interface. In this case we are passing <code>NULL</code> to use the default.</p>
<p>The drivers list is a collection of names, descriptions, IEEE-1284 device IDs, and extension pointers. Ours looks like this for HP DeskJet, HP LaserJet, and a generic PCL driver:</p>
<pre><code class="language-c"><span class="reserved">static</span> pappl_pr_driver_t pcl_drivers[] =<span class="comment">// Driver information</span>
{   <span class="comment">/* name */</span>          <span class="comment">/* description */</span>       <span class="comment">/* device ID */</span> <span class="comment">/* extension */</span>
  { <span class="string">&quot;hp_deskjet&quot;</span>,       <span class="string">&quot;HP Deskjet&quot;</span>,           NULL,           NULL },
  { <span class="string">&quot;hp_generic&quot;</span>,       <span class="string">&quot;Generic PCL&quot;</span>,          <span class="string">&quot;CMD:PCL;&quot;</span>,     NULL },
  { <span class="string">&quot;hp_laserjet&quot;</span>,      <span class="string">&quot;HP LaserJet&quot;</span>,          NULL,           NULL }
};
</code></pre>
<p><a href="#the-driver-callback">The driver callback</a> is responsible for providing the data associated with each driver, while <a href="#the-auto-add-callback">the auto-add callback</a> tells PAPPL which driver to use for the printers it finds.</p>
<p>The &quot;subcmd_name&quot; and &quot;subcmd_cb&quot; arguments specify a custom sub-command for the printer application along with a function to call. Since this printer application does not have a custom sub-command, we pass <code>NULL</code> for both.</p>
<p>The &quot;system_cb&quot; argument specifies a callback for creating the <a href="#the-system">system object</a>. We pass <code>NULL</code> because we want the default system object for this printer application, which supports multiple printers and a web interface.</p>
<p>The &quot;usage_cb&quot; argument specifies a callback from displaying the program usage message. Passing <code>NULL</code> yields the default usage message.</p>
<p>The &quot;data&quot; argument specifies a pointer that will be passed to any of the callback functions. We pass <code>NULL</code> since we do not have any extra contextual information to provide to the callbacks.</p>
<p>The <code>papplMainloop</code> function runs until all processing for the current sub-command is complete, returning the exit status for the program.</p>
<h3 class="title" id="the-driver-callback">The Driver Callback</h3>
<p>The PAPPL driver callback is called when the system is creating a new printer object. It receives pointers to the system, driver name, device URI, a driver data structure, an IPP attributes pointer, and the callback data, and it returns a boolean indicating whether the driver callback was successful:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_driver_cb_t)(pappl_system_t *system,
    <span class="reserved">const</span> <span class="reserved">char</span> *driver_name, <span class="reserved">const</span> <span class="reserved">char</span> *device_uri,
    pappl_pr_driver_data_t *driver_data, ipp_t **driver_attrs, <span class="reserved">void</span> *data);
</code></pre>
<p>A driver callback can communicate with the printer via its device URI as needed to configure the driver, however our printer application doesn't need to do that.</p>
<p>The first thing our <code>pcl_callback</code> function does is to set the printer callbacks in the driver data structure:</p>
<pre><code class="language-c">driver_data-&gt;printfile_cb    = pcl_print;
driver_data-&gt;rendjob_cb      = pcl_rendjob;
driver_data-&gt;rendpage_cb     = pcl_rendpage;
driver_data-&gt;rstartjob_cb    = pcl_rstartjob;
driver_data-&gt;rstartpage_cb   = pcl_rstartpage;
driver_data-&gt;rwriteline_cb   = pcl_rwriteline;
driver_data-&gt;status_cb       = pcl_status;
</code></pre>
<p>The <code>pcl_print</code> function prints a raw PCL file while the <code>pcl_r</code> functions print raster graphics. The <code>pcl_status</code> updates the printer status.</p>
<p>Next is the printer's native print format as a MIME media type, in this case HP PCL:</p>
<pre><code class="language-c">driver_data-&gt;format          = <span class="string">&quot;application/vnd.hp-pcl&quot;</span>;
</code></pre>
<p>The default orientation and print quality follow:</p>
<pre><code class="language-c">driver_data-&gt;orient_default  = IPP_ORIENT_NONE;
driver_data-&gt;quality_default = IPP_QUALITY_NORMAL;
</code></pre>
<p>Then the values for the various drivers. Here are the HP DeskJet driver settings:</p>
<pre><code class="language-c"><span class="reserved">if</span> (!strcmp(driver_name, <span class="string">&quot;hp_deskjet&quot;</span>))
{
  <span class="comment">/* Make and model name */</span>
  strncpy(driver_data-&gt;make_and_model, <span class="string">&quot;HP DeskJet&quot;</span>, <span class="reserved">sizeof</span>(driver_data-&gt;make_and_model) - <span class="number">1</span>);

  <span class="comment">/* Pages-per-minute for monochrome and color */</span>
  driver_data-&gt;ppm       = <span class="number">8</span>;
  driver_data-&gt;ppm_color = <span class="number">2</span>;

  <span class="comment">/* Three resolutions - 150dpi, 300dpi (default), and 600dpi */</span>
  driver_data-&gt;num_resolution  = <span class="number">3</span>;
  driver_data-&gt;x_resolution[<span class="number">0</span>] = <span class="number">150</span>;
  driver_data-&gt;y_resolution[<span class="number">0</span>] = <span class="number">150</span>;
  driver_data-&gt;x_resolution[<span class="number">1</span>] = <span class="number">300</span>;
  driver_data-&gt;y_resolution[<span class="number">1</span>] = <span class="number">300</span>;
  driver_data-&gt;x_resolution[<span class="number">2</span>] = <span class="number">600</span>;
  driver_data-&gt;y_resolution[<span class="number">2</span>] = <span class="number">600</span>;
  driver_data-&gt;x_default = driver_data-&gt;y_default = <span class="number">300</span>;

  <span class="comment">/* Four color spaces - black (1-bit and 8-bit), grayscale, and sRGB */</span>
  driver_data-&gt;raster_types = PAPPL_PWG_RASTER_TYPE_BLACK_1 | PAPPL_PWG_RASTER_TYPE_BLACK_8 | PAPPL_PWG_RASTER_TYPE_SGRAY_8 | PAPPL_PWG_RASTER_TYPE_SRGB_8;

  <span class="comment">/* Color modes: auto (default), monochrome, and color */</span>
  driver_data-&gt;color_supported = PAPPL_COLOR_MODE_AUTO | PAPPL_COLOR_MODE_AUTO_MONOCHROME | PAPPL_COLOR_MODE_COLOR | PAPPL_COLOR_MODE_MONOCHROME;
  driver_data-&gt;color_default   = PAPPL_COLOR_MODE_AUTO;

  <span class="comment">/* Media sizes with 1/4&quot; left/right and 1/2&quot; top/bottom margins*/</span>
  driver_data-&gt;num_media = (<span class="reserved">int</span>)(<span class="reserved">sizeof</span>(pcl_hp_deskjet_media) / <span class="reserved">sizeof</span>(pcl_hp_deskjet_media[<span class="number">0</span>]));
  memcpy(driver_data-&gt;media, pcl_hp_deskjet_media, <span class="reserved">sizeof</span>(pcl_hp_deskjet_media));

  driver_data-&gt;left_right = <span class="number">635</span>;       <span class="comment">// 1/4&quot; left and right</span>
  driver_data-&gt;bottom_top = <span class="number">1270</span>;      <span class="comment">// 1/2&quot; top and bottom</span>

  <span class="comment">/* 1-sided printing only */</span>
  driver_data-&gt;sides_supported = PAPPL_SIDES_ONE_SIDED;
  driver_data-&gt;sides_default   = PAPPL_SIDES_ONE_SIDED;

  <span class="comment">/* Three paper trays (MSN names) */</span>
  driver_data-&gt;num_source = <span class="number">3</span>;
  driver_data-&gt;source[<span class="number">0</span>]  = <span class="string">&quot;tray-1&quot;</span>;
  driver_data-&gt;source[<span class="number">1</span>]  = <span class="string">&quot;manual&quot;</span>;
  driver_data-&gt;source[<span class="number">2</span>]  = <span class="string">&quot;envelope&quot;</span>;

  <span class="comment">/* Five media types (MSN names) */</span>
  driver_data-&gt;num_type = <span class="number">5</span>;
  driver_data-&gt;type[<span class="number">0</span>] = <span class="string">&quot;stationery&quot;</span>;
  driver_data-&gt;type[<span class="number">1</span>] = <span class="string">&quot;bond&quot;</span>;
  driver_data-&gt;type[<span class="number">2</span>] = <span class="string">&quot;special&quot;</span>;
  driver_data-&gt;type[<span class="number">3</span>] = <span class="string">&quot;transparency&quot;</span>;
  driver_data-&gt;type[<span class="number">4</span>] = <span class="string">&quot;photographic-glossy&quot;</span>;
}
</code></pre>
<p>Finally, we fill out the ready and default media for each media source (tray), putting US Letter paper in the regular trays and #10 envelopes in any envelope tray:</p>
<pre><code class="language-c"><span class="comment">// Fill out ready and default media (default == ready media from the first source)</span>
<span class="reserved">for</span> (i = <span class="number">0</span>; i &lt; driver_data-&gt;num_source; i ++)
{
  pwg_media_t *pwg;                   <span class="comment">/* Media size information */</span>

  <span class="comment">/* Use US Letter for regular trays, #10 envelope for the envelope tray */</span>
  <span class="reserved">if</span> (!strcmp(driver_data-&gt;source[i], <span class="string">&quot;envelope&quot;</span>))
    strncpy(driver_data-&gt;media_ready[i].size_name, <span class="string">&quot;env_10_4.125x9.5in&quot;</span>, <span class="reserved">sizeof</span>(driver_data-&gt;media_ready[i].size_name) - <span class="number">1</span>);
  <span class="reserved">else</span>
    strncpy(driver_data-&gt;media_ready[i].size_name, <span class="string">&quot;na_letter_8.5x11in&quot;</span>, <span class="reserved">sizeof</span>(driver_data-&gt;media_ready[i].size_name) - <span class="number">1</span>);

  <span class="comment">/* Set margin and size information */</span>
  <span class="reserved">if</span> ((pwg = pwgMediaForPWG(driver_data-&gt;media_ready[i].size_name)) != NULL)
  {
    driver_data-&gt;media_ready[i].bottom_margin = driver_data-&gt;bottom_top;
    driver_data-&gt;media_ready[i].left_margin   = driver_data-&gt;left_right;
    driver_data-&gt;media_ready[i].right_margin  = driver_data-&gt;left_right;
    driver_data-&gt;media_ready[i].size_width    = pwg-&gt;width;
    driver_data-&gt;media_ready[i].size_length   = pwg-&gt;length;
    driver_data-&gt;media_ready[i].top_margin    = driver_data-&gt;bottom_top;
    strncpy(driver_data-&gt;media_ready[i].source, driver_data-&gt;source[i], <span class="reserved">sizeof</span>(driver_data-&gt;media_ready[i].source) - <span class="number">1</span>);
    strncpy(driver_data-&gt;media_ready[i].type, driver_data-&gt;type[<span class="number">0</span>],  <span class="reserved">sizeof</span>(driver_data-&gt;media_ready[i].type) - <span class="number">1</span>);
  }
}

driver_data-&gt;media_default = driver_data-&gt;media_ready[<span class="number">0</span>];

<span class="reserved">return</span> (<span class="reserved">true</span>);
</code></pre>
<h3 class="title" id="the-auto-add-callback">The Auto-Add Callback</h3>
<p>The PAPPL auto-add callback is called when processing the &quot;autoadd&quot; sub-command. It is called for each new device and is responsible for returning the name of the driver to be used for the device or <code>NULL</code> if no driver is available:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">const</span> <span class="reserved">char</span> *(*pappl_ml_autoadd_cb_t)(<span class="reserved">const</span> <span class="reserved">char</span> *device_info,
    <span class="reserved">const</span> <span class="reserved">char</span> *device_uri, <span class="reserved">const</span> <span class="reserved">char</span> *device_id, <span class="reserved">void</span> *data);
</code></pre>
<p>Our <code>pcl_autoadd</code> function uses the IEEE-1284 device ID string to determine whether one of the drivers will work. The <a href="#papplDeviceParseID"><code>papplDeviceParseID</code></a> function splits the string into key/value pairs that can be looked up using the <code>cupsGetOption</code> function:</p>
<pre><code class="language-c"><span class="reserved">const</span> <span class="reserved">char</span>      *ret = NULL;            <span class="comment">// Return value</span>
<span class="reserved">int</span>             num_did;                <span class="comment">// Number of device ID key/value pairs</span>
cups_option_t   *did;                   <span class="comment">// Device ID key/value pairs</span>
<span class="reserved">const</span> <span class="reserved">char</span>      *cmd,                   <span class="comment">// Command set value</span>
                *pcl;                   <span class="comment">// PCL command set pointer</span>


<span class="comment">// Parse the IEEE-1284 device ID to see if this is a printer we support...</span>
num_did = papplDeviceParseID(device_id, &amp;did);
</code></pre>
<p>The two keys we care about are the &quot;COMMAND SET&quot; (also abbreviated as &quot;CMD&quot;) for the list of document formats the printer supports and &quot;MODEL&quot;/&quot;MDL&quot; for the model name. We are looking for the &quot;PCL&quot; format and one of the common model names for HP printers:</p>
<pre><code class="language-c"><span class="comment">// Look at the COMMAND SET (CMD) key for the list of printer languages,,,</span>
<span class="reserved">if</span> ((cmd = cupsGetOption(<span class="string">&quot;COMMAND SET&quot;</span>, num_did, did)) == NULL)
  cmd = cupsGetOption(<span class="string">&quot;CMD&quot;</span>, num_did, did);

<span class="reserved">if</span> (cmd &amp;&amp; (pcl = strstr(cmd, <span class="string">&quot;PCL&quot;</span>)) != NULL &amp;&amp; (pcl[<span class="number">3</span>] == <span class="string">','</span> || !pcl[<span class="number">3</span>]))
{
  <span class="comment">// Printer supports HP PCL, now look at the MODEL (MDL) string to see if</span>
  <span class="comment">// it is one of the HP models or a generic PCL printer...</span>
  <span class="reserved">const</span> <span class="reserved">char</span> *mdl;                      <span class="comment">// Model name string</span>

  <span class="reserved">if</span> ((mdl = cupsGetOption(<span class="string">&quot;MODEL&quot;</span>, num_did, did)) == NULL)
    mdl = cupsGetOption(<span class="string">&quot;MDL&quot;</span>, num_did, did);

  <span class="reserved">if</span> (mdl &amp;&amp; (strstr(mdl, <span class="string">&quot;DeskJet&quot;</span>) || strstr(mdl, <span class="string">&quot;Photosmart&quot;</span>)))
    ret = <span class="string">&quot;hp_deskjet&quot;</span>;                 <span class="comment">// HP DeskJet/Photosmart printer</span>
  <span class="reserved">else</span> <span class="reserved">if</span> (mdl &amp;&amp; strstr(mdl, <span class="string">&quot;LaserJet&quot;</span>))
    ret = <span class="string">&quot;hp_laserjet&quot;</span>;                <span class="comment">// HP LaserJet printer</span>
  <span class="reserved">else</span>
    ret = <span class="string">&quot;hp_generic&quot;</span>;                 <span class="comment">// Some other PCL laser printer</span>
}

cupsFreeOptions(num_did, did);

<span class="reserved">return</span> (ret);
</code></pre>
<h3 class="title" id="the-file-printing-callback">The File Printing Callback</h3>
<p>The file printing callback is used when printing a &quot;raw&quot; (printer-ready) file from a client:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_printfile_cb_t)(pappl_job_t *job,
    pappl_pr_options_t *options, pappl_device_t *device);
</code></pre>
<p>This callback will sometimes send some printer initialization commands followed by the job file and then any cleanup commands. It may also be able to count the number of pages (impressions) in the file, although that is not a requirement. For the HP Printer Application our <code>pcl_print</code> function just copies the file from the job to the device and assumes that the file contains only one page:</p>
<pre><code class="language-c"><span class="reserved">int</span>     fd;                     <span class="comment">// Job file</span>
ssize_t bytes;                  <span class="comment">// Bytes read/written</span>
<span class="reserved">char</span>    buffer[<span class="number">65536</span>];          <span class="comment">// Read/write buffer</span>


papplJobSetImpressions(job, <span class="number">1</span>);

fd = open(papplJobGetFilename(job), O_RDONLY);

<span class="reserved">while</span> ((bytes = read(fd, buffer, <span class="reserved">sizeof</span>(buffer))) &gt; <span class="number">0</span>)
{
  <span class="reserved">if</span> (papplDeviceWrite(device, buffer, (size_t)bytes) &lt; <span class="number">0</span>)
  {
    papplLogJob(job, PAPPL_LOGLEVEL_ERROR,
                <span class="string">&quot;Unable to send %d bytes to printer.&quot;</span>, (<span class="reserved">int</span>)bytes);
    close(fd);
    <span class="reserved">return</span> (<span class="reserved">false</span>);
  }
}

close(fd);

papplJobSetImpressionsCompleted(job, <span class="number">1</span>);

<span class="reserved">return</span> (<span class="reserved">true</span>);
</code></pre>
<h3 class="title" id="the-raster-printing-callbacks">The Raster Printing Callbacks</h3>
<p>The PAPPL raster printing callbacks are used for printing PWG and Apple raster documents, JPEG and PNG images, and other formats that end up as raster data:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_rstartjob_cb_t)(pappl_job_t *job,
    pappl_pr_options_t *options, pappl_device_t *device);

<span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_rstartpage_cb_t)(pappl_job_t *job,
    pappl_pr_options_t *options, pappl_device_t *device, <span class="reserved">unsigned</span> page);

<span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_rwriteline_cb_t)(pappl_job_t *job,
    pappl_pr_options_t *options, pappl_device_t *device, <span class="reserved">unsigned</span> y,
    <span class="reserved">const</span> <span class="reserved">unsigned</span> <span class="reserved">char</span> *line);

<span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_rendpage_cb_t)(pappl_job_t *job,
    pappl_pr_options_t *options, pappl_device_t *device, <span class="reserved">unsigned</span> page);

<span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_rendjob_cb_t)(pappl_job_t *job,
    pappl_pr_options_t *options, pappl_device_t *device);
</code></pre>
<p>Each of the raster printing callbacks is expected to send data to the printer using the provided &quot;device&quot; pointer. The &quot;job&quot; argument provides the current job object and the &quot;options&quot; pointer provides the current <a href="#pappl_pr_options_s">print job options</a>. The &quot;page&quot; argument specifies the current page number staring at <code>0</code>.</p>
<p>The <code>pappl_pr_rstartjob_cb_t</code> function is called at the beginning of a job to allow the driver to initialize the printer for the current job.</p>
<p>The <code>pappl_pr_rstartpage_cb_t</code> function is called at the beginning of each page to allow the driver to do any per-page initialization and/or memory allocations and send any printer commands that are necessary to start a new page.</p>
<p>The <code>pappl_pr_rwriteline_cb_t</code> function is called for each raster line on the page and is typically responsible for dithering and compressing the raster data for the printer.</p>
<p>The <code>pappl_pr_rendpage_cb_t</code> function is called at the end of each page where the driver will typically eject the current page.</p>
<p>The <code>pappl_pr_rendjob_cb_t</code> function is called at the end of a job to allow the driver to send any cleanup commands to the printer.</p>
<h3 class="title" id="the-identification-callback">The Identification Callback</h3>
<p>The PAPPL identification callback is used to audibly or visibly identify the printer being used:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">void</span> (*pappl_pr_identify_cb_t)(pappl_printer_t *printer,
    pappl_identify_actions_t actions, <span class="reserved">const</span> <span class="reserved">char</span> *message);
</code></pre>
<p>The most common identification method is <code>PAPPL_IDENTIFY_ACTIONS_SOUND</code> which should have the printer make a sound. The <code>PAPPL_IDENTIFY_ACTIONS_DISPLAY</code> and <code>PAPPL_IDENTIFY_ACTIONS_SPEAK</code> methods use the &quot;message&quot; argument to display or speak a message. Finally, the <code>PAPPL_IDENTIFY_ACTIONS_FLASH</code> method flashes a light on the printer.</p>
<p>The HP Printer Application does not have an identification callback since most PCL printers lack a buzzer or light that can be remotely activated.</p>
<blockquote>
<p><em>Note:</em> IPP Everywhere™ requires all printers to support identification. A warning message is logged by PAPPL whenever a driver does not set the <code>identify_cb</code> member of the printer driver data structure.</p>
</blockquote>
<h3 class="title" id="the-status-callback">The Status Callback</h3>
<p>The PAPPL status callback is used to update the printer state, supply levels, and/or ready media for the printer:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">bool</span> (*pappl_pr_status_cb_t)(pappl_printer_t *printer);
</code></pre>
<p>The callback can open a connection to the printer using the <a href="#papplPrinterOpenDevice"><code>papplPrinterOpenDevice</code></a> function.</p>
<h3 class="title" id="the-self-test-page-callback">The Self-Test Page Callback</h3>
<p>The PAPPL self-test page callback is used to generate a self-test page for the printer:</p>
<pre><code class="language-c"><span class="reserved">typedef</span> <span class="reserved">const</span> <span class="reserved">char</span> *(*pappl_printer_testpage_cb_t)(pappl_printer_t *printer,
    <span class="reserved">char</span> *buffer, size_t bufsize);
</code></pre>
<p>When the callback returns a filename (copied to the specified buffer), that file will be queued as a job for the printer. The callback can also try opening the device using the <a href="#papplPrinterOpenDevice"><code>papplPrinterOpenDevice</code></a> function to send a printer self-test command instead - in this case the callback must return <code>NULL</code> to indicate there is no file to be printed.</p>
<h2 class="title"><a id="FUNCTIONS">Functions</a></h2>
<h3 class="function"><a id="papplClientGetCSRFToken">papplClientGetCSRFToken</a></h3>
<p class="description">Get a unique Cross-Site Request Forgery token
                              string.</p>
<p class="code">
char *papplClientGetCSRFToken(<a href="#pappl_client_t">pappl_client_t</a> *client, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Token string</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function generates and returns a unique Cross-Site Request Forgery
token string to be used as the value of a hidden variable in all HTML forms
sent in the response and then compared when validating the form data in the
subsequent request.<br>
<br>
The value is based on the current system session key and client address in
order to make replay attacks infeasible.<br>
<br>
</p><blockquote>
Note: The <a href="#papplClientHTMLStartForm"><code>papplClientHTMLStartForm</code></a> function automatically adds the
hidden CSRF variable, and the <a href="#papplClientIsValidForm"><code>papplClientIsValidForm</code></a> function
validates the value.</blockquote>
<h3 class="function"><a id="papplClientGetCookie">papplClientGetCookie</a></h3>
<p class="description">Get a cookie from the client.</p>
<p class="code">
char *papplClientGetCookie(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *name, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>name</th>
<td class="description">Name of cookie</td></tr>
<tr><th>buffer</th>
<td class="description">Value buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of value buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Cookie value or <code>NULL</code> if not set</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function gets a HTTP &quot;cookie&quot; value from the client request.  <code>NULL</code>
is returned if no cookie has been set by a prior request, or if the user has
disabled or removed the cookie.<br>
<br>
Use the <a href="#papplClientSetCookie"><code>papplClientSetCookie</code></a> function to set a cookie in a response
to a request.<br>
<br>
</p><blockquote>
Note: Cookies set with <a href="#papplClientSetCookie"><code>papplClientSetCookie</code></a> will not be available to
this function until the following request.</blockquote>
<h3 class="function"><a id="papplClientGetForm">papplClientGetForm</a></h3>
<p class="description">Get form data from the web client.</p>
<p class="code">
int papplClientGetForm(<a href="#pappl_client_t">pappl_client_t</a> *client, cups_option_t **form);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>form</th>
<td class="description">Form variables</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of form variables read</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">For HTTP GET requests, the form data is collected from the request URI.  For
HTTP POST requests, the form data is read from the client.<br>
<br>
The returned form values must be freed using the <code>cupsFreeOptions</code>
function.<br>
<br>
</p><blockquote>
Note: Because the form data is read from the client connection, this
function can only be called once per request.</blockquote>
<h3 class="function"><a id="papplClientGetHTTP">papplClientGetHTTP</a></h3>
<p class="description">Get the HTTP connection associated with a client
                         object.</p>
<p class="code">
http_t *papplClientGetHTTP(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">HTTP connection</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the HTTP connection associated with the client and is
used when sending response data directly to the client using the CUPS
<code>httpXxx</code> functions.</p>
<h3 class="function"><a id="papplClientGetHostName">papplClientGetHostName</a></h3>
<p class="description">Get the hostname from the client-supplied Host:
                             field.</p>
<p class="code">
const char *papplClientGetHostName(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Hostname or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the hostname that was used in the request and should
be used in any URLs or URIs that you generate.</p>
<h3 class="function"><a id="papplClientGetHostPort">papplClientGetHostPort</a></h3>
<p class="description">Get the port from the client-supplied Host:
                             field.</p>
<p class="code">
int papplClientGetHostPort(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Port number or <code>0</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the port number that was used in the request and should
be used in any URLs or URIs that you generate.</p>
<h3 class="function"><a id="papplClientGetJob">papplClientGetJob</a></h3>
<p class="description">Get the target job for an IPP request.</p>
<p class="code">
<a href="#pappl_job_t">pappl_job_t</a> *papplClientGetJob(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Target job or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the job associated with the current IPP request.
<code>NULL</code> is returned if the request does not target a job.</p>
<h3 class="function"><a id="papplClientGetLoc">papplClientGetLoc</a></h3>
<p class="description">Get the localization data for a client connection.</p>
<p class="code">
<a href="#pappl_loc_t">pappl_loc_t</a> *papplClientGetLoc(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Localization data to use</p>
<h3 class="function"><a id="papplClientGetLocString">papplClientGetLocString</a></h3>
<p class="description">Get a localized string for the client.</p>
<p class="code">
const char *papplClientGetLocString(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *s);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>s</th>
<td class="description">String to localize</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Localized string</p>
<h3 class="function"><a id="papplClientGetMethod">papplClientGetMethod</a></h3>
<p class="description">Get the HTTP request method.</p>
<p class="code">
http_state_t papplClientGetMethod(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">HTTP method</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the HTTP request method that was used, for example
<code>HTTP_STATE_GET</code> for a GET request or <code>HTTP_STATE_POST</code> for a POST request.</p>
<h3 class="function"><a id="papplClientGetOperation">papplClientGetOperation</a></h3>
<p class="description">Get the IPP operation code.</p>
<p class="code">
ipp_op_t papplClientGetOperation(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP operation code</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the IPP operation code associated with the current IPP
request.</p>
<h3 class="function"><a id="papplClientGetOptions">papplClientGetOptions</a></h3>
<p class="description">Get the options from the request URI.</p>
<p class="code">
const char *papplClientGetOptions(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Options or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns any options that were passed in the HTTP request URI.
The options are the characters after the &quot;?&quot; character, for example a
request URI of &quot;/mypage?name=value&quot; will have an options string of
&quot;name=value&quot;.<br>
<br>
<code>NULL</code> is returned if the request URI did not contain any options.<br>
<br>
</p><blockquote>
Note: HTTP GET form variables are normally accessed using the
<a href="#papplClientGetForm"><code>papplClientGetForm</code></a> function.  This function should only be used when
getting non-form data.</blockquote>
<h3 class="function"><a id="papplClientGetPrinter">papplClientGetPrinter</a></h3>
<p class="description">Get the target printer for an IPP request.</p>
<p class="code">
<a href="#pappl_printer_t">pappl_printer_t</a> *papplClientGetPrinter(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Target printer or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the printer associated with the current IPP request.
<code>NULL</code> is returned if the request does not target a printer.</p>
<h3 class="function"><a id="papplClientGetRequest">papplClientGetRequest</a></h3>
<p class="description">Get the IPP request message.</p>
<p class="code">
ipp_t *papplClientGetRequest(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP request message</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the attributes in the current IPP request, for use
with the CUPS <code>ippFindAttribute</code>, <code>ippFindNextAttribute</code>,
<code>ippFirstAttribute</code>, and <code>ippNextAttribute</code> functions.</p>
<h3 class="function"><a id="papplClientGetResponse">papplClientGetResponse</a></h3>
<p class="description">Get the IPP response message.</p>
<p class="code">
ipp_t *papplClientGetResponse(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP response message</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the attributes in the current IPP response, for use
with the CUPS <code>ippAddXxx</code> and <code>ippSetXxx</code> functions.  Use the
<a href="#papplClientRespondIPP"><code>papplClientRespondIPP</code></a> function to set the status code and message,
if any.</p>
<h3 class="function"><a id="papplClientGetSystem">papplClientGetSystem</a></h3>
<p class="description">Get the containing system for the client.</p>
<p class="code">
<a href="#pappl_system_t">pappl_system_t</a> *papplClientGetSystem(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">System</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the system object that contains the client.</p>
<h3 class="function"><a id="papplClientGetURI">papplClientGetURI</a></h3>
<p class="description">Get the HTTP request URI.</p>
<p class="code">
const char *papplClientGetURI(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Request URI</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the URI that was sent in the current HTTP request.<br>
<br>
</p><blockquote>
Note: Any options in the URI are removed and can be accessed separately
using the <a href="#papplClientGetOptions"><code>papplClientGetOptions</code></a> function.</blockquote>
<h3 class="function"><a id="papplClientGetUsername">papplClientGetUsername</a></h3>
<p class="description">Get the authenticated username, if any.</p>
<p class="code">
const char *papplClientGetUsername(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Authenticated username or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current authenticated username, if any.</p>
<h3 class="function"><a id="papplClientHTMLAuthorize">papplClientHTMLAuthorize</a></h3>
<p class="description">Handle authorization for the web interface.</p>
<p class="code">
bool papplClientHTMLAuthorize(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if authorized, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">The web interface supports both authentication against user accounts and
authentication using a single administrative access password.  This function
handles the details of authentication for the web interface based on the
system authentication service configuration = the &quot;auth_service&quot; argument to
<a href="#papplSystemCreate"><code>papplSystemCreate</code></a> and any callback set using
<a href="#papplSystemSetAuthCallback"><code>papplSystemSetAuthCallback</code></a>.<br>
<br>
</p><blockquote>
Note: IPP operation callbacks needing to perform authorization should use
the <a href="#papplClientIsAuthorized"><code>papplClientIsAuthorized</code></a> function instead.</blockquote>
<h3 class="function"><a id="papplClientHTMLEscape">papplClientHTMLEscape</a></h3>
<p class="description">Send a string to a web browser client.</p>
<p class="code">
void papplClientHTMLEscape(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *s, size_t slen);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>s</th>
<td class="description">String to write</td></tr>
<tr><th>slen</th>
<td class="description">Number of characters to write (<code>0</code> for nul-terminated)</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends the specified string to the web browser client and
escapes special characters as HTML entities as needed, for example &quot;&amp;&quot; is
sent as <code>&amp;amp;</code>.</p>
<h3 class="function"><a id="papplClientHTMLFooter">papplClientHTMLFooter</a></h3>
<p class="description">Show the web interface footer.</p>
<p class="code">
void papplClientHTMLFooter(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends the standard web interface footer followed by a
trailing 0-length chunk to finish the current HTTP response.  Use the
<a href="#papplSystemSetFooterHTML"><code>papplSystemSetFooterHTML</code></a> function to add any custom HTML needed in
the footer.</p>
<h3 class="function"><a id="papplClientHTMLHeader">papplClientHTMLHeader</a></h3>
<p class="description">Show the web interface header and title.</p>
<p class="code">
void papplClientHTMLHeader(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *title, int refresh);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>title</th>
<td class="description">Title</td></tr>
<tr><th>refresh</th>
<td class="description">Refresh time in seconds (<code>0</code> for no refresh)</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends the standard web interface header and title.  If the
&quot;refresh&quot; argument is greater than zero, the page will automatically reload
after that many seconds.<br>
<br>
Use the <a href="#papplSystemAddLink"><code>papplSystemAddLink</code></a> function to add system-wide navigation
links to the header.  Similarly, use <a href="#papplPrinterAddLink"><code>papplPrinterAddLink</code></a> to add
printer-specific links, which will appear in the web interface printer if
the system is not configured to support multiple printers
(the <code>PAPPL_SOPTIONS_MULTI_QUEUE</code> option to <a href="#papplSystemCreate"><code>papplSystemCreate</code></a>).</p>
<h3 class="function"><a id="papplClientHTMLPrinterFooter">papplClientHTMLPrinterFooter</a></h3>
<p class="description">Show the web interface footer for printers.</p>
<p class="code">
void papplClientHTMLPrinterFooter(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends the standard web interface footer for a printer followed
by a trailing 0-length chunk to finish the current HTTP response.  Use the
<a href="#papplSystemSetFooterHTML"><code>papplSystemSetFooterHTML</code></a> function to add any custom HTML needed in
the footer.</p>
<h3 class="function"><a id="papplClientHTMLPrinterHeader">papplClientHTMLPrinterHeader</a></h3>
<p class="description">Show the web interface header and title
                                   for printers.</p>
<p class="code">
void papplClientHTMLPrinterHeader(<a href="#pappl_client_t">pappl_client_t</a> *client, <a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *title, int refresh, const char *label, const char *path_or_url);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>title</th>
<td class="description">Title</td></tr>
<tr><th>refresh</th>
<td class="description">Refresh time in seconds or 0 for none</td></tr>
<tr><th>label</th>
<td class="description">Button label or <code>NULL</code> for none</td></tr>
<tr><th>path_or_url</th>
<td class="description">Button path or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends the standard web interface header and title for a
printer.  If the &quot;refresh&quot; argument is greater than zero, the page will
automatically reload after that many seconds.<br>
<br>
If &quot;label&quot; and &quot;path_or_url&quot; are non-<code>NULL</code> strings, an additional navigation
link is included with the title header - this is typically used for an
action button (&quot;Change&quot;).<br>
<br>
Use the <a href="#papplSystemAddLink"><code>papplSystemAddLink</code></a> function to add system-wide navigation
links to the header.  Similarly, use <a href="#papplPrinterAddLink"><code>papplPrinterAddLink</code></a> to add
printer-specific links, which will appear in the web interface printer if
the system is not configured to support multiple printers
(the <code>PAPPL_SOPTIONS_MULTI_QUEUE</code> option to <a href="#papplSystemCreate"><code>papplSystemCreate</code></a>).</p>
<h3 class="function"><a id="papplClientHTMLPrintf">papplClientHTMLPrintf</a></h3>
<p class="description">Send formatted text to the web browser client,
                            escaping as needed.</p>
<p class="code">
void papplClientHTMLPrintf(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *format, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>format</th>
<td class="description">Printf-style format string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends formatted text to the web browser client using
<code>printf</code>-style formatting codes.  The format string itself is not escaped
to allow for embedded HTML, however strings inserted using the '%c' or <code>%s</code>
codes are escaped properly for HTML - &quot;&amp;&quot; is sent as <code>&amp;amp;</code>, etc.</p>
<h3 class="function"><a id="papplClientHTMLPuts">papplClientHTMLPuts</a></h3>
<p class="description">Send a HTML string to the web browser client.</p>
<p class="code">
void papplClientHTMLPuts(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *s);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>s</th>
<td class="description">String</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a HTML string to the client without performing any
escaping of special characters.</p>
<h3 class="function"><a id="papplClientHTMLStartForm">papplClientHTMLStartForm</a></h3>
<p class="description">Start a HTML form.</p>
<p class="code">
void papplClientHTMLStartForm(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *action, bool multipart);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>action</th>
<td class="description">Form action URL</td></tr>
<tr><th>multipart</th>
<td class="description"><code>true</code> if the form allows file uploads, <code>false</code> otherwise</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function starts a HTML form with the specified &quot;action&quot; path and
includes the CSRF token as a hidden variable.  If the &quot;multipart&quot; argument
is <code>true</code>, the form is annotated to support file attachments up to 2MiB in
size.</p>
<h3 class="function"><a id="papplClientIsAuthorized">papplClientIsAuthorized</a></h3>
<p class="description">Determine whether a client is authorized for
                              administrative requests.</p>
<p class="code">
http_status_t papplClientIsAuthorized(<a href="#pappl_client_t">pappl_client_t</a> *client);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">HTTP status</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function determines whether a client is authorized to submit an
administrative request.<br>
<br>
The return value is <code>HTTP_STATUS_CONTINUE</code> if access is authorized,
<code>HTTP_STATUS_FORBIDDEN</code> if access is not allowed, <code>HTTP_STATUS_UNAUTHORIZED</code>
if authorization is required, or <code>HTTP_STATUS_UPGRADE_REQUIRED</code> if the
connection needs to be encrypted.  All of these values can be passed to the
<a href="#papplClientRespond"><code>papplClientRespond</code></a> function.</p>
<h3 class="function"><a id="papplClientIsValidForm">papplClientIsValidForm</a></h3>
<p class="description">Validate HTML form variables.</p>
<p class="code">
bool papplClientIsValidForm(<a href="#pappl_client_t">pappl_client_t</a> *client, int num_form, cups_option_t *form);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>num_form</th>
<td class="description">Number of form variables</td></tr>
<tr><th>form</th>
<td class="description">Form variables</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the CSRF token is valid, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function validates the contents of a HTML form using the CSRF token
included as a hidden variable.  When sending a HTML form you should use the
<a href="#papplClientStartForm"><code>papplClientStartForm</code></a> function to start the HTML form and insert the
CSRF token for later validation.<br>
<br>
</p><blockquote>
Note: Callers are expected to validate all other form variables.</blockquote>
<h3 class="function"><a id="papplClientRespond">papplClientRespond</a></h3>
<p class="description">Send a regular HTTP response.</p>
<p class="code">
bool papplClientRespond(<a href="#pappl_client_t">pappl_client_t</a> *client, http_status_t code, const char *content_encoding, const char *type, time_t last_modified, size_t length);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>code</th>
<td class="description">HTTP status of response</td></tr>
<tr><th>content_encoding</th>
<td class="description">Content-Encoding of response</td></tr>
<tr><th>type</th>
<td class="description">MIME media type of response</td></tr>
<tr><th>last_modified</th>
<td class="description">Last-Modified date/time or <code>0</code> for none</td></tr>
<tr><th>length</th>
<td class="description">Length of response or <code>0</code> for variable-length</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends all of the required HTTP fields and includes standard
messages for errors.  The following values for &quot;code&quot; are explicitly
supported:

</p><ul>
<li><code>HTTP_STATUS_OK</code>: The request is successful.
</li>
<li><code>HTTP_STATUS_BAD_REQUEST</code>: The client submitted a bad request.
</li>
<li><code>HTTP_STATUS_CONTINUE</code>: An authentication challenge is not needed.
</li>
<li><code>HTTP_STATUS_FORBIDDEN</code>: Authenticated but not allowed.
</li>
<li><code>HTTP_STATUS_METHOD_NOT_ALLOWED</code>: The HTTP method is not supported for the
  given URI.
</li>
<li><code>HTTP_STATUS_UNAUTHORIZED</code>: Not authenticated.
</li>
<li><code>HTTP_STATUS_UPGRADE_REQUIRED</code>: Redirects the client to a secure page.</li>
</ul>
<p class="discussion">Use the <a href="#papplClientRespondRedirect"><code>papplClientRespondRedirect</code></a> when you need to redirect the
client to another page.</p>
<h3 class="function"><a id="papplClientRespondIPP">papplClientRespondIPP</a></h3>
<p class="description">Send an IPP response.</p>
<p class="code">
ipp_t *papplClientRespondIPP(<a href="#pappl_client_t">pappl_client_t</a> *client, ipp_status_t status, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>status</th>
<td class="description">status-code</td></tr>
<tr><th>message</th>
<td class="description">printf-style status-message</td></tr>
<tr><th>...</th>
<td class="description">Additional args as needed</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP response message</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the return status for an IPP request and returns the
current IPP response message.  The &quot;status&quot; and &quot;message&quot; arguments replace
any existing status-code and &quot;status-message&quot; attribute value that may be
already present in the response.<br>
<br>
</p><blockquote>
Note: You should call this function prior to adding any response
attributes.</blockquote>
<h3 class="function"><a id="papplClientRespondIPPUnsupported">papplClientRespondIPPUnsupported</a></h3>
<p class="description">Respond with an unsupported IPP attribute.</p>
<p class="code">
void papplClientRespondIPPUnsupported(<a href="#pappl_client_t">pappl_client_t</a> *client, ipp_attribute_t *attr);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>attr</th>
<td class="description">Atribute</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a 'client-error-attributes-or-values-not-supported'
status code and adds the specified attribute to the unsupported attributes
group in the response.</p>
<h3 class="function"><a id="papplClientRespondRedirect">papplClientRespondRedirect</a></h3>
<p class="description">Respond with a redirect to another page.</p>
<p class="code">
bool papplClientRespondRedirect(<a href="#pappl_client_t">pappl_client_t</a> *client, http_status_t code, const char *path);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>code</th>
<td class="description"><code>HTTP_STATUS_MOVED_PERMANENTLY</code> or <code>HTTP_STATUS_FOUND</code></td></tr>
<tr><th>path</th>
<td class="description">Redirection path/URL</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a HTTP response that redirects the client to another
page or URL.  The most common &quot;code&quot; value to return is <code>HTTP_STATUS_FOUND</code>.</p>
<h3 class="function"><a id="papplClientSetCookie">papplClientSetCookie</a></h3>
<p class="description">Set a cookie for the web browser client.</p>
<p class="code">
void papplClientSetCookie(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *name, const char *value, int expires);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>name</th>
<td class="description">Cookie name</td></tr>
<tr><th>value</th>
<td class="description">Cookie value</td></tr>
<tr><th>expires</th>
<td class="description">Expiration in seconds from now, <code>0</code> for a session cookie</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the value of a cookie for the client by updating the
<code>Set-Cookie</code> header in the HTTP response that will be sent.  The &quot;name&quot; and
&quot;value&quot; strings must contain only valid characters for a cookie and its
value as documented in RFC 6265, which basically means letters, numbers, &quot;@&quot;,
&quot;-&quot;, &quot;.&quot;, and &quot;_&quot;.<br>
<br>
The &quot;expires&quot; argument specifies how long the cookie will remain active in
seconds, for example <code>3600</code> seconds is one hour and <code>86400</code> seconds is one
day.  If the value is zero or less, a &quot;session&quot; cookie is created instead
which will expire as soon as the web browser is closed.</p>
<h3 class="function"><a id="papplClientSetUsername">papplClientSetUsername</a></h3>
<p class="description">Set the authenticated username, if any.</p>
<p class="code">
void papplClientSetUsername(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *username);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>username</th>
<td class="description">Username or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the current authenticated username, if any.</p>
<h3 class="function"><a id="papplCopyString">papplCopyString</a></h3>
<p class="description"></p>
<p class="code">
size_t papplCopyString(char *dst, const char *src, size_t dstsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>dst</th>
<td class="description">Destination buffer</td></tr>
<tr><th>src</th>
<td class="description">Source string</td></tr>
<tr><th>dstsize</th>
<td class="description">Destination size</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Safely copy a C string.</p>
<p class="discussion">This function safely copies a C string to a destination buffer.</p>
<h3 class="function"><a id="papplCreateTempFile">papplCreateTempFile</a></h3>
<p class="description">Create a temporary file.</p>
<p class="code">
int papplCreateTempFile(char *fname, size_t fnamesize, const char *prefix, const char *ext);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>fname</th>
<td class="description">Filename buffer</td></tr>
<tr><th>fnamesize</th>
<td class="description">Size of filename buffer</td></tr>
<tr><th>prefix</th>
<td class="description">Prefix for filename</td></tr>
<tr><th>ext</th>
<td class="description">Filename extension, if any</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">File descriptor or <code>-1</code> on error</p>
<h3 class="function"><a id="papplDeviceAddScheme">papplDeviceAddScheme</a></h3>
<p class="description">Add a device URI scheme.</p>
<p class="code">
void papplDeviceAddScheme(const char *scheme, <a href="#pappl_devtype_t">pappl_devtype_t</a> dtype, <a href="#pappl_devlist_cb_t">pappl_devlist_cb_t</a> list_cb, <a href="#pappl_devopen_cb_t">pappl_devopen_cb_t</a> open_cb, <a href="#pappl_devclose_cb_t">pappl_devclose_cb_t</a> close_cb, <a href="#pappl_devread_cb_t">pappl_devread_cb_t</a> read_cb, <a href="#pappl_devwrite_cb_t">pappl_devwrite_cb_t</a> write_cb, <a href="#pappl_devstatus_cb_t">pappl_devstatus_cb_t</a> status_cb, <a href="#pappl_devid_cb_t">pappl_devid_cb_t</a> id_cb);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>scheme</th>
<td class="description">URI scheme</td></tr>
<tr><th>dtype</th>
<td class="description">Device type (<code>PAPPL_DEVTYPE_CUSTOM_LOCAL</code> or <code>PAPPL_DEVTYPE_CUSTOM_NETWORK</code>)</td></tr>
<tr><th>list_cb</th>
<td class="description">List devices callback, if any</td></tr>
<tr><th>open_cb</th>
<td class="description">Open callback</td></tr>
<tr><th>close_cb</th>
<td class="description">Close callback</td></tr>
<tr><th>read_cb</th>
<td class="description">Read callback</td></tr>
<tr><th>write_cb</th>
<td class="description">Write callback</td></tr>
<tr><th>status_cb</th>
<td class="description">Status callback, if any</td></tr>
<tr><th>id_cb</th>
<td class="description">IEEE-1284 device ID callback, if any</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function registers a device URI scheme with PAPPL, so that devices using
the named scheme can receive print data, report status information, and so
forth.  PAPPL includes support for the following URI schemes:

</p><ul>
<li><code>dnssd</code>: Network printers discovered using DNS-SD.
</li>
<li><code>file</code>: Character device files, plain files, and directories.
</li>
<li><code>snmp</code>: Network printers discovered using SNMPv1.
</li>
<li><code>socket</code>: Network printers using a hostname or numeric IP address.
</li>
<li><code>usb</code>: Class 1 (unidirectional) or 2 (bidirectional) USB printers.</li>
</ul>
<p class="discussion">The &quot;scheme&quot; parameter specifies the URI scheme and must consist of lowercase
letters, digits, &quot;-&quot;, &quot;_&quot;, and/or &quot;.&quot;, for example &quot;x-foo&quot; or
&quot;com.example.bar&quot;.<br>
<br>
The &quot;dtype&quot; parameter specifies the device type and should be
<code>PAPPL_DTYPE_CUSTOM_LOCAL</code> for locally connected printers and
<code>PAPPL_DTYPE_CUSTOM_NETWORK</code> for network printers.<br>
<br>
Each of the callbacks corresponds to one of the <code>papplDevice</code> functions:

</p><ul>
<li>&quot;list_cb&quot;: Implements discovery of devices (optional)
</li>
<li>&quot;open_cb&quot;: Opens communication with a device and allocates any device-
  specific data as needed
</li>
<li>&quot;close_cb&quot;: Closes communication with a device and frees any device-
  specific data as needed
</li>
<li>&quot;read_cb&quot;: Reads data from a device
</li>
<li>&quot;write_cb&quot;: Write data to a device
</li>
<li>&quot;status_cb&quot;: Gets basic printer state information from a device (optional)
</li>
<li>&quot;id_cb&quot;: Gets the current IEEE-1284 device ID from a device (optional)</li>
</ul>
<p class="discussion">The &quot;open_cb&quot; callback typically calls <a href="#papplDeviceSetData"><code>papplDeviceSetData</code></a> to store a
pointer to contextual information for the connection while the &quot;close_cb&quot;,
&quot;id_cb&quot;, &quot;read_cb&quot;, &quot;write_cb&quot;, and &quot;status_cb&quot; callbacks typically call
<a href="#papplDeviceGetData"><code>papplDeviceGetData</code></a> to retrieve it.</p>
<h3 class="function"><a id="papplDeviceAddScheme2">papplDeviceAddScheme2</a></h3>
<p class="description">Add a device URI scheme with supply-level queries.</p>
<p class="code">
void papplDeviceAddScheme2(const char *scheme, <a href="#pappl_devtype_t">pappl_devtype_t</a> dtype, <a href="#pappl_devlist_cb_t">pappl_devlist_cb_t</a> list_cb, <a href="#pappl_devopen_cb_t">pappl_devopen_cb_t</a> open_cb, <a href="#pappl_devclose_cb_t">pappl_devclose_cb_t</a> close_cb, <a href="#pappl_devread_cb_t">pappl_devread_cb_t</a> read_cb, <a href="#pappl_devwrite_cb_t">pappl_devwrite_cb_t</a> write_cb, <a href="#pappl_devstatus_cb_t">pappl_devstatus_cb_t</a> status_cb, <a href="#pappl_devsupplies_cb_t">pappl_devsupplies_cb_t</a> supplies_cb, <a href="#pappl_devid_cb_t">pappl_devid_cb_t</a> id_cb);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>scheme</th>
<td class="description">URI scheme</td></tr>
<tr><th>dtype</th>
<td class="description">Device type (<code>PAPPL_DEVTYPE_CUSTOM_LOCAL</code> or <code>PAPPL_DEVTYPE_CUSTOM_NETWORK</code>)</td></tr>
<tr><th>list_cb</th>
<td class="description">List devices callback, if any</td></tr>
<tr><th>open_cb</th>
<td class="description">Open callback</td></tr>
<tr><th>close_cb</th>
<td class="description">Close callback</td></tr>
<tr><th>read_cb</th>
<td class="description">Read callback</td></tr>
<tr><th>write_cb</th>
<td class="description">Write callback</td></tr>
<tr><th>status_cb</th>
<td class="description">Status callback, if any</td></tr>
<tr><th>supplies_cb</th>
<td class="description">Supply level callback, if any</td></tr>
<tr><th>id_cb</th>
<td class="description">IEEE-1284 device ID callback, if any</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function registers a device URI scheme with PAPPL, so that devices using
the named scheme can receive print data, report status information, and so
forth.  PAPPL includes support for the following URI schemes:

</p><ul>
<li><code>dnssd</code>: Network printers discovered using DNS-SD.
</li>
<li><code>file</code>: Character device files, plain files, and directories.
</li>
<li><code>snmp</code>: Network printers discovered using SNMPv1.
</li>
<li><code>socket</code>: Network printers using a hostname or numeric IP address.
</li>
<li><code>usb</code>: Class 1 (unidirectional) or 2 (bidirectional) USB printers.</li>
</ul>
<p class="discussion">The &quot;scheme&quot; parameter specifies the URI scheme and must consist of lowercase
letters, digits, &quot;-&quot;, &quot;_&quot;, and/or &quot;.&quot;, for example &quot;x-foo&quot; or
&quot;com.example.bar&quot;.<br>
<br>
The &quot;dtype&quot; parameter specifies the device type and should be
<code>PAPPL_DTYPE_CUSTOM_LOCAL</code> for locally connected printers and
<code>PAPPL_DTYPE_CUSTOM_NETWORK</code> for network printers.<br>
<br>
Each of the callbacks corresponds to one of the <code>papplDevice</code> functions:

</p><ul>
<li>&quot;list_cb&quot;: Implements discovery of devices (optional)
</li>
<li>&quot;open_cb&quot;: Opens communication with a device and allocates any device-
  specific data as needed
</li>
<li>&quot;close_cb&quot;: Closes communication with a device and frees any device-
  specific data as needed
</li>
<li>&quot;read_cb&quot;: Reads data from a device
</li>
<li>&quot;write_cb&quot;: Write data to a device
</li>
<li>&quot;status_cb&quot;: Gets basic printer state information from a device (optional)
</li>
<li>&quot;supplies_cb&quot;: Gets supply level information from a device (optional)
</li>
<li>&quot;id_cb&quot;: Gets the current IEEE-1284 device ID from a device (optional)</li>
</ul>
<p class="discussion">The &quot;open_cb&quot; callback typically calls <a href="#papplDeviceSetData"><code>papplDeviceSetData</code></a> to store a
pointer to contextual information for the connection while the &quot;close_cb&quot;,
&quot;id_cb&quot;, &quot;read_cb&quot;, &quot;write_cb&quot;, &quot;status_cb&quot;, and &quot;supplies_cb&quot; callbacks
typically call <a href="#papplDeviceGetData"><code>papplDeviceGetData</code></a> to retrieve it.</p>
<h3 class="function"><a id="papplDeviceClose">papplDeviceClose</a></h3>
<p class="description">Close a device connection.</p>
<p class="code">
void papplDeviceClose(<a href="#pappl_device_t">pappl_device_t</a> *device);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device to close</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function flushes any pending write data and closes the connection to a
device.</p>
<h3 class="function"><a id="papplDeviceError">papplDeviceError</a></h3>
<p class="description">Report an error on a device.</p>
<p class="code">
void papplDeviceError(<a href="#pappl_device_t">pappl_device_t</a> *device, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>message</th>
<td class="description">Printf-style error message</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function reports an error on a device using the client-supplied callback
function.  It is normally called from any custom device URI scheme callbacks
you implement.</p>
<h3 class="function"><a id="papplDeviceFlush">papplDeviceFlush</a></h3>
<p class="description">Flush any buffered data to the device.</p>
<p class="code">
void papplDeviceFlush(<a href="#pappl_device_t">pappl_device_t</a> *device);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function flushes any pending write data sent using the
<a href="#papplDevicePrintf"><code>papplDevicePrintf</code></a>, <a href="#papplDevicePuts"><code>papplDevicePuts</code></a>, or <a href="#papplDeviceWrite"><code>papplDeviceWrite</code></a>
functions to the device.</p>
<h3 class="function"><a id="papplDeviceGetData">papplDeviceGetData</a></h3>
<p class="description">Get device-specific data.</p>
<p class="code">
void *papplDeviceGetData(<a href="#pappl_device_t">pappl_device_t</a> *device);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Device data pointer</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns any device-specific data that has been set by the
device open callback.  It is normally only called from any custom device URI
scheme callbacks you implement.</p>
<h3 class="function"><a id="papplDeviceGetID">papplDeviceGetID</a></h3>
<p class="description">Get the IEEE-1284 device ID.</p>
<p class="code">
char *papplDeviceGetID(<a href="#pappl_device_t">pappl_device_t</a> *device, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>buffer</th>
<td class="description">Buffer for IEEE-1284 device ID</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IEEE-1284 device ID or <code>NULL</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function queries the IEEE-1284 device ID from the device and copies it
to the provided buffer.  The buffer must be at least 64 bytes and should be
at least 1024 bytes in length.<br>
<br>
</p><blockquote>
<em>Note:</em> This function can block for up to several seconds depending on
the type of connection.</blockquote>
<h3 class="function"><a id="papplDeviceGetMetrics">papplDeviceGetMetrics</a></h3>
<p class="description">Get the device metrics.</p>
<p class="code">
<a href="#pappl_devmetrics_t">pappl_devmetrics_t</a> *papplDeviceGetMetrics(<a href="#pappl_device_t">pappl_device_t</a> *device, <a href="#pappl_devmetrics_t">pappl_devmetrics_t</a> *metrics);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>metrics</th>
<td class="description">Buffer for metrics data</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Metrics data</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a copy of the device metrics data, which includes the
number, length (in bytes), and duration (in milliseconds) of read, status,
and write requests for the current session.  This information is normally
used for performance measurement and optimization during development of a
printer application.  It can also be useful diagnostic information.</p>
<h3 class="function"><a id="papplDeviceGetStatus">papplDeviceGetStatus</a></h3>
<p class="description">Get the printer status bits.</p>
<p class="code">
<a href="#pappl_preason_t">pappl_preason_t</a> papplDeviceGetStatus(<a href="#pappl_device_t">pappl_device_t</a> *device);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP &quot;printer-state-reasons&quot; values</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current printer status bits, as applicable to the
current device.<br>
<br>
The status bits for USB devices come from the original Centronics parallel
printer &quot;standard&quot; which was later formally standardized in IEEE 1284-1984
and the USB Device Class Definition for Printing Devices.  Some vendor
extensions are also supported.<br>
<br>
The status bits for network devices come from the hrPrinterDetectedErrorState
property that is defined in the SNMP Printer MIB v2 (RFC 3805).<br>
<br>
This function returns a <a href="#pappl_preason_t"><code>pappl_preason_t</code></a> bitfield which can be
passed to the <a href="#papplPrinterSetReasons"><code>papplPrinterSetReasons</code></a> function.  Use the
<a href="#PAPPL_PREASON_DEVICE_STATUS"><code>PAPPL_PREASON_DEVICE_STATUS</code></a> value as the value of the &quot;remove&quot;
argument.<br>
<br>
</p><blockquote>
Note: This function can block for several seconds while getting the status
information.</blockquote>
<h3 class="function"><a id="papplDeviceGetSupplies">papplDeviceGetSupplies</a></h3>
<p class="description">Get the current printer supplies.</p>
<p class="code">
int papplDeviceGetSupplies(<a href="#pappl_device_t">pappl_device_t</a> *device, int max_supplies, <a href="#pappl_supply_t">pappl_supply_t</a> *supplies);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>max_supplies</th>
<td class="description">Maximum supplies</td></tr>
<tr><th>supplies</th>
<td class="description">Supplies</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of supplies</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number, type, and level of current printer supply
levels, as applicable to the current device.<br>
<br>
The supply levels for network devices come from the prtSupplyTable and
prtMarkerColorantTable properties that are defined in the SNMP Printer MIB
v2 (RFC 3805).<br>
<br>
The supply levels for other devices are not standardized and must be queried
using other methods.<br>
<br>
</p><blockquote>
Note: This function can block for several seconds while getting the supply
information.</blockquote>
<h3 class="function"><a id="papplDeviceIsSupported">papplDeviceIsSupported</a></h3>
<p class="description">Determine whether a given URI is supported.</p>
<p class="code">
bool papplDeviceIsSupported(const char *uri);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>uri</th>
<td class="description">URI</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if supported, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function determines whether a given URI or URI scheme is supported as
a device.</p>
<h3 class="function"><a id="papplDeviceList">papplDeviceList</a></h3>
<p class="description">List available devices.</p>
<p class="code">
bool papplDeviceList(<a href="#pappl_devtype_t">pappl_devtype_t</a> types, <a href="#pappl_device_cb_t">pappl_device_cb_t</a> cb, void *data, <a href="#pappl_deverror_cb_t">pappl_deverror_cb_t</a> err_cb, void *err_data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>types</th>
<td class="description">Device types</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">User data for callback</td></tr>
<tr><th>err_cb</th>
<td class="description">Error callback or <code>NULL</code> for default</td></tr>
<tr><th>err_data</th>
<td class="description">Data for error callback</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the callback returned <code>true</code>, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function lists the available devices, calling the &quot;cb&quot; function once per
device that is discovered/listed.  The callback function receives the device
URI, IEEE-1284 device ID (if any), and &quot;data&quot; pointer, and returns <code>true</code> to
stop listing devices and <code>false</code> to continue.<br>
<br>
The &quot;types&quot; argument determines which devices are listed, for example
<code>PAPPL_DEVTYPE_ALL</code> will list all types of devices while <code>PAPPL_DEVTYPE_USB</code> only
lists USB printers.<br>
<br>
Any errors are reported using the supplied &quot;err_cb&quot; function.  If you specify
<code>NULL</code> for this argument, errors are sent to <code>stderr</code>.<br>
<br>
</p><blockquote>
Note: This function will block (not return) until each of the device URI
schemes has reported all of the devices <em>or</em> the supplied callback function
returns <code>true</code>.</blockquote>
<h3 class="function"><a id="papplDeviceOpen">papplDeviceOpen</a></h3>
<p class="description">Open a connection to a device.</p>
<p class="code">
<a href="#pappl_device_t">pappl_device_t</a> *papplDeviceOpen(const char *device_uri, const char *name, <a href="#pappl_deverror_cb_t">pappl_deverror_cb_t</a> err_cb, void *err_data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device_uri</th>
<td class="description">Device URI</td></tr>
<tr><th>name</th>
<td class="description">Job name</td></tr>
<tr><th>err_cb</th>
<td class="description">Error callback or <code>NULL</code> for default</td></tr>
<tr><th>err_data</th>
<td class="description">Data for error callback</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Device connection or <code>NULL</code> on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function opens a connection to the specified device URI.  The &quot;name&quot;
argument provides textual context for the connection and is usually the name
(title) of the print job.<br>
<br>
Any errors are reported using the supplied &quot;err_cb&quot; function.  If you specify
<code>NULL</code> for this argument, errors are sent to <code>stderr</code>.</p>
<h3 class="function"><a id="papplDeviceParseID">papplDeviceParseID</a></h3>
<p class="description">Parse an IEEE-1284 device ID string.</p>
<p class="code">
int papplDeviceParseID(const char *device_id, cups_option_t **pairs);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device_id</th>
<td class="description">IEEE-1284 device ID string</td></tr>
<tr><th>pairs</th>
<td class="description">Key/value pairs</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of key/value pairs</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function parses an IEEE-1284 device ID string and returns an array of
key/value pairs as a <code>cups_option_t</code> array.  The returned array must be
freed using the <code>cupsFreeOptions</code> function.</p>
<h3 class="function"><a id="papplDevicePrintf">papplDevicePrintf</a></h3>
<p class="description">Write a formatted string.</p>
<p class="code">
ssize_t papplDevicePrintf(<a href="#pappl_device_t">pappl_device_t</a> *device, const char *format, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>format</th>
<td class="description">Printf-style format string</td></tr>
<tr><th>...</th>
<td class="description">Additional args as needed</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of characters or -1 on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function buffers a formatted string that will be sent to the device.
The &quot;format&quot; argument accepts all <code>printf</code> format specifiers and behaves
identically to that function.<br>
<br>
Call the <a href="#papplDeviceFlush"><code>papplDeviceFlush</code></a> function to ensure that the formatted string
is immediately sent to the device.</p>
<h3 class="function"><a id="papplDevicePuts">papplDevicePuts</a></h3>
<p class="description">Write a literal string.</p>
<p class="code">
ssize_t papplDevicePuts(<a href="#pappl_device_t">pappl_device_t</a> *device, const char *s);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>s</th>
<td class="description">Literal string</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of characters or -1 on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function buffers a literal string that will be sent to the device.
Call the <a href="#papplDeviceFlush"><code>papplDeviceFlush</code></a> function to ensure that the literal string
is immediately sent to the device.</p>
<h3 class="function"><a id="papplDeviceRead">papplDeviceRead</a></h3>
<p class="description">Read from a device.</p>
<p class="code">
ssize_t papplDeviceRead(<a href="#pappl_device_t">pappl_device_t</a> *device, void *buffer, size_t bytes);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>buffer</th>
<td class="description">Read buffer</td></tr>
<tr><th>bytes</th>
<td class="description">Max bytes to read</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of bytes read or -1 on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function reads data from the device.  Depending on the device, this
function may block indefinitely.</p>
<h3 class="function"><a id="papplDeviceSetData">papplDeviceSetData</a></h3>
<p class="description">Set device-specific data.</p>
<p class="code">
void papplDeviceSetData(<a href="#pappl_device_t">pappl_device_t</a> *device, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>data</th>
<td class="description">Device data pointer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets any device-specific data needed to communicate with the
device.  It is normally only called from the open callback that was
registered for the device URI scheme.</p>
<h3 class="function"><a id="papplDeviceWrite">papplDeviceWrite</a></h3>
<p class="description">Write to a device.</p>
<p class="code">
ssize_t papplDeviceWrite(<a href="#pappl_device_t">pappl_device_t</a> *device, const void *buffer, size_t bytes);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>buffer</th>
<td class="description">Write buffer</td></tr>
<tr><th>bytes</th>
<td class="description">Number of bytes to write</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of bytes written or -1 on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function buffers data that will be sent to the device.  Call the
<a href="#papplDeviceFlush"><code>papplDeviceFlush</code></a> function to ensure that the data is immediately sent
to the device.</p>
<h3 class="function"><a id="papplGetRand">papplGetRand</a></h3>
<p class="description">Return a 32-bit pseudo-random number.</p>
<p class="code">
unsigned papplGetRand(void);</p>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Random number</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a 32-bit pseudo-random number suitable for use as
one-time identifiers or nonces.  On platforms that provide it, the random
numbers are generated (or seeded) using system entropy.</p>
<h3 class="function"><a id="papplGetTempDir">papplGetTempDir</a></h3>
<p class="description">Get the temporary directory.</p>
<p class="code">
const char *papplGetTempDir(void);</p>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Temporary directory</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function gets the current temporary directory.<br>
<br>
Note: On Windows, the path separators in the temporary directory are
converted to forward slashes as needed for consistency.</p>
<h3 class="function"><a id="papplJobCancel">papplJobCancel</a></h3>
<p class="description">Cancel a job.</p>
<p class="code">
void papplJobCancel(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function cancels the specified job.  If the job is currently being
printed, it will be stopped at a convenient time (usually the end of a page)
so that the printer will be left in a known state.</p>
<h3 class="function"><a id="papplJobCreatePrintOptions">papplJobCreatePrintOptions</a></h3>
<p class="description">Create the printer options for a job.</p>
<p class="code">
<a href="#pappl_pr_options_t">pappl_pr_options_t</a> *papplJobCreatePrintOptions(<a href="#pappl_job_t">pappl_job_t</a> *job, unsigned num_pages, bool color);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>num_pages</th>
<td class="description">Number of pages (<code>0</code> for unknown)</td></tr>
<tr><th>color</th>
<td class="description">Is the document in color?</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Job options data or <code>NULL</code> on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function allocates a printer options structure and computes the print
options for a job based upon the Job Template attributes submitted in the
print request and the default values set in the printer driver data.<br>
<br>
The &quot;num_pages&quot; and &quot;color&quot; arguments specify the number of pages and whether
the document contains non-grayscale colors - this information typically comes
from parsing the job file.</p>
<h3 class="function"><a id="papplJobCreateWithFile">papplJobCreateWithFile</a></h3>
<p class="description">Create a job with a local file.</p>
<p class="code">
<a href="#pappl_job_t">pappl_job_t</a> *papplJobCreateWithFile(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *username, const char *format, const char *job_name, int num_options, cups_option_t *options, const char *filename);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>username</th>
<td class="description">Submitting user name</td></tr>
<tr><th>format</th>
<td class="description">MIME media type of file</td></tr>
<tr><th>job_name</th>
<td class="description">Job name</td></tr>
<tr><th>num_options</th>
<td class="description">Number of options</td></tr>
<tr><th>options</th>
<td class="description">Options or <code>NULL</code> if none</td></tr>
<tr><th>filename</th>
<td class="description">File to print</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">New job object or <code>NULL</code> on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function creates a new print job with a local file.  The &quot;num_options&quot;
and &quot;options&quot; parameters specify additional print options, as needed.  The
file specified by &quot;filename&quot; is removed automatically if it resides in the
spool directory.</p>
<h3 class="function"><a id="papplJobDeletePrintOptions">papplJobDeletePrintOptions</a></h3>
<p class="description">Delete a job options structure.</p>
<p class="code">
void papplJobDeletePrintOptions(<a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>options</th>
<td class="description">Options</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function frees the memory used for a job options structure.</p>
<h3 class="function"><a id="papplJobFilterImage">papplJobFilterImage</a></h3>
<p class="description">Filter an image in memory.</p>
<p class="code">
bool papplJobFilterImage(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_device_t">pappl_device_t</a> *device, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, const unsigned char *pixels, int width, int height, int depth, int ppi, bool smoothing);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>device</th>
<td class="description">Device</td></tr>
<tr><th>options</th>
<td class="description">Print options</td></tr>
<tr><th>pixels</th>
<td class="description">Pointer to the top-left corner of the image data</td></tr>
<tr><th>width</th>
<td class="description">Width in columns</td></tr>
<tr><th>height</th>
<td class="description">Height in lines</td></tr>
<tr><th>depth</th>
<td class="description">Bytes per pixel (<code>1</code> for grayscale or <code>3</code> for sRGB)</td></tr>
<tr><th>ppi</th>
<td class="description">Pixels per inch (<code>0</code> for unknown)</td></tr>
<tr><th>smoothing</th>
<td class="description"><code>true</code> to smooth/interpolate the image, <code>false</code> for nearest-neighbor sampling</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function will print a grayscale or sRGB image using the printer's raster
driver interface, scaling and positioning the image as necessary based on
the job options, and printing as many copies as requested.<br>
<br>
The image data is an array of grayscale (&quot;depth&quot; = <code>1</code>) or sRGB
(&quot;depth&quot; = <code>3</code>) pixels starting at the top-left corner of the image.<br>
<br>
The image resolution (&quot;ppi&quot;) is expressed in pixels per inch and is used for
some &quot;print-scaling&quot; modes.  Pass <code>0</code> if the image has no explicit resolution
information.</p>
<h3 class="function"><a id="papplJobGetAttribute">papplJobGetAttribute</a></h3>
<p class="description">Get an attribute from a job.</p>
<p class="code">
ipp_attribute_t *papplJobGetAttribute(<a href="#pappl_job_t">pappl_job_t</a> *job, const char *name);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>name</th>
<td class="description">Attribute name</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Attribute or <code>NULL</code> if not found</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function gets the named IPP attribute from a job.  The returned
attribute can be examined using the <code>ippGetXxx</code> functions.</p>
<h3 class="function"><a id="papplJobGetData">papplJobGetData</a></h3>
<p class="description">Get per-job driver data.</p>
<p class="code">
void *papplJobGetData(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Per-job driver data or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the driver data associated with the job.  It is
normally only called from drivers to maintain state for the processing of
the job, for example to store bitmap compression information.</p>
<h3 class="function"><a id="papplJobGetFilename">papplJobGetFilename</a></h3>
<p class="description">Get the job's filename.</p>
<p class="code">
const char *papplJobGetFilename(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Filename or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the filename for the job's document data.</p>
<h3 class="function"><a id="papplJobGetFormat">papplJobGetFormat</a></h3>
<p class="description">Get the MIME media type for the job's file.</p>
<p class="code">
const char *papplJobGetFormat(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">MIME media type or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the MIME media type for the job's document data.</p>
<h3 class="function"><a id="papplJobGetID">papplJobGetID</a></h3>
<p class="description">Get the job ID value.</p>
<p class="code">
int papplJobGetID(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Job ID or <code>0</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the job's unique integer identifier.</p>
<h3 class="function"><a id="papplJobGetImpressions">papplJobGetImpressions</a></h3>
<p class="description">Get the number of impressions (sides) in the job.</p>
<p class="code">
int papplJobGetImpressions(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of impressions in job</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number of impressions in the job's document data.
An impression is one side of an output page.</p>
<h3 class="function"><a id="papplJobGetImpressionsCompleted">papplJobGetImpressionsCompleted</a></h3>
<p class="description">Get the number of completed impressions
                                      (sides) in the job.</p>
<p class="code">
int papplJobGetImpressionsCompleted(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of completed impressions in job</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number of impressions that have been printed.  An
impression is one side of an output page.</p>
<h3 class="function"><a id="papplJobGetMessage">papplJobGetMessage</a></h3>
<p class="description">Get the current job message string, if any.</p>
<p class="code">
const char *papplJobGetMessage(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Current &quot;job-state-message&quot; value or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current job message string, if any.</p>
<h3 class="function"><a id="papplJobGetName">papplJobGetName</a></h3>
<p class="description">Get the job name/title.</p>
<p class="code">
const char *papplJobGetName(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Job name/title or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the name or title of the job.</p>
<h3 class="function"><a id="papplJobGetPrinter">papplJobGetPrinter</a></h3>
<p class="description">Get the printer for the job.</p>
<p class="code">
<a href="#pappl_printer_t">pappl_printer_t</a> *papplJobGetPrinter(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Printer</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the printer containing the job.</p>
<h3 class="function"><a id="papplJobGetReasons">papplJobGetReasons</a></h3>
<p class="description">Get the current job state reasons.</p>
<p class="code">
<a href="#pappl_jreason_t">pappl_jreason_t</a> papplJobGetReasons(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP &quot;job-state-reasons&quot; bits</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current job state reasons bitfield.</p>
<h3 class="function"><a id="papplJobGetState">papplJobGetState</a></h3>
<p class="description">Get the current job state.</p>
<p class="code">
ipp_jstate_t papplJobGetState(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP &quot;job-state&quot; value</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current job processing state, which is represented
as an enumeration:

</p><ul>
<li><code>IPP_JSTATE_ABORTED</code>: Job has been aborted by the system due to an error.
</li>
<li><code>IPP_JSTATE_CANCELED</code>: Job has been canceled by a user.
</li>
<li><code>IPP_JSTATE_COMPLETED</code>: Job has finished printing.
</li>
<li><code>IPP_JSTATE_HELD</code>: Job is being held for some reason, typically because
  the document data is being received.
</li>
<li><code>IPP_JSTATE_PENDING</code>: Job is queued and waiting to be printed.
</li>
<li><code>IPP_JSTATE_PROCESSING</code>: Job is being printed.
</li>
<li><code>IPP_JSTATE_STOPPED</code>: Job is paused, typically when the printer is not
  ready.</li>
</ul>
<h3 class="function"><a id="papplJobGetTimeCompleted">papplJobGetTimeCompleted</a></h3>
<p class="description">Get the job completion time, if any.</p>
<p class="code">
time_t papplJobGetTimeCompleted(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Date/time when the job completed or <code>0</code> if not completed</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the date and time when the job reached the completed,
canceled, or aborted states.  <code>0</code> is returned if the job is not yet in one of
those states.</p>
<h3 class="function"><a id="papplJobGetTimeCreated">papplJobGetTimeCreated</a></h3>
<p class="description">Get the job creation time.</p>
<p class="code">
time_t papplJobGetTimeCreated(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Date/time when the job was created</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the date and time when the job was created.</p>
<h3 class="function"><a id="papplJobGetTimeProcessed">papplJobGetTimeProcessed</a></h3>
<p class="description">Get the job processing time.</p>
<p class="code">
time_t papplJobGetTimeProcessed(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Date/time when the job started processing (printing) or <code>0</code> if not yet processed</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the date and time when the job started processing
(printing).</p>
<h3 class="function"><a id="papplJobGetUsername">papplJobGetUsername</a></h3>
<p class="description">Get the name of the user that submitted the job.</p>
<p class="code">
const char *papplJobGetUsername(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Username or <code>NULL</code> for unknown</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the name of the user that submitted the job.</p>
<h3 class="function"><a id="papplJobHold">papplJobHold</a></h3>
<p class="description">Hold a job for printing.</p>
<p class="code">
bool papplJobHold(<a href="#pappl_job_t">pappl_job_t</a> *job, const char *username, const char *until, time_t until_time);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>username</th>
<td class="description">User that held the job or <code>NULL</code> for none/system</td></tr>
<tr><th>until</th>
<td class="description">&quot;job-hold-until&quot; keyword or <code>NULL</code></td></tr>
<tr><th>until_time</th>
<td class="description">&quot;job-hold-until-time&quot; value or 0 for indefinite</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function holds a pending job for printing at a later time.</p>
<h3 class="function"><a id="papplJobIsCanceled">papplJobIsCanceled</a></h3>
<p class="description">Return whether the job is canceled.</p>
<p class="code">
bool papplJobIsCanceled(<a href="#pappl_job_t">pappl_job_t</a> *job);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the job is canceled or aborted, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns <code>true</code> if the job has been canceled or aborted.</p>
<h3 class="function"><a id="papplJobOpenFile">papplJobOpenFile</a></h3>
<p class="description">Create or open a file for the document in a job.</p>
<p class="code">
int papplJobOpenFile(<a href="#pappl_job_t">pappl_job_t</a> *job, char *fname, size_t fnamesize, const char *directory, const char *ext, const char *mode);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>fname</th>
<td class="description">Filename buffer</td></tr>
<tr><th>fnamesize</th>
<td class="description">Size of filename buffer</td></tr>
<tr><th>directory</th>
<td class="description">Directory to store in (<code>NULL</code> for default)</td></tr>
<tr><th>ext</th>
<td class="description">Extension (<code>NULL</code> for default)</td></tr>
<tr><th>mode</th>
<td class="description">Open mode - &quot;r&quot; for reading or &quot;w&quot; for writing</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">File descriptor or -1 on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function creates or opens a file for a job.  The &quot;fname&quot; and &quot;fnamesize&quot;
arguments specify the location and size of a buffer to store the job
filename, which incorporates the &quot;directory&quot;, printer ID, job ID, job name
(title), and &quot;ext&quot; values.  The job name is &quot;sanitized&quot; to only contain
alphanumeric characters.<br>
<br>
The &quot;mode&quot; argument is &quot;r&quot; to read an existing job file or &quot;w&quot; to write a
new job file.  New files are created with restricted permissions for
security purposes.</p>
<h3 class="function"><a id="papplJobRelease">papplJobRelease</a></h3>
<p class="description">Release a job for printing.</p>
<p class="code">
bool papplJobRelease(<a href="#pappl_job_t">pappl_job_t</a> *job, const char *username);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>username</th>
<td class="description">User that released the job or <code>NULL</code> for none/system</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function releases a held job for printing.</p>
<h3 class="function"><a id="papplJobSetData">papplJobSetData</a></h3>
<p class="description">Set the per-job driver data pointer.</p>
<p class="code">
void papplJobSetData(<a href="#pappl_job_t">pappl_job_t</a> *job, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>data</th>
<td class="description">Data pointer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the driver data for the specified job.  It is
normally only called from drivers to maintain state for the processing of
the job, for example to store bitmap compression information.</p>
<h3 class="function"><a id="papplJobSetImpressions">papplJobSetImpressions</a></h3>
<p class="description">Set the number of impressions (sides) in a job.</p>
<p class="code">
void papplJobSetImpressions(<a href="#pappl_job_t">pappl_job_t</a> *job, int impressions);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>impressions</th>
<td class="description">Number of impressions/sides</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the number of impressions in a job.  An impression is one
side of an output page.</p>
<h3 class="function"><a id="papplJobSetImpressionsCompleted">papplJobSetImpressionsCompleted</a></h3>
<p class="description">Add completed impressions (sides) to
                                      the job.</p>
<p class="code">
void papplJobSetImpressionsCompleted(<a href="#pappl_job_t">pappl_job_t</a> *job, int add);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>add</th>
<td class="description">Number of impressions/sides to add</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function updates the number of completed impressions in a job.  An
impression is one side of an output page.</p>
<h3 class="function"><a id="papplJobSetMessage">papplJobSetMessage</a></h3>
<p class="description">Set the job message string.</p>
<p class="code">
void papplJobSetMessage(<a href="#pappl_job_t">pappl_job_t</a> *job, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>message</th>
<td class="description">Printf-style message string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the job message string using a <code>printf</code>-style format
string.<br>
<br>
</p><blockquote>
Note: The maximum length of the job message string is 1023 bytes.</blockquote>
<h3 class="function"><a id="papplJobSetReasons">papplJobSetReasons</a></h3>
<p class="description">Set the job state reasons bit values.</p>
<p class="code">
void papplJobSetReasons(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_jreason_t">pappl_jreason_t</a> add, <a href="#pappl_jreason_t">pappl_jreason_t</a> remove);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>add</th>
<td class="description">IPP &quot;job-state-reasons&quot; bit value(s) to add</td></tr>
<tr><th>remove</th>
<td class="description">IPP &quot;job-state-reasons&quot; bit value(s) to remove</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function updates the job state reasons bitfield.  The &quot;remove&quot; bits
are cleared first, then the &quot;add&quot; bits are set.</p>
<h3 class="function"><a id="papplLocFormatString">papplLocFormatString</a></h3>
<p class="description">Format a localized string into a buffer.</p>
<p class="code">
const char *papplLocFormatString(<a href="#pappl_loc_t">pappl_loc_t</a> *loc, char *buffer, size_t bufsize, const char *key, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>loc</th>
<td class="description">Localization data</td></tr>
<tr><th>buffer</th>
<td class="description">Output buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of output buffer</td></tr>
<tr><th>key</th>
<td class="description">Printf-style key string to localize</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Localized formatted string</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function formats a localized string into a buffer using the specified
localization data.  Numbers are formatted according to the locale and
language used.</p>
<h3 class="function"><a id="papplLocGetDefaultMediaSizeName">papplLocGetDefaultMediaSizeName</a></h3>
<p class="description">Get the default media size name
                                      associated with a locale.</p>
<p class="code">
const char *papplLocGetDefaultMediaSizeName(void);</p>
<h4 class="returnvalue">Return Value</h4>
<p class="description">PWG media size name</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the default PWG media size name corresponding to the
current locale.  Currently only &quot;na_letter_8.5x11in&quot; or &quot;iso_a4_210x297mm&quot;
are returned.</p>
<h3 class="function"><a id="papplLocGetString">papplLocGetString</a></h3>
<p class="description">Get a localized version of a key string.</p>
<p class="code">
const char *papplLocGetString(<a href="#pappl_loc_t">pappl_loc_t</a> *loc, const char *key);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>loc</th>
<td class="description">Localization data</td></tr>
<tr><th>key</th>
<td class="description">Key text</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Localized text string</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function looks up the specified key string in the localization data and
returns either the localized value or the original key string if no
localization is available.</p>
<h3 class="function"><a id="papplLog">papplLog</a></h3>
<p class="description">Log a message for the system.</p>
<p class="code">
void papplLog(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_loglevel_t">pappl_loglevel_t</a> level, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>level</th>
<td class="description">Log level</td></tr>
<tr><th>message</th>
<td class="description">Printf-style message string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a message to the system's log file.  The &quot;level&quot; argument
specifies the urgency of the message:

</p><ul>
<li><code>PAPPL_LOGLEVEL_DEBUG</code>: A debugging message.
</li>
<li><code>PAPPL_LOGLEVEL_ERROR</code>: An error message.
</li>
<li><code>PAPPL_LOGLEVEL_FATAL</code>: A fatal error message.
</li>
<li><code>PAPPL_LOGLEVEL_INFO</code>: An informational message.
</li>
<li><code>PAPPL_LOGLEVEL_WARN</code>: A warning message.</li>
</ul>
<p class="discussion">The &quot;message&quot; argument specifies a <code>printf</code>-style format string.  Values
logged using the &quot;%c&quot; and &quot;%s&quot; format specifiers are sanitized to not
contain control characters.</p>
<h3 class="function"><a id="papplLogClient">papplLogClient</a></h3>
<p class="description">Log a message for a client.</p>
<p class="code">
void papplLogClient(<a href="#pappl_client_t">pappl_client_t</a> *client, <a href="#pappl_loglevel_t">pappl_loglevel_t</a> level, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>client</th>
<td class="description">Client</td></tr>
<tr><th>level</th>
<td class="description">Log level</td></tr>
<tr><th>message</th>
<td class="description">Printf-style message string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a client message to the system's log file.  The &quot;level&quot;
argument specifies the urgency of the message:

</p><ul>
<li><code>PAPPL_LOGLEVEL_DEBUG</code>: A debugging message.
</li>
<li><code>PAPPL_LOGLEVEL_ERROR</code>: An error message.
</li>
<li><code>PAPPL_LOGLEVEL_FATAL</code>: A fatal error message.
</li>
<li><code>PAPPL_LOGLEVEL_INFO</code>: An informational message.
</li>
<li><code>PAPPL_LOGLEVEL_WARN</code>: A warning message.</li>
</ul>
<p class="discussion">The &quot;message&quot; argument specifies a <code>printf</code>-style format string.  Values
logged using the &quot;%c&quot; and &quot;%s&quot; format specifiers are sanitized to not
contain control characters.</p>
<h3 class="function"><a id="papplLogDevice">papplLogDevice</a></h3>
<p class="description">Log a device error for the system...</p>
<p class="code">
void papplLogDevice(const char *message, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>message</th>
<td class="description">Message</td></tr>
<tr><th>data</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a device error message to the system's log file.</p>
<h3 class="function"><a id="papplLogJob">papplLogJob</a></h3>
<p class="description">Log a message for a job.</p>
<p class="code">
void papplLogJob(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_loglevel_t">pappl_loglevel_t</a> level, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>job</th>
<td class="description">Job</td></tr>
<tr><th>level</th>
<td class="description">Log level</td></tr>
<tr><th>message</th>
<td class="description">Printf-style message string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a job message to the system's log file.  The &quot;level&quot;
argument specifies the urgency of the message:

</p><ul>
<li><code>PAPPL_LOGLEVEL_DEBUG</code>: A debugging message.
</li>
<li><code>PAPPL_LOGLEVEL_ERROR</code>: An error message.
</li>
<li><code>PAPPL_LOGLEVEL_FATAL</code>: A fatal error message.
</li>
<li><code>PAPPL_LOGLEVEL_INFO</code>: An informational message.
</li>
<li><code>PAPPL_LOGLEVEL_WARN</code>: A warning message.</li>
</ul>
<p class="discussion">The &quot;message&quot; argument specifies a <code>printf</code>-style format string.  Values
logged using the &quot;%c&quot; and &quot;%s&quot; format specifiers are sanitized to not
contain control characters.</p>
<h3 class="function"><a id="papplLogPrinter">papplLogPrinter</a></h3>
<p class="description">Log a message for a printer.</p>
<p class="code">
void papplLogPrinter(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_loglevel_t">pappl_loglevel_t</a> level, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>level</th>
<td class="description">Log level</td></tr>
<tr><th>message</th>
<td class="description">Printf-style message string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sends a printer message to the system's log file.  The &quot;level&quot;
argument specifies the urgency of the message:

</p><ul>
<li><code>PAPPL_LOGLEVEL_DEBUG</code>: A debugging message.
</li>
<li><code>PAPPL_LOGLEVEL_ERROR</code>: An error message.
</li>
<li><code>PAPPL_LOGLEVEL_FATAL</code>: A fatal error message.
</li>
<li><code>PAPPL_LOGLEVEL_INFO</code>: An informational message.
</li>
<li><code>PAPPL_LOGLEVEL_WARN</code>: A warning message.</li>
</ul>
<p class="discussion">The &quot;message&quot; argument specifies a <code>printf</code>-style format string.  Values
logged using the &quot;%c&quot; and &quot;%s&quot; format specifiers are sanitized to not
contain control characters.</p>
<h3 class="function"><a id="papplMainloop">papplMainloop</a></h3>
<p class="description">Run a standard main loop for printer applications.</p>
<p class="code">
int papplMainloop(int argc, char *argv[], const char *version, const char *footer_html, int num_drivers, <a href="#pappl_pr_driver_t">pappl_pr_driver_t</a> *drivers, <a href="#pappl_pr_autoadd_cb_t">pappl_pr_autoadd_cb_t</a> autoadd_cb, <a href="#pappl_pr_driver_cb_t">pappl_pr_driver_cb_t</a> driver_cb, const char *subcmd_name, <a href="#pappl_ml_subcmd_cb_t">pappl_ml_subcmd_cb_t</a> subcmd_cb, <a href="#pappl_ml_system_cb_t">pappl_ml_system_cb_t</a> system_cb, <a href="#pappl_ml_usage_cb_t">pappl_ml_usage_cb_t</a> usage_cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>argc</th>
<td class="description">Number of command line arguments</td></tr>
<tr><th>argv[]</th>
<td class="description">Command line arguments</td></tr>
<tr><th>version</th>
<td class="description">Version number</td></tr>
<tr><th>footer_html</th>
<td class="description">Footer HTML or <code>NULL</code> for none</td></tr>
<tr><th>num_drivers</th>
<td class="description">Number of drivers</td></tr>
<tr><th>drivers</th>
<td class="description">Drivers</td></tr>
<tr><th>autoadd_cb</th>
<td class="description">Auto-add callback or <code>NULL</code> for none</td></tr>
<tr><th>driver_cb</th>
<td class="description">Driver callback</td></tr>
<tr><th>subcmd_name</th>
<td class="description">Sub-command name or <code>NULL</code> for none</td></tr>
<tr><th>subcmd_cb</th>
<td class="description">Sub-command callback or <code>NULL</code> for none</td></tr>
<tr><th>system_cb</th>
<td class="description">System callback or <code>NULL</code> for default</td></tr>
<tr><th>usage_cb</th>
<td class="description">Usage callback or <code>NULL</code> for default</td></tr>
<tr><th>data</th>
<td class="description">Context pointer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Exit status</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function runs a standard main loop for a printer application.  The
&quot;argc&quot; and &quot;argv&quot; arguments are those provided to the <code>main</code> function.<br>
<br>
The &quot;version&quot; argument specifies a numeric version number for the printer
application that conforms to semantic versioning guidelines with up to four
numbers, for example &quot;1.2.3.4&quot;.<br>
<br>
The &quot;footer_html&quot; argument specifies HTML text to use in the footer of the
web interface.  If <code>NULL</code>, the footer is omitted.<br>
<br>
The &quot;num_drivers&quot;, &quot;drivers&quot;, and &quot;driver_cb&quot; arguments specify a list of
drivers and the driver callback for printers.  Specify <code>0</code> and <code>NULL</code> if
the drivers are configured in the system callback.  The &quot;autoadd_cb&quot;
argument specifies a callback for automatically adding new printers with the
&quot;autoadd&quot; sub-command and for auto-detecting the driver when adding manually.<br>
<br>
The &quot;usage_cb&quot; argument specifies a callback that displays a usage/help
summary.  If <code>NULL</code>, a generic summary is shown as needed.<br>
<br>
The &quot;subcmd_name&quot; and &quot;subcmd_cb&quot; arguments specify the name and a callback
for a custom sub-command.  If <code>NULL</code>, no custom sub-commands will be
supported.<br>
<br>
The &quot;system_cb&quot; argument specifies a function that will create a new
<code>pappl_system_t</code> object.  If <code>NULL</code>, a default system object is created.<br>
<br>
The &quot;data&quot; argument provides application-specific data for each of the
callbacks.</p>
<h3 class="function"><a id="papplMainloopShutdown">papplMainloopShutdown</a></h3>
<p class="description">Request a shutdown of a running system.</p>
<p class="code">
void papplMainloopShutdown(void);</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function requests that the system started by <a href="#papplMainloop"><code>papplMainloop</code></a> be
shutdown.</p>
<h3 class="function"><a id="papplPrinterAddLink">papplPrinterAddLink</a></h3>
<p class="description">Add a printer link to the navigation header.</p>
<p class="code">
void papplPrinterAddLink(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *label, const char *path_or_url, <a href="#pappl_loptions_t">pappl_loptions_t</a> options);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>label</th>
<td class="description">Label string</td></tr>
<tr><th>path_or_url</th>
<td class="description">Path or URL</td></tr>
<tr><th>options</th>
<td class="description">Link options</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a navigation link for a printer.  The &quot;path_or_url&quot;
argument specifies a absolute path such as &quot;/ipp/print/example/page&quot; or an
absolute URL such as &quot;https://www.example.com/&quot;.  The &quot;options&quot; argument
specifies where the link is shown and whether the link should redirect an
absolute path to the secure (&quot;https://.../path&quot;) web interface.</p>
<h3 class="function"><a id="papplPrinterCancelAllJobs">papplPrinterCancelAllJobs</a></h3>
<p class="description">Cancel all jobs on the printer.</p>
<p class="code">
void papplPrinterCancelAllJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function cancels all jobs on the printer.  If any job is currently being
printed, it will be stopped at a convenient time (usually the end of a page)
so that the printer will be left in a known state.</p>
<h3 class="function"><a id="papplPrinterCloseDevice">papplPrinterCloseDevice</a></h3>
<p class="description">Close the device associated with the printer.</p>
<p class="code">
void papplPrinterCloseDevice(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function closes the device for a printer.  The device must have been
previously opened using the <a href="#papplPrinterOpenDevice"><code>papplPrinterOpenDevice</code></a> function.</p>
<h3 class="function"><a id="papplPrinterCreate">papplPrinterCreate</a></h3>
<p class="description">Create a new printer.</p>
<p class="code">
<a href="#pappl_printer_t">pappl_printer_t</a> *papplPrinterCreate(<a href="#pappl_system_t">pappl_system_t</a> *system, int printer_id, const char *printer_name, const char *driver_name, const char *device_id, const char *device_uri);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>printer_id</th>
<td class="description">printer-id value or <code>0</code> for new</td></tr>
<tr><th>printer_name</th>
<td class="description">Human-readable printer name</td></tr>
<tr><th>driver_name</th>
<td class="description">Driver name</td></tr>
<tr><th>device_id</th>
<td class="description">IEEE-1284 device ID</td></tr>
<tr><th>device_uri</th>
<td class="description">Device URI</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Printer or <code>NULL</code> on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function creates a new printer (service) on the specified system.  The
&quot;type&quot; argument specifies the type of service to create and must currently
be the value <code>PAPPL_SERVICE_TYPE_PRINT</code>.<br>
<br>
The &quot;printer_id&quot; argument specifies a positive integer identifier that is
unique to the system.  If you specify a value of <code>0</code> a new identifier will
be assigned.<br>
<br>
The &quot;driver_name&quot; argument specifies a named driver for the printer, from
the list of drivers registered with the <a href="#papplSystemSetPrinterDrivers"><code>papplSystemSetPrinterDrivers</code></a>
function.<br>
<br>
The &quot;device_id&quot; and &quot;device_uri&quot; arguments specify the IEEE-1284 device ID
and device URI strings for the printer.<br>
<br>
On error, this function sets the <code>errno</code> variable to one of the following
values:

</p><ul>
<li><code>EEXIST</code>: A printer with the specified name already exists.
</li>
<li><code>EINVAL</code>: Bad values for the arguments were specified.
</li>
<li><code>EIO</code>: The driver callback failed.
</li>
<li><code>ENOENT</code>: No driver callback has been set.
</li>
<li><code>ENOMEM</code>: Ran out of memory.</li>
</ul>
<h3 class="function"><a id="papplPrinterDelete">papplPrinterDelete</a></h3>
<p class="description">Delete a printer.</p>
<p class="code">
void papplPrinterDelete(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function deletes a printer from a system, freeing all memory and
canceling all jobs as needed.</p>
<h3 class="function"><a id="papplPrinterDisable">papplPrinterDisable</a></h3>
<p class="description">Stop accepting jobs on a printer.</p>
<p class="code">
void papplPrinterDisable(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function stops accepting jobs on a printer.</p>
<h3 class="function"><a id="papplPrinterEnable">papplPrinterEnable</a></h3>
<p class="description">Start accepting jobs on a printer.</p>
<p class="code">
void papplPrinterEnable(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function starts accepting jobs on a printer.</p>
<h3 class="function"><a id="papplPrinterFindJob">papplPrinterFindJob</a></h3>
<p class="description">Find a job.</p>
<p class="code">
<a href="#pappl_job_t">pappl_job_t</a> *papplPrinterFindJob(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int job_id);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>job_id</th>
<td class="description">Job ID</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Job or <code>NULL</code> if not found</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function finds a job submitted to a printer using its integer ID value.</p>
<h3 class="function"><a id="papplPrinterGetContact">papplPrinterGetContact</a></h3>
<p class="description">Get the &quot;printer-contact&quot; value.</p>
<p class="code">
<a href="#pappl_contact_t">pappl_contact_t</a> *papplPrinterGetContact(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_contact_t">pappl_contact_t</a> *contact);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>contact</th>
<td class="description">Contact</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Contact</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current printer contact information to the buffer
pointed to by the &quot;contact&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetDNSSDName">papplPrinterGetDNSSDName</a></h3>
<p class="description">Get the current DNS-SD service name.</p>
<p class="code">
char *papplPrinterGetDNSSDName(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">DNS-SD service name or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current DNS-SD service name to the buffer pointed
to by the &quot;buffer&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetDeviceID">papplPrinterGetDeviceID</a></h3>
<p class="description">Get the IEEE-1284 device ID of the printer.</p>
<p class="code">
const char *papplPrinterGetDeviceID(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IEEE-1284 device ID string</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the IEEE-1284 device ID of the printer.</p>
<h3 class="function"><a id="papplPrinterGetDeviceURI">papplPrinterGetDeviceURI</a></h3>
<p class="description">Get the URI of the device associated with the
                               printer.</p>
<p class="code">
const char *papplPrinterGetDeviceURI(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Device URI string</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the device URI for the printer.</p>
<h3 class="function"><a id="papplPrinterGetDriverAttributes">papplPrinterGetDriverAttributes</a></h3>
<p class="description">Get a copy of the current driver
                                      attributes.</p>
<p class="code">
ipp_t *papplPrinterGetDriverAttributes(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Copy of driver attributes</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a copy the current driver attributes. Use the
<code>ippDelete</code> function to free the memory used for the attributes when you
are done.</p>
<h3 class="function"><a id="papplPrinterGetDriverData">papplPrinterGetDriverData</a></h3>
<p class="description">Get the current print driver data.</p>
<p class="code">
<a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a> *papplPrinterGetDriverData(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a> *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>data</th>
<td class="description">Pointer to driver data structure to fill</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Driver data or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current print driver data, defaults, and ready
(loaded) media information into the specified buffer.</p>
<h3 class="function"><a id="papplPrinterGetDriverName">papplPrinterGetDriverName</a></h3>
<p class="description">Get the driver name for a printer.</p>
<p class="code">
const char *papplPrinterGetDriverName(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Driver name or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the driver name for the printer.</p>
<h3 class="function"><a id="papplPrinterGetGeoLocation">papplPrinterGetGeoLocation</a></h3>
<p class="description">Get the current geo-location as a &quot;geo:&quot;
                                 URI.</p>
<p class="code">
char *papplPrinterGetGeoLocation(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;geo:&quot; URI or <code>NULL</code> for unknown</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the currently configured geographic location as a &quot;geo:&quot;
URI to the buffer pointed to by the &quot;buffer&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetID">papplPrinterGetID</a></h3>
<p class="description">Get the printer ID.</p>
<p class="code">
int papplPrinterGetID(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;printer-id&quot; value or <code>0</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the printer's unique positive integer identifier.</p>
<h3 class="function"><a id="papplPrinterGetImpressionsCompleted">papplPrinterGetImpressionsCompleted</a></h3>
<p class="description">Get the number of impressions
                                          (sides) that have been printed.</p>
<p class="code">
int papplPrinterGetImpressionsCompleted(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of printed impressions/sides</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number of impressions that have been printed.  An
impression is one side of an output page.</p>
<h3 class="function"><a id="papplPrinterGetLocation">papplPrinterGetLocation</a></h3>
<p class="description">Get the location string.</p>
<p class="code">
char *papplPrinterGetLocation(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Location or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the printer's human-readable location to the buffer
pointed to by the &quot;buffer&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetMaxActiveJobs">papplPrinterGetMaxActiveJobs</a></h3>
<p class="description">Get the maximum number of active (queued)
                                   jobs allowed by the printer.</p>
<p class="code">
int papplPrinterGetMaxActiveJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum number of active jobs, <code>0</code> for unlimited</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the maximum number of active jobs that the printer
supports, as configured by the <a href="#papplPrinterSetMaxActiveJobs"><code>papplPrinterSetMaxActiveJobs</code></a> function.</p>
<h3 class="function"><a id="papplPrinterGetMaxCompletedJobs">papplPrinterGetMaxCompletedJobs</a></h3>
<p class="description">Get the maximum number of jobs retained
                                      for history by the printer.</p>
<p class="code">
int papplPrinterGetMaxCompletedJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum number of completed jobs, <code>0</code> for unlimited</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the maximum number of jobs that are retained in the
job history as configured by the <a href="#papplPrinterSetMaxCompletedJobs"><code>papplPrinterSetMaxCompletedJobs</code></a>
function.</p>
<h3 class="function"><a id="papplPrinterGetMaxPreservedJobs">papplPrinterGetMaxPreservedJobs</a></h3>
<p class="description">Get the maximum number of jobs
                                      preserved by the printer.</p>
<p class="code">
int papplPrinterGetMaxPreservedJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum number of preserved jobs, <code>0</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the maximum number of jobs that are retained (including
document data) in the job history as configured by the
<a href="#papplPrinterSetMaxPreservedJobs"><code>papplPrinterSetMaxPreservedJobs</code></a> function.</p>
<h3 class="function"><a id="papplPrinterGetName">papplPrinterGetName</a></h3>
<p class="description">Get the printer name.</p>
<p class="code">
const char *papplPrinterGetName(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Printer name</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the printer's human-readable name.</p>
<h3 class="function"><a id="papplPrinterGetNextJobID">papplPrinterGetNextJobID</a></h3>
<p class="description">Get the next job ID.</p>
<p class="code">
int papplPrinterGetNextJobID(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Next job ID or <code>0</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the positive integer identifier that will be used for
the next job that is created.</p>
<h3 class="function"><a id="papplPrinterGetNumberOfActiveJobs">papplPrinterGetNumberOfActiveJobs</a></h3>
<p class="description">Get the number of active print jobs.</p>
<p class="code">
int papplPrinterGetNumberOfActiveJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of active print jobs</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number of print jobs that are either printing or
waiting to be printed.</p>
<h3 class="function"><a id="papplPrinterGetNumberOfCompletedJobs">papplPrinterGetNumberOfCompletedJobs</a></h3>
<p class="description">Get the number of completed print
                                           jobs.</p>
<p class="code">
int papplPrinterGetNumberOfCompletedJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of completed print jobs</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number of print jobs that have been aborted,
canceled, or completed.</p>
<h3 class="function"><a id="papplPrinterGetNumberOfJobs">papplPrinterGetNumberOfJobs</a></h3>
<p class="description">Get the total number of print jobs.</p>
<p class="code">
int papplPrinterGetNumberOfJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Total number of print jobs</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the number of print jobs that are printing, waiting
to be printed, have been aborted, have been canceled, or have completed.</p>
<h3 class="function"><a id="papplPrinterGetOrganization">papplPrinterGetOrganization</a></h3>
<p class="description">Get the organization name.</p>
<p class="code">
char *papplPrinterGetOrganization(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Organization name or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the printer's organization name to the buffer pointed
to by the &quot;buffer&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetOrganizationalUnit">papplPrinterGetOrganizationalUnit</a></h3>
<p class="description">Get the organizational unit name.</p>
<p class="code">
char *papplPrinterGetOrganizationalUnit(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Organizational unit name or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the printer's organizational unit name to the buffer
pointed to by the &quot;buffer&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetPath">papplPrinterGetPath</a></h3>
<p class="description">Get the URL path for a printer web page.</p>
<p class="code">
char *papplPrinterGetPath(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *subpath, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>subpath</th>
<td class="description">Sub-path or <code>NULL</code> for none</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">URI path or <code>NULL</code> on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function generates and returns the URL path for the printer's web page.
The &quot;subpath&quot; argument specifies an optional sub-path for a specific printer
web page.</p>
<h3 class="function"><a id="papplPrinterGetPrintGroup">papplPrinterGetPrintGroup</a></h3>
<p class="description">Get the print authorization group, if any.</p>
<p class="code">
char *papplPrinterGetPrintGroup(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Print authorization group name or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the printer's authorization group name to the buffer
pointed to by the &quot;buffer&quot; argument.</p>
<h3 class="function"><a id="papplPrinterGetReasons">papplPrinterGetReasons</a></h3>
<p class="description">Get the current &quot;printer-state-reasons&quot; bit values.</p>
<p class="code">
<a href="#pappl_preason_t">pappl_preason_t</a> papplPrinterGetReasons(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;printer-state-reasons&quot; bit values</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current printer state reasons bitfield, which can
be updated by the printer driver and/or by the <a href="#papplPrinterSetReasons"><code>papplPrinterSetReasons</code></a>
function.</p>
<h3 class="function"><a id="papplPrinterGetState">papplPrinterGetState</a></h3>
<p class="description">Get the current &quot;printer-state&quot; value.</p>
<p class="code">
ipp_pstate_t papplPrinterGetState(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;printer-state&quot; value</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current printer state as an enumeration:

</p><ul>
<li><code>IPP_PSTATE_IDLE</code>: The printer is idle and has no jobs to process.
</li>
<li><code>IPP_PSTATE_PROCESSING</code>: The printer is processing a job and/or producing
  output.
</li>
<li><code>IPP_PSTATE_STOPPED</code>: The printer is stopped for maintenance.</li>
</ul>
<h3 class="function"><a id="papplPrinterGetSupplies">papplPrinterGetSupplies</a></h3>
<p class="description">Get the current &quot;printer-supplies&quot; values.</p>
<p class="code">
int papplPrinterGetSupplies(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int max_supplies, <a href="#pappl_supply_t">pappl_supply_t</a> *supplies);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>max_supplies</th>
<td class="description">Maximum number of supplies</td></tr>
<tr><th>supplies</th>
<td class="description">Array for supplies</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of values</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current printer supply values to the specified
array.  The &quot;max_supplies&quot; and &quot;supplies&quot; arguments can be <code>0</code> and <code>NULL</code>
to query the number of supplies used.<br>
<br>
The return value is the actual number of supplies used by the printer,
regardless of the size of the array.</p>
<h3 class="function"><a id="papplPrinterGetSystem">papplPrinterGetSystem</a></h3>
<p class="description">Get the system associated with the printer.</p>
<p class="code">
<a href="#pappl_system_t">pappl_system_t</a> *papplPrinterGetSystem(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">System</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a pointer to the system object that contains the
printer.</p>
<h3 class="function"><a id="papplPrinterHoldNewJobs">papplPrinterHoldNewJobs</a></h3>
<p class="description">Hold new jobs for printing.</p>
<p class="code">
bool papplPrinterHoldNewJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function holds any new jobs for printing and is typically used prior to
performing printer maintenance.  Existing jobs will finish printing but new
jobs will be held until you call <a href="#papplPrinterReleaseHeldNewJobs"><code>papplPrinterReleaseHeldNewJobs</code></a>.</p>
<h3 class="function"><a id="papplPrinterIsAcceptingJobs">papplPrinterIsAcceptingJobs</a></h3>
<p class="description">Return whether the printer is accepting jobs.</p>
<p class="code">
bool papplPrinterIsAcceptingJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the printer is accepting jobs, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a boolean value indicating whether a printer is
accepting jobs.</p>
<h3 class="function"><a id="papplPrinterIsDeleted">papplPrinterIsDeleted</a></h3>
<p class="description">Return whether a printer is in the process of being deleted.</p>
<p class="code">
bool papplPrinterIsDeleted(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> is printer is being deleted, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a boolean value indicating whether a printer is being
deleted.</p>
<h3 class="function"><a id="papplPrinterIsHoldingNewJobs">papplPrinterIsHoldingNewJobs</a></h3>
<p class="description">Return whether the printer is holding new jobs.</p>
<p class="code">
bool papplPrinterIsHoldingNewJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the printer is holding new jobs, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a boolean value indicating whether a printer is
holding new jobs.</p>
<h3 class="function"><a id="papplPrinterIterateActiveJobs">papplPrinterIterateActiveJobs</a></h3>
<p class="description">Iterate over the active jobs.</p>
<p class="code">
void papplPrinterIterateActiveJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_job_cb_t">pappl_job_cb_t</a> cb, void *data, int job_index, int limit);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
<tr><th>job_index</th>
<td class="description">First job to iterate (1-based)</td></tr>
<tr><th>limit</th>
<td class="description">Maximum jobs to iterate or <code>0</code> for no limit</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function iterates over jobs that are either printing or waiting to be
printed.  The specified callback &quot;cb&quot; will be called once per job with the
data pointer &quot;data&quot;.<br>
<br>
The &quot;job_index&quot; argument specifies the first job in the list to iterate,
where <code>1</code> is the first job, etc.  The &quot;limit&quot; argument specifies the maximum
number of jobs to iterate - use <code>0</code> to iterate an unlimited number of jobs.</p>
<h3 class="function"><a id="papplPrinterIterateAllJobs">papplPrinterIterateAllJobs</a></h3>
<p class="description">Iterate over all the jobs.</p>
<p class="code">
void papplPrinterIterateAllJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_job_cb_t">pappl_job_cb_t</a> cb, void *data, int job_index, int limit);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
<tr><th>job_index</th>
<td class="description">First job to iterate (1-based)</td></tr>
<tr><th>limit</th>
<td class="description">Maximum jobs to iterate, <code>0</code> for no limit</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function iterates over all jobs.  The specified callback &quot;cb&quot; will be
called once per job with the data pointer &quot;data&quot;.<br>
<br>
The &quot;job_index&quot; argument specifies the first job in the list to iterate,
where <code>1</code> is the first job, etc.  The &quot;limit&quot; argument specifies the maximum
number of jobs to iterate - use <code>0</code> to iterate an unlimited number of jobs.</p>
<h3 class="function"><a id="papplPrinterIterateCompletedJobs">papplPrinterIterateCompletedJobs</a></h3>
<p class="description">Iterate over the completed jobs.</p>
<p class="code">
void papplPrinterIterateCompletedJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_job_cb_t">pappl_job_cb_t</a> cb, void *data, int job_index, int limit);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
<tr><th>job_index</th>
<td class="description">First job to iterate (1-based)</td></tr>
<tr><th>limit</th>
<td class="description">Maximum jobs to iterate, <code>0</code> for no limit</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function iterates over jobs that are aborted, canceled, or completed.
The specified callback &quot;cb&quot; will be called once per job with the data pointer
&quot;data&quot;.<br>
<br>
The &quot;job_index&quot; argument specifies the first job in the list to iterate,
where <code>1</code> is the first job, etc.  The &quot;limit&quot; argument specifies the maximum
number of jobs to iterate - use <code>0</code> to iterate an unlimited number of jobs.</p>
<h3 class="function"><a id="papplPrinterOpenDevice">papplPrinterOpenDevice</a></h3>
<p class="description">Open the device associated with a printer.</p>
<p class="code">
<a href="#pappl_device_t">pappl_device_t</a> *papplPrinterOpenDevice(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Device or <code>NULL</code> if not possible</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function opens the printer's device.  <code>NULL</code> is returned if the device
is already in use, for example while a job is being printed.<br>
<br>
The returned device must be closed using the <a href="#papplPrinterCloseDevice"><code>papplPrinterCloseDevice</code></a>
function.</p>
<h3 class="function"><a id="papplPrinterOpenFile">papplPrinterOpenFile</a></h3>
<p class="description">Create or open a file for a printer.</p>
<p class="code">
int papplPrinterOpenFile(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *fname, size_t fnamesize, const char *directory, const char *resname, const char *ext, const char *mode);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>fname</th>
<td class="description">Filename buffer</td></tr>
<tr><th>fnamesize</th>
<td class="description">Size of filename buffer</td></tr>
<tr><th>directory</th>
<td class="description">Directory to store in (<code>NULL</code> for default)</td></tr>
<tr><th>resname</th>
<td class="description">Resource name</td></tr>
<tr><th>ext</th>
<td class="description">Extension (<code>NULL</code> for none)</td></tr>
<tr><th>mode</th>
<td class="description">Open mode - &quot;r&quot; for reading or &quot;w&quot; for writing</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">File descriptor or -1 on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function creates, opens, or removes a file for a printer.  The &quot;fname&quot;
and &quot;fnamesize&quot; arguments specify the location and size of a buffer to store
the printer filename, which incorporates the &quot;directory&quot;, printer ID,
resource name, and &quot;ext&quot; values.  The resource name is &quot;sanitized&quot; to only
contain alphanumeric characters.<br>
<br>
The &quot;mode&quot; argument is &quot;r&quot; to read an existing printer file, &quot;w&quot; to write a
new printer file, or &quot;x&quot; to remove an exitsing printer file.  New files are
created with restricted permissions for security purposes.<br>
<br>
For the &quot;r&quot; and &quot;w&quot; modes, the return value is the file descriptor number on
success or <code>-1</code> on error.  For the &quot;x&quot; mode, the return value is <code>0</code> on
success and <code>-1</code> on error.  The <code>errno</code> variable is set appropriately on
error.</p>
<h3 class="function"><a id="papplPrinterPause">papplPrinterPause</a></h3>
<p class="description">Pause (stop) a printer.</p>
<p class="code">
void papplPrinterPause(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function pauses a printer.  If the printer is currently processing
(printing) a job, it will be completed before the printer is stopped.</p>
<h3 class="function"><a id="papplPrinterReleaseHeldNewJobs">papplPrinterReleaseHeldNewJobs</a></h3>
<p class="description">Release any previously held jobs for printing.</p>
<p class="code">
bool papplPrinterReleaseHeldNewJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *username);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>username</th>
<td class="description">User that released the held jobs or <code>NULL</code> for none/system</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function releases all jobs that were previously held due to a prior
call to <a href="#papplPrinterHoldNewJobs"><code>papplPrinterHoldNewJobs</code></a>.</p>
<h3 class="function"><a id="papplPrinterRemoveLink">papplPrinterRemoveLink</a></h3>
<p class="description">Remove a printer link from the navigation header.</p>
<p class="code">
void papplPrinterRemoveLink(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *label);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>label</th>
<td class="description">Label string</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function removes the named link for the printer.</p>
<h3 class="function"><a id="papplPrinterResume">papplPrinterResume</a></h3>
<p class="description">Resume (start) a printer.</p>
<p class="code">
void papplPrinterResume(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function resumes a printer and starts processing any pending jobs.</p>
<h3 class="function"><a id="papplPrinterSetContact">papplPrinterSetContact</a></h3>
<p class="description">Set the &quot;printer-contact&quot; value.</p>
<p class="code">
void papplPrinterSetContact(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_contact_t">pappl_contact_t</a> *contact);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>contact</th>
<td class="description">Contact</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's contact information.</p>
<h3 class="function"><a id="papplPrinterSetDNSSDName">papplPrinterSetDNSSDName</a></h3>
<p class="description">Set the DNS-SD service name.</p>
<p class="code">
void papplPrinterSetDNSSDName(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>value</th>
<td class="description">DNS-SD service name or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's DNS-SD service name.  If <code>NULL</code>, the printer
will stop advertising the printer.</p>
<h3 class="function"><a id="papplPrinterSetDriverData">papplPrinterSetDriverData</a></h3>
<p class="description">Set the driver data.</p>
<p class="code">
bool papplPrinterSetDriverData(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a> *data, ipp_t *attrs);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>data</th>
<td class="description">Driver data</td></tr>
<tr><th>attrs</th>
<td class="description">Additional capability attributes or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function validates and sets the driver data, including all defaults and
ready (loaded) media.<br>
<br>
</p><blockquote>
Note: This function regenerates all of the driver-specific capability
attributes like &quot;media-col-database&quot;, &quot;sides-supported&quot;, and so forth.
Use the <a href="#papplPrinterSetDriverDefaults"><code>papplPrinterSetDriverDefaults</code></a> or
<a href="#papplPrinterSetReadyMedia"><code>papplPrinterSetReadyMedia</code></a> functions to efficiently change the
&quot;xxx-default&quot; or &quot;xxx-ready&quot; values, respectively.</blockquote>
<h3 class="function"><a id="papplPrinterSetDriverDefaults">papplPrinterSetDriverDefaults</a></h3>
<p class="description">Set the default print option values.</p>
<p class="code">
bool papplPrinterSetDriverDefaults(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a> *data, int num_vendor, cups_option_t *vendor);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>data</th>
<td class="description">Driver data</td></tr>
<tr><th>num_vendor</th>
<td class="description">Number of vendor options</td></tr>
<tr><th>vendor</th>
<td class="description">Vendor options</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success or <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function validates and sets the printer's default print options.<br>
<br>
</p><blockquote>
Note: Unlike <a href="#papplPrinterSetPrintDriverData"><code>papplPrinterSetPrintDriverData</code></a>, this function only
changes the &quot;xxx_default&quot; members of the driver data and is considered
lightweight.</blockquote>
<h3 class="function"><a id="papplPrinterSetGeoLocation">papplPrinterSetGeoLocation</a></h3>
<p class="description">Set the geo-location value as a &quot;geo:&quot; URI.</p>
<p class="code">
void papplPrinterSetGeoLocation(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>value</th>
<td class="description">&quot;geo:&quot; URI or <code>NULL</code> for unknown</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's geographic location as a &quot;geo:&quot; URI.  If
<code>NULL</code>, the location is cleared to the 'unknown' value.</p>
<h3 class="function"><a id="papplPrinterSetImpressionsCompleted">papplPrinterSetImpressionsCompleted</a></h3>
<p class="description">Add impressions (sides) to the
                                          total count of printed impressions.</p>
<p class="code">
void papplPrinterSetImpressionsCompleted(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int add);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>add</th>
<td class="description">Number of impressions/sides to add</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds to the printer's impressions counter.  An impression is
one side of an output page.</p>
<h3 class="function"><a id="papplPrinterSetLocation">papplPrinterSetLocation</a></h3>
<p class="description">Set the location string.</p>
<p class="code">
void papplPrinterSetLocation(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>value</th>
<td class="description">Location (&quot;Bob's Office&quot;, etc.) or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's human-readable location string.  If <code>NULL</code>,
the location is cleared.</p>
<h3 class="function"><a id="papplPrinterSetMaxActiveJobs">papplPrinterSetMaxActiveJobs</a></h3>
<p class="description">Set the maximum number of active jobs for
                                   the printer.</p>
<p class="code">
void papplPrinterSetMaxActiveJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int max_active_jobs);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>max_active_jobs</th>
<td class="description">Maximum number of active jobs, <code>0</code> for unlimited</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the maximum number of jobs that can be spooled on the
printer at one time.<br>
<br>
</p><blockquote>
Note: This limit does not apply to streaming raster formats such as PWG
Raster since they are not spooled.</blockquote>
<h3 class="function"><a id="papplPrinterSetMaxCompletedJobs">papplPrinterSetMaxCompletedJobs</a></h3>
<p class="description">Set the maximum number of completed
                                      jobs for the printer.</p>
<p class="code">
void papplPrinterSetMaxCompletedJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int max_completed_jobs);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>max_completed_jobs</th>
<td class="description">Maximum number of completed jobs, <code>0</code> for unlimited</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the maximum number of aborted, canceled, or completed jobs
that are retained in the job history.</p>
<h3 class="function"><a id="papplPrinterSetMaxPreservedJobs">papplPrinterSetMaxPreservedJobs</a></h3>
<p class="description">Set the maximum number of preserved
                                      jobs for the printer.</p>
<p class="code">
void papplPrinterSetMaxPreservedJobs(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int max_preserved_jobs);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>max_preserved_jobs</th>
<td class="description">Maximum number of preserved jobs, <code>0</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the maximum number of aborted, canceled, or completed jobs
that are preserved (with document data) in the job history.</p>
<h3 class="function"><a id="papplPrinterSetNextJobID">papplPrinterSetNextJobID</a></h3>
<p class="description">Set the next &quot;job-id&quot; value.</p>
<p class="code">
void papplPrinterSetNextJobID(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int next_job_id);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>next_job_id</th>
<td class="description">Next &quot;job-id&quot; value</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the next unique positive integer identifier that will be
used for a job.<br>
<br>
</p><blockquote>
Note: This function is normally only called once to restore the previous
state of the printer.</blockquote>
<h3 class="function"><a id="papplPrinterSetOrganization">papplPrinterSetOrganization</a></h3>
<p class="description">Set the organization name.</p>
<p class="code">
void papplPrinterSetOrganization(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>value</th>
<td class="description">Organization name or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's organization name.  If <code>NULL</code> the value is
cleared.</p>
<h3 class="function"><a id="papplPrinterSetOrganizationalUnit">papplPrinterSetOrganizationalUnit</a></h3>
<p class="description">Set the organizational unit name.</p>
<p class="code">
void papplPrinterSetOrganizationalUnit(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>value</th>
<td class="description">Organizational unit name or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's organizational unit name.  If <code>NULL</code> the
value is cleared.</p>
<h3 class="function"><a id="papplPrinterSetPrintGroup">papplPrinterSetPrintGroup</a></h3>
<p class="description">Set the print authorization group, if any.</p>
<p class="code">
void papplPrinterSetPrintGroup(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>value</th>
<td class="description">Print authorization group or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the printer's authorization group.  If <code>NULL</code>, the group
is cleared.<br>
<br>
</p><blockquote>
Note: The authorization group is only used if the system is created with a
named authorization service.</blockquote>
<h3 class="function"><a id="papplPrinterSetReadyMedia">papplPrinterSetReadyMedia</a></h3>
<p class="description">Set the ready (loaded) media.</p>
<p class="code">
bool papplPrinterSetReadyMedia(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int num_ready, <a href="#pappl_media_col_t">pappl_media_col_t</a> *ready);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>num_ready</th>
<td class="description">Number of ready media</td></tr>
<tr><th>ready</th>
<td class="description">Array of ready media</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success or <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function validates and sets the printer's ready (loaded) media.</p>
<h3 class="function"><a id="papplPrinterSetReasons">papplPrinterSetReasons</a></h3>
<p class="description">Add or remove values from
                             &quot;printer-state-reasons&quot;.</p>
<p class="code">
void papplPrinterSetReasons(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_preason_t">pappl_preason_t</a> add, <a href="#pappl_preason_t">pappl_preason_t</a> remove);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>add</th>
<td class="description">&quot;printer-state-reasons&quot; bit values to add or <code>PAPPL_PREASON_NONE</code> for none</td></tr>
<tr><th>remove</th>
<td class="description">&quot;printer-state-reasons&quot; bit values to remove or <code>PAPPL_PREASON_NONE</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function updates the printer state reasons bitfield by clearing any bit
values in the &quot;remove&quot; argument and setting any bit values in the &quot;add&quot;
argument.</p>
<h3 class="function"><a id="papplPrinterSetSupplies">papplPrinterSetSupplies</a></h3>
<p class="description">Set/update the supplies for a printer.</p>
<p class="code">
void papplPrinterSetSupplies(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, int num_supplies, <a href="#pappl_supply_t">pappl_supply_t</a> *supplies);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>num_supplies</th>
<td class="description">Number of supplies</td></tr>
<tr><th>supplies</th>
<td class="description">Array of supplies</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function updates the supply information for the printer.</p>
<h3 class="function"><a id="papplPrinterSetUSB">papplPrinterSetUSB</a></h3>
<p class="description">Set the USB vendor and product IDs for a printer.</p>
<p class="code">
void papplPrinterSetUSB(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, unsigned vendor_id, unsigned product_id, <a href="#pappl_uoptions_t">pappl_uoptions_t</a> options, const char *storagefile, <a href="#pappl_pr_usb_cb_t">pappl_pr_usb_cb_t</a> usb_cb, void *usb_cbdata);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>printer</th>
<td class="description">Printer</td></tr>
<tr><th>vendor_id</th>
<td class="description">USB vendor ID</td></tr>
<tr><th>product_id</th>
<td class="description">USB product ID</td></tr>
<tr><th>options</th>
<td class="description">USB gadget options</td></tr>
<tr><th>storagefile</th>
<td class="description">USB storage file, if any</td></tr>
<tr><th>usb_cb</th>
<td class="description">USB processing callback, if any</td></tr>
<tr><th>usb_cbdata</th>
<td class="description">USB processing callback data, if any</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the USB vendor and product IDs for a printer as well as
specifying USB gadget options when the printer is registered with the USB
device controller.<br>
<br>
The <code>usb_cb</code> argument specifies a processing callback that is called for
every byte of data sent from the USB host and which is responsible for
interpreting the data, writing data to the device, and handling back-channel
data.<br>
<br>
</p><blockquote>
Note: USB gadget functionality is currently only available when running
on Linux with compatible hardware such as the Raspberry Pi Zero and 4B.</blockquote>
<h3 class="function"><a id="papplSubscriptionCancel">papplSubscriptionCancel</a></h3>
<p class="description">Cancel a subscription.</p>
<p class="code">
void papplSubscriptionCancel(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function cancels a subscription.</p>
<h3 class="function"><a id="papplSubscriptionCreate">papplSubscriptionCreate</a></h3>
<p class="description">Create a subscription.</p>
<p class="code">
<a href="#pappl_subscription_t">pappl_subscription_t</a> *papplSubscriptionCreate(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_job_t">pappl_job_t</a> *job, int sub_id, <a href="#pappl_event_t">pappl_event_t</a> events, const char *username, const char *language, const void *data, size_t datalen, int interval, int lease);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>printer</th>
<td class="description">Printer, if any</td></tr>
<tr><th>job</th>
<td class="description">Job, if any</td></tr>
<tr><th>sub_id</th>
<td class="description">Subscription ID or <code>0</code> for new</td></tr>
<tr><th>events</th>
<td class="description">Notification events</td></tr>
<tr><th>username</th>
<td class="description">Owner</td></tr>
<tr><th>language</th>
<td class="description">Language</td></tr>
<tr><th>data</th>
<td class="description">User data, if any</td></tr>
<tr><th>datalen</th>
<td class="description">Length of user data</td></tr>
<tr><th>interval</th>
<td class="description">Notification interval</td></tr>
<tr><th>lease</th>
<td class="description">Lease duration or <code>0</code> for unlimited</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Subscription</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function creates a new system, printer, or job event subscription.</p>
<h3 class="function"><a id="papplSubscriptionGetEvents">papplSubscriptionGetEvents</a></h3>
<p class="description">Return a subcription's events.</p>
<p class="code">
<a href="#pappl_event_t">pappl_event_t</a> papplSubscriptionGetEvents(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">IPP &quot;notify-events&quot; bit field</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a subscription's events.</p>
<h3 class="function"><a id="papplSubscriptionGetID">papplSubscriptionGetID</a></h3>
<p class="description">Return a subcription's numeric identifier.</p>
<p class="code">
int papplSubscriptionGetID(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Subscription ID</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a subscription's numeric identifier.</p>
<h3 class="function"><a id="papplSubscriptionGetJob">papplSubscriptionGetJob</a></h3>
<p class="description">Return a subcription's associated job, if any.</p>
<p class="code">
<a href="#pappl_job_t">pappl_job_t</a> *papplSubscriptionGetJob(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Job or <code>NULL</code> if not a job subscription</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a subscription's associated job, if any.</p>
<h3 class="function"><a id="papplSubscriptionGetPrinter">papplSubscriptionGetPrinter</a></h3>
<p class="description">Return a subcription's associated printer, if any.</p>
<p class="code">
<a href="#pappl_printer_t">pappl_printer_t</a> *papplSubscriptionGetPrinter(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Printer or <code>NULL</code> if not a printer subscription</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a subscription's associated printer, if any.</p>
<h3 class="function"><a id="papplSubscriptionGetUsername">papplSubscriptionGetUsername</a></h3>
<p class="description">Return a subcription's owner.</p>
<p class="code">
const char *papplSubscriptionGetUsername(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Owner</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns a subscription's owner.</p>
<h3 class="function"><a id="papplSubscriptionRenew">papplSubscriptionRenew</a></h3>
<p class="description">Renew a subscription.</p>
<p class="code">
void papplSubscriptionRenew(<a href="#pappl_subscription_t">pappl_subscription_t</a> *sub, int lease);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>sub</th>
<td class="description">Subscription</td></tr>
<tr><th>lease</th>
<td class="description">Lease duration in seconds (<code>0</code> for indefinite)</td></tr>
</tbody></table>
<h3 class="function"><a id="papplSystemAddEvent">papplSystemAddEvent</a></h3>
<p class="description">Add a notification event.</p>
<p class="code">
void papplSystemAddEvent(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_event_t">pappl_event_t</a> event, const char *message, ...);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>printer</th>
<td class="description">Associated printer, if any</td></tr>
<tr><th>job</th>
<td class="description">Associated job, if any</td></tr>
<tr><th>event</th>
<td class="description">IPP &quot;notify-events&quot; bit value</td></tr>
<tr><th>message</th>
<td class="description">printf-style message string</td></tr>
<tr><th>...</th>
<td class="description">Additional arguments as needed</td></tr>
</tbody></table>
<h3 class="function"><a id="papplSystemAddLink">papplSystemAddLink</a></h3>
<p class="description">Add a link to the navigation header.</p>
<p class="code">
void papplSystemAddLink(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *label, const char *path_or_url, <a href="#pappl_loptions_t">pappl_loptions_t</a> options);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>label</th>
<td class="description">Label string</td></tr>
<tr><th>path_or_url</th>
<td class="description">Path or URL</td></tr>
<tr><th>options</th>
<td class="description">Link options</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a navigation link for the system.  The &quot;path_or_url&quot;
argument specifies a absolute path such as &quot;/page&quot; or an absolute URL such
as &quot;https://www.example.com/&quot;.  The &quot;options&quot; argument specifies where the
link is shown and whether the link should redirect an absolute path to the
secure (&quot;https://.../path&quot;) web interface.</p>
<h3 class="function"><a id="papplSystemAddListeners">papplSystemAddListeners</a></h3>
<p class="description">Add network or domain socket listeners.</p>
<p class="code">
bool papplSystemAddListeners(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *name);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>name</th>
<td class="description">Hostname, domain socket filename, or <code>NULL</code></td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds socket listeners.  The &quot;name&quot; parameter specifies the
listener address.  Names starting with a slash (/) specify a UNIX domain
socket path, otherwise the name is treated as a fully-qualified domain name
or numeric IPv4 or IPv6 address.  If name is <code>NULL</code>, the &quot;any&quot; addresses are
used (&quot;0.0.0.0&quot; and &quot;[::]&quot;).<br>
<br>
Listeners cannot be added after <a href="#papplSystemRun"><code>papplSystemRun</code></a> is called.</p>
<h3 class="function"><a id="papplSystemAddMIMEFilter">papplSystemAddMIMEFilter</a></h3>
<p class="description">Add a file filter to the system.</p>
<p class="code">
void papplSystemAddMIMEFilter(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *srctype, const char *dsttype, <a href="#pappl_mime_filter_cb_t">pappl_mime_filter_cb_t</a> cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>srctype</th>
<td class="description">Source MIME media type (constant) string</td></tr>
<tr><th>dsttype</th>
<td class="description">Destination MIME media type (constant) string</td></tr>
<tr><th>cb</th>
<td class="description">Filter callback function</td></tr>
<tr><th>data</th>
<td class="description">Filter callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a file filter to the system to be used for processing
different kinds of document data in print jobs.  The &quot;srctype&quot; and &quot;dsttype&quot;
arguments specify the source and destination MIME media types as constant
strings.  A destination MIME media type of &quot;image/pwg-raster&quot; specifies a
filter that uses the driver's raster interface.  Other destination types
imply direct submission to the output device using the <code>papplDeviceXxx</code>
functions.<br>
<br>
</p><blockquote>
Note: This function may not be called while the system is running.</blockquote>
<h3 class="function"><a id="papplSystemAddResourceCallback">papplSystemAddResourceCallback</a></h3>
<p class="description">Add a dynamic resource that uses a
                                     callback function.</p>
<p class="code">
void papplSystemAddResourceCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path, const char *format, <a href="#pappl_resource_cb_t">pappl_resource_cb_t</a> cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
<tr><th>format</th>
<td class="description">MIME media type for content such as &quot;text/html&quot;</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a dynamic resource at the specified path.  When a client
GET or POST request is received at the specified path, the &quot;cb&quot; function
will be called with the client pointer and &quot;data&quot; pointer to respond to it.<br>
<br>
Resource callbacks are most often used to implement custom web pages.<br>
<br>
</p><blockquote>
Note: Any custom web page that is added prior to calling the
<a href="#papplSystemRun"><code>papplSystemRun</code></a> function will replace the corresponding standard web
page at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddResourceData">papplSystemAddResourceData</a></h3>
<p class="description">Add a static data resource.</p>
<p class="code">
void papplSystemAddResourceData(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path, const char *format, const void *data, size_t datalen);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
<tr><th>format</th>
<td class="description">MIME media type such as &quot;image/png&quot;</td></tr>
<tr><th>data</th>
<td class="description">Resource data</td></tr>
<tr><th>datalen</th>
<td class="description">Size of resource data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a static resource at the specified path.  The provided
data is not copied to the resource and must remain stable for as long as the
resource is added to the system.<br>
<br>
</p><blockquote>
Note: Any resource that is added prior to calling the <a href="#papplSystemRun"><code>papplSystemRun</code></a>
function will replace the corresponding standard resource at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddResourceDirectory">papplSystemAddResourceDirectory</a></h3>
<p class="description">Add external files in a directory as
                                      resources.</p>
<p class="code">
void papplSystemAddResourceDirectory(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *basepath, const char *directory);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>basepath</th>
<td class="description">Base resource path</td></tr>
<tr><th>directory</th>
<td class="description">Directory containing resource files</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds static resources from the specified directory under the
specified path.  The directory is scanned and only those files present at the
time of the call are available, and those files must remain stable for as
long as the resources are added to the system..<br>
<br>
</p><blockquote>
Note: Any resource that is added prior to calling the <a href="#papplSystemRun"><code>papplSystemRun</code></a>
function will replace the corresponding standard resource at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddResourceFile">papplSystemAddResourceFile</a></h3>
<p class="description">Add an external file as a resource.</p>
<p class="code">
void papplSystemAddResourceFile(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path, const char *format, const char *filename);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
<tr><th>format</th>
<td class="description">MIME media type such as &quot;image/png&quot;</td></tr>
<tr><th>filename</th>
<td class="description">Filename</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a static resource at the specified path.  The provided
file is not copied to the resource and must remain stable for as long as the
resource is added to the system.<br>
<br>
</p><blockquote>
Note: Any resource that is added prior to calling the <a href="#papplSystemRun"><code>papplSystemRun</code></a>
function will replace the corresponding standard resource at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddResourceString">papplSystemAddResourceString</a></h3>
<p class="description">Add a static data resource as a C string.</p>
<p class="code">
void papplSystemAddResourceString(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path, const char *format, const char *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
<tr><th>format</th>
<td class="description">MIME media type such as &quot;image/png&quot;</td></tr>
<tr><th>data</th>
<td class="description">Resource data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a static resource at the specified path.  The provided
data is not copied to the resource and must remain stable for as long as the
resource is added to the system.<br>
<br>
</p><blockquote>
Note: Any resource that is added prior to calling the <a href="#papplSystemRun"><code>papplSystemRun</code></a>
function will replace the corresponding standard resource at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddStringsData">papplSystemAddStringsData</a></h3>
<p class="description">Add a static localization file resource.</p>
<p class="code">
void papplSystemAddStringsData(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path, const char *language, const char *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
<tr><th>language</th>
<td class="description">ISO language tag such as &quot;en-US&quot;, &quot;fr-CA&quot;, etc.</td></tr>
<tr><th>data</th>
<td class="description">Nul-terminated string containing strings file data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a static localization resource at the specified path.
Localization files use the NeXTStep strings (&quot;text/strings&quot;) format defined
in PWG Candidate Standard 5100.13-2013.  The provided data is not copied to
the resource and must remain stable for as long as the resource is added to
the system.<br>
<br>
</p><blockquote>
Note: Any resource that is added prior to calling the <a href="#papplSystemRun"><code>papplSystemRun</code></a>
function will replace the corresponding standard resource at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddStringsFile">papplSystemAddStringsFile</a></h3>
<p class="description">Add an external localization file resource.</p>
<p class="code">
void papplSystemAddStringsFile(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path, const char *language, const char *filename);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
<tr><th>language</th>
<td class="description">ISO language tag such as &quot;en-US&quot;, &quot;fr-CA&quot;, etc.</td></tr>
<tr><th>filename</th>
<td class="description">Filename</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function adds a static localization resource at the specified path.
Localization files use the NeXTStep strings (&quot;text/strings&quot;) format defined
in PWG Candidate Standard 5100.13-2013.  The provided file is not copied to
the resource and must remain stable for as long as the resource is added to
the system.<br>
<br>
</p><blockquote>
Note: Any resource that is added prior to calling the <a href="#papplSystemRun"><code>papplSystemRun</code></a>
function will replace the corresponding standard resource at the same path.</blockquote>
<h3 class="function"><a id="papplSystemAddTimerCallback">papplSystemAddTimerCallback</a></h3>
<p class="description">Add a timer callback to a system.</p>
<p class="code">
bool papplSystemAddTimerCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, time_t start, int interval, <a href="#pappl_timer_cb_t">pappl_timer_cb_t</a> cb, void *cb_data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>start</th>
<td class="description">Start time in seconds or <code>0</code> for the current time</td></tr>
<tr><th>interval</th>
<td class="description">Repeat interval in seconds or <code>0</code> for no repeat</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>cb_data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on error</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function schedules a function that will be called on the main run loop
thread at the specified time and optionally every &quot;interval&quot; seconds
thereafter.  The timimg accuracy is typically within a few milliseconds but
is not guaranteed.  Since the callback is run on the main run loop thread,
functions should create a new thread for any long-running operations.<br>
<br>
The callback function receives the &quot;system&quot; and &quot;cb_data&quot; pointers and
returns <code>true</code> to repeat the timer or <code>false</code> to remove it:

<pre>
bool my_timer_cb(pappl_system_t *system, void *cb_data)
{
  ... do periodic task ...
  return (true); // repeat the timer
}
</pre>
</p>
<h3 class="function"><a id="papplSystemCleanJobs">papplSystemCleanJobs</a></h3>
<p class="description">Clean out old (completed) jobs.</p>
<p class="code">
void papplSystemCleanJobs(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function deletes all old (completed) jobs above the limit set by the
<a href="#papplPrinterSetMaxCompletedJobs"><code>papplPrinterSetMaxCompletedJobs</code></a> function.  The level may temporarily
exceed this limit if the jobs were completed within the last 60 seconds.<br>
<br>
</p><blockquote>
Note: This function is normally called automatically from the
<a href="#papplSystemRun"><code>papplSystemRun</code></a> function.</blockquote>
<h3 class="function"><a id="papplSystemCreate">papplSystemCreate</a></h3>
<p class="description">Create a system object.</p>
<p class="code">
<a href="#pappl_system_t">pappl_system_t</a> *papplSystemCreate(<a href="#pappl_soptions_t">pappl_soptions_t</a> options, const char *name, int port, const char *subtypes, const char *spooldir, const char *logfile, <a href="#pappl_loglevel_t">pappl_loglevel_t</a> loglevel, const char *auth_service, bool tls_only);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>options</th>
<td class="description">Server options</td></tr>
<tr><th>name</th>
<td class="description">System name</td></tr>
<tr><th>port</th>
<td class="description">Port number or <code>0</code> for auto</td></tr>
<tr><th>subtypes</th>
<td class="description">DNS-SD sub-types or <code>NULL</code> for none</td></tr>
<tr><th>spooldir</th>
<td class="description">Spool directory or <code>NULL</code> for default</td></tr>
<tr><th>logfile</th>
<td class="description">Log file or <code>NULL</code> for default</td></tr>
<tr><th>loglevel</th>
<td class="description">Log level</td></tr>
<tr><th>auth_service</th>
<td class="description">PAM authentication service or <code>NULL</code> for none</td></tr>
<tr><th>tls_only</th>
<td class="description">Only support TLS connections?</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">System object</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function creates a new system object, which is responsible for managing
all the printers, jobs, and resources used by the printer application.<br>
<br>
The &quot;options&quot; argument specifies which options are enabled for the server:

</p><ul>
<li><code>PAPPL_SOPTIONS_NONE</code>: No options.
</li>
<li><code>PAPPL_SOPTIONS_DNSSD_HOST</code>: When resolving DNS-SD service name collisions,
  use the DNS-SD hostname instead of a serial number or UUID.
</li>
<li><code>PAPPL_SOPTIONS_WEB_LOG</code>: Include the log file web page.
</li>
<li><code>PAPPL_SOPTIONS_MULTI_QUEUE</code>: Support multiple printers.
</li>
<li><code>PAPPL_SOPTIONS_WEB_NETWORK</code>: Include the network settings web page.
</li>
<li><code>PAPPL_SOPTIONS_RAW_SOCKET</code>: Accept jobs via raw sockets starting on port
  9100.
</li>
<li><code>PAPPL_SOPTIONS_WEB_REMOTE</code>: Allow remote queue management.
</li>
<li><code>PAPPL_SOPTIONS_WEB_SECURITY</code>: Include the security settings web page.
</li>
<li><code>PAPPL_SOPTIONS_WEB_INTERFACE</code>: Include the standard printer and job monitoring
  web pages.
</li>
<li><code>PAPPL_SOPTIONS_WEB_TLS</code>: Include the TLS settings page.
</li>
<li><code>PAPPL_SOPTIONS_USB_PRINTER</code>: Accept jobs via USB for the default printer
  (embedded Linux only).</li>
</ul>
<p class="discussion">The &quot;name&quot; argument specifies a human-readable name for the system.<br>
<br>
The &quot;port&quot; argument specifies the port number to bind to.  A value of <code>0</code>
will cause an available port number to be assigned when the first listener
is added with the <a href="#papplSystemAddListeners"><code>papplSystemAddListeners</code></a> function.<br>
<br>
The &quot;subtypes&quot; argument specifies one or more comma-delimited DNS-SD service
sub-types such as &quot;_print&quot; and &quot;_universal&quot;.<br>
<br>
The &quot;spooldir&quot; argument specifies the location of job files.  If <code>NULL</code>, a
temporary directory is created.<br>
<br>
The &quot;logfile&quot; argument specifies where to send log messages.  If <code>NULL</code>, the
log messages are written to a temporary file.<br>
<br>
The &quot;loglevel&quot; argument specifies the initial logging level.<br>
<br>
The &quot;auth_service&quot; argument specifies a PAM authentication service name.  If
<code>NULL</code>, no user authentication will be provided.<br>
<br>
The &quot;tls_only&quot; argument controls whether the printer application will accept
unencrypted connections.  In general, this argument should always be <code>false</code>
(allow unencrypted connections) since not all clients support encrypted
printing.</p>
<h3 class="function"><a id="papplSystemDelete">papplSystemDelete</a></h3>
<p class="description">Delete a system object.</p>
<p class="code">
void papplSystemDelete(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion"></p><blockquote>
Note: A system object cannot be deleted while the system is running.</blockquote>
<h3 class="function"><a id="papplSystemFindLoc">papplSystemFindLoc</a></h3>
<p class="description">Find a localization for the given printer and language.</p>
<p class="code">
<a href="#pappl_loc_t">pappl_loc_t</a> *papplSystemFindLoc(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *language);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>language</th>
<td class="description">Language</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Localization or <code>NULL</code> if none</p>
<h3 class="function"><a id="papplSystemFindPrinter">papplSystemFindPrinter</a></h3>
<p class="description">Find a printer by resource, ID, or device URI.</p>
<p class="code">
<a href="#pappl_printer_t">pappl_printer_t</a> *papplSystemFindPrinter(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *resource, int printer_id, const char *device_uri);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>resource</th>
<td class="description">Resource path or <code>NULL</code></td></tr>
<tr><th>printer_id</th>
<td class="description">Printer ID or <code>0</code></td></tr>
<tr><th>device_uri</th>
<td class="description">Device URI or <code>NULL</code></td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Printer or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function finds a printer contained in the system using its resource
path, unique integer identifier, or device URI.  If none of these is
specified, the current default printer is returned.</p>
<h3 class="function"><a id="papplSystemFindSubscription">papplSystemFindSubscription</a></h3>
<p class="description">Find a subscription.</p>
<p class="code">
<a href="#pappl_subscription_t">pappl_subscription_t</a> *papplSystemFindSubscription(<a href="#pappl_system_t">pappl_system_t</a> *system, int sub_id);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>sub_id</th>
<td class="description">Subscription ID</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Subscription or <code>NULL</code> if not found.</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function finds the numbered event notification subscription on a system.</p>
<h3 class="function"><a id="papplSystemGetAdminGroup">papplSystemGetAdminGroup</a></h3>
<p class="description">Get the current administrative group, if any.</p>
<p class="code">
char *papplSystemGetAdminGroup(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Admin group or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current administrative group, if any, to the
specified buffer.</p>
<h3 class="function"><a id="papplSystemGetAuthService">papplSystemGetAuthService</a></h3>
<p class="description">Get the PAM authorization service, if any.</p>
<p class="code">
const char *papplSystemGetAuthService(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">PAM authorization service or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the PAM authorization service being used by the system
for authentication, if any.</p>
<h3 class="function"><a id="papplSystemGetContact">papplSystemGetContact</a></h3>
<p class="description">Get the &quot;system-contact&quot; value.</p>
<p class="code">
<a href="#pappl_contact_t">pappl_contact_t</a> *papplSystemGetContact(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_contact_t">pappl_contact_t</a> *contact);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>contact</th>
<td class="description">Contact</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Contact</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current system contact information to the specified
buffer.</p>
<h3 class="function"><a id="papplSystemGetDNSSDName">papplSystemGetDNSSDName</a></h3>
<p class="description">Get the current DNS-SD service name.</p>
<p class="code">
char *papplSystemGetDNSSDName(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Current DNS-SD service name or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current DNS-SD service name of the system, if any,
to the specified buffer.</p>
<h3 class="function"><a id="papplSystemGetDefaultPrintGroup">papplSystemGetDefaultPrintGroup</a></h3>
<p class="description">Get the default print group, if any.</p>
<p class="code">
char *papplSystemGetDefaultPrintGroup(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Default print group or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current default print group, if any, to the
specified buffer.</p>
<h3 class="function"><a id="papplSystemGetDefaultPrinterID">papplSystemGetDefaultPrinterID</a></h3>
<p class="description">Get the current &quot;default-printer-id&quot; value.</p>
<p class="code">
int papplSystemGetDefaultPrinterID(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;default-printer-id&quot; value</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the positive integer identifier for the current
default printer or <code>0</code> if there is no default printer.</p>
<h3 class="function"><a id="papplSystemGetFooterHTML">papplSystemGetFooterHTML</a></h3>
<p class="description">Get the footer HTML for the web interface, if any.</p>
<p class="code">
const char *papplSystemGetFooterHTML(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Footer HTML or <code>NULL</code> if none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the HTML for the web page footer, if any.  The footer
HTML can be set using the <a href="#papplSystemSetFooterHTML"><code>papplSystemSetFooterHTML</code></a> function.</p>
<h3 class="function"><a id="papplSystemGetGeoLocation">papplSystemGetGeoLocation</a></h3>
<p class="description">Get the system geo-location string, if any.</p>
<p class="code">
char *papplSystemGetGeoLocation(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;geo:&quot; URI or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current system geographic location as a &quot;geo:&quot; URI
to the specified buffer.</p>
<h3 class="function"><a id="papplSystemGetHostName">papplSystemGetHostName</a></h3>
<p class="description">Get the system hostname.</p>
<p class="code">
char *papplSystemGetHostName(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Hostname</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current system hostname to the specified buffer.</p>
<h3 class="function"><a id="papplSystemGetHostPort">papplSystemGetHostPort</a></h3>
<p class="description">Get the port number for network connections to
                             the system.</p>
<p class="code">
int papplSystemGetHostPort(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Port number</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the port number that is used for network connections
to the system.</p>
<h3 class="function"><a id="papplSystemGetLocation">papplSystemGetLocation</a></h3>
<p class="description">Get the system location string, if any.</p>
<p class="code">
char *papplSystemGetLocation(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Location string or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current human-readable location, if any, to the
specified buffer.</p>
<h3 class="function"><a id="papplSystemGetLogLevel">papplSystemGetLogLevel</a></h3>
<p class="description">Get the system log level.</p>
<p class="code">
<a href="#pappl_loglevel_t">pappl_loglevel_t</a> papplSystemGetLogLevel(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Log level</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the current system log level as an enumeration.</p>
<h3 class="function"><a id="papplSystemGetMaxClients">papplSystemGetMaxClients</a></h3>
<p class="description">Get the maximum number of clients.</p>
<p class="code">
int papplSystemGetMaxClients(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum number of clients</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function gets the maximum number of simultaneous clients that are
allowed by the system.</p>
<h3 class="function"><a id="papplSystemGetMaxImageSize">papplSystemGetMaxImageSize</a></h3>
<p class="description">Get the maximum supported size for images.</p>
<p class="code">
size_t papplSystemGetMaxImageSize(<a href="#pappl_system_t">pappl_system_t</a> *system, int *max_width, int *max_height);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>max_width</th>
<td class="description">Maximum width in columns</td></tr>
<tr><th>max_height</th>
<td class="description">Maximum height in lines</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum image size (uncompressed)</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function retrieves the image size limits in bytes (uncompressed),
columns, and lines.</p>
<h3 class="function"><a id="papplSystemGetMaxLogSize">papplSystemGetMaxLogSize</a></h3>
<p class="description">Get the maximum log file size.</p>
<p class="code">
size_t papplSystemGetMaxLogSize(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum log file size or <code>0</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function gets the maximum log file size, which is only used when logging
directly to a file.  When the limit is reached, the current log file is
renamed to &quot;filename.O&quot; and a new log file is created.  Set the maximum size
to <code>0</code> to disable log file rotation.<br>
<br>
The default maximum log file size is 1MiB or <code>1048576</code> bytes.</p>
<h3 class="function"><a id="papplSystemGetMaxSubscriptions">papplSystemGetMaxSubscriptions</a></h3>
<p class="description">Get the maximum number of event subscriptions.</p>
<p class="code">
size_t papplSystemGetMaxSubscriptions(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Maximum number of subscriptions or <code>0</code></p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function gets the maximum number of event subscriptions that are
allowed.  A maximum of <code>0</code> means there is no limit.<br>
<br>
The default maximum number of event subscriptions is 100.</p>
<h3 class="function"><a id="papplSystemGetName">papplSystemGetName</a></h3>
<p class="description">Get the system name.</p>
<p class="code">
char *papplSystemGetName(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Name string</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current system name to the specified buffer.</p>
<h3 class="function"><a id="papplSystemGetNextPrinterID">papplSystemGetNextPrinterID</a></h3>
<p class="description">Get the next &quot;printer-id&quot; value.</p>
<p class="code">
int papplSystemGetNextPrinterID(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Next &quot;printer-id&quot; value</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the positive integer identifier that will be used for
the next printer that is created.</p>
<h3 class="function"><a id="papplSystemGetOptions">papplSystemGetOptions</a></h3>
<p class="description">Get the system options.</p>
<p class="code">
<a href="#pappl_soptions_t">pappl_soptions_t</a> papplSystemGetOptions(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">System options</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the system options as a bitfield.</p>
<h3 class="function"><a id="papplSystemGetOrganization">papplSystemGetOrganization</a></h3>
<p class="description">Get the system organization string, if any.</p>
<p class="code">
char *papplSystemGetOrganization(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Organization string or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current organization name, if any, to the
specified buffer.</p>
<h3 class="function"><a id="papplSystemGetOrganizationalUnit">papplSystemGetOrganizationalUnit</a></h3>
<p class="description">Get the system organizational unit string, if any.</p>
<p class="code">
char *papplSystemGetOrganizationalUnit(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Organizational unit string or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current organizational unit name, if any, to the
specified buffer.</p>
<h3 class="function"><a id="papplSystemGetPassword">papplSystemGetPassword</a></h3>
<p class="description">Get the current web site access password.</p>
<p class="code">
char *papplSystemGetPassword(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Password hash</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current web site password hash, if any, to the
specified buffer.<br>
<br>
Note: The access password is only used when the PAM authentication service
is not set.</p>
<h3 class="function"><a id="papplSystemGetServerHeader">papplSystemGetServerHeader</a></h3>
<p class="description">Get the Server: header for HTTP responses.</p>
<p class="code">
const char *papplSystemGetServerHeader(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Server: header string or <code>NULL</code> for none</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the value of the HTTP &quot;Server:&quot; header that is used
by the system.</p>
<h3 class="function"><a id="papplSystemGetSessionKey">papplSystemGetSessionKey</a></h3>
<p class="description">Get the current session key.</p>
<p class="code">
char *papplSystemGetSessionKey(<a href="#pappl_system_t">pappl_system_t</a> *system, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Session key</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the current session key to the specified buffer.  The
session key is used for web interface forms to provide CSRF protection and is
refreshed periodically.</p>
<h3 class="function"><a id="papplSystemGetTLSOnly">papplSystemGetTLSOnly</a></h3>
<p class="description">Get the TLS-only state of the system.</p>
<p class="code">
bool papplSystemGetTLSOnly(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the system is only accepting TLS encrypted connections, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns whether the system will only accept encrypted
connections.</p>
<h3 class="function"><a id="papplSystemGetUUID">papplSystemGetUUID</a></h3>
<p class="description">Get the &quot;system-uuid&quot; value.</p>
<p class="code">
const char *papplSystemGetUUID(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">&quot;system-uuid&quot; value</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns the system's UUID value.</p>
<h3 class="function"><a id="papplSystemGetVersions">papplSystemGetVersions</a></h3>
<p class="description">Get the firmware names and versions.</p>
<p class="code">
int papplSystemGetVersions(<a href="#pappl_system_t">pappl_system_t</a> *system, int max_versions, <a href="#pappl_version_t">pappl_version_t</a> *versions);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>max_versions</th>
<td class="description">Maximum number of versions to return</td></tr>
<tr><th>versions</th>
<td class="description">Versions array or <code>NULL</code> for don't care</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Number of firmware versions</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function copies the system firmware information to the specified buffer.
The return value is always the number of firmware versions that have been
set using the <a href="#papplSystemSetVersions"><code>papplSystemSetVersions</code></a> function, regardless of the
value of the &quot;max_versions&quot; argument.</p>
<h3 class="function"><a id="papplSystemHashPassword">papplSystemHashPassword</a></h3>
<p class="description">Generate a password hash using salt and password strings.</p>
<p class="code">
char *papplSystemHashPassword(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *salt, const char *password, char *buffer, size_t bufsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>salt</th>
<td class="description">Existing password hash or <code>NULL</code> to generate a new hash</td></tr>
<tr><th>password</th>
<td class="description">Plain-text password string</td></tr>
<tr><th>buffer</th>
<td class="description">String buffer</td></tr>
<tr><th>bufsize</th>
<td class="description">Size of string buffer</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Hashed password</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function generates a password hash using the &quot;salt&quot; and &quot;password&quot;
strings.  The &quot;salt&quot; string should be <code>NULL</code> to generate a new password hash
or the value of an existing password hash to verify that a given plaintext
&quot;password&quot; string matches the password hash.<br>
<br>
</p><blockquote>
Note: Hashed access passwords are only used when the PAM authentication
service is not set.</blockquote>
<h3 class="function"><a id="papplSystemIsRunning">papplSystemIsRunning</a></h3>
<p class="description">Return whether the system is running.</p>
<p class="code">
bool papplSystemIsRunning(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the system is running, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns whether the system is running.</p>
<h3 class="function"><a id="papplSystemIsShutdown">papplSystemIsShutdown</a></h3>
<p class="description">Return whether the system has been shutdown.</p>
<p class="code">
bool papplSystemIsShutdown(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> if the system is shutdown, <code>false</code> otherwise</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function returns whether the system is shutdown or scheduled to
shutdown.</p>
<h3 class="function"><a id="papplSystemIteratePrinters">papplSystemIteratePrinters</a></h3>
<p class="description">Iterate all of the printers.</p>
<p class="code">
void papplSystemIteratePrinters(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_printer_cb_t">pappl_printer_cb_t</a> cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function iterates each of the printers managed by the system.  The
&quot;cb&quot; function is called once per printer with the &quot;system&quot; and &quot;data&quot; values.</p>
<h3 class="function"><a id="papplSystemLoadState">papplSystemLoadState</a></h3>
<p class="description">Load the previous system state.</p>
<p class="code">
bool papplSystemLoadState(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *filename);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>filename</th>
<td class="description">File to load</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function loads the previous system state from a file created by the
<a href="#papplSystemSaveState"><code>papplSystemSaveState</code></a> function.  The system state contains all of the
system object values, the list of printers, and the jobs for each printer.<br>
<br>
When loading a printer definition, if the printer cannot be created (e.g.,
because the driver name is no longer valid) then that printer and all of its
job history will be lost.  In the case of a bad driver name, a printer
application's driver callback can perform any necessary mapping of the driver
name, including the use its auto-add callback to find a compatible new
driver.<br>
<br>
</p><blockquote>
Note: This function must be called prior to <a href="#papplSystemRun"><code>papplSystemRun</code></a>.</blockquote>
<h3 class="function"><a id="papplSystemMatchDriver">papplSystemMatchDriver</a></h3>
<p class="description"></p>
<p class="code">
const char *papplSystemMatchDriver(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *device_id);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>device_id</th>
<td class="description">IEEE-1284 device ID string</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description">Match a driver to an IEEE-1284 device ID.</p>
<h3 class="function"><a id="papplSystemRemoveLink">papplSystemRemoveLink</a></h3>
<p class="description">Remove a link from the navigation header.</p>
<p class="code">
void papplSystemRemoveLink(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *label);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>label</th>
<td class="description">Label string</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function removes the named link for the system.</p>
<h3 class="function"><a id="papplSystemRemoveResource">papplSystemRemoveResource</a></h3>
<p class="description">Remove a resource at the specified path.</p>
<p class="code">
void papplSystemRemoveResource(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *path);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System object</td></tr>
<tr><th>path</th>
<td class="description">Resource path</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function removes a resource at the specified path.</p>
<h3 class="function"><a id="papplSystemRemoveTimerCallback">papplSystemRemoveTimerCallback</a></h3>
<p class="description">Remove a timer callback.</p>
<p class="code">
void papplSystemRemoveTimerCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_timer_cb_t">pappl_timer_cb_t</a> cb, void *cb_data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>cb_data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function removes all matching timer callbacks from the specified system.
Both the callback function and data must match to remove a timer.</p>
<h3 class="function"><a id="papplSystemRun">papplSystemRun</a></h3>
<p class="description">Run the printer application.</p>
<p class="code">
void papplSystemRun(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function runs the printer application, accepting new connections,
handling requests, and processing jobs as needed.  It returns once the
system is shutdown, either through an IPP request or <code>SIGTERM</code>.</p>
<h3 class="function"><a id="papplSystemSaveState">papplSystemSaveState</a></h3>
<p class="description">Save the current system state.</p>
<p class="code">
bool papplSystemSaveState(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *filename);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>filename</th>
<td class="description">File to save</td></tr>
</tbody></table>
<h4 class="returnvalue">Return Value</h4>
<p class="description"><code>true</code> on success, <code>false</code> on failure</p>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function saves the current system state to a file.  It is typically
used with the <a href="#papplSystemSetSaveCallback"><code>papplSystemSetSaveCallback</code></a> function to periodically
save the state:

<pre>
papplSystemSetSaveCallback(system, (pappl_save_cb_t)papplSystemSaveState,
    (void *)filename);
</pre>
</p>
<h3 class="function"><a id="papplSystemSetAdminGroup">papplSystemSetAdminGroup</a></h3>
<p class="description">Set the administrative group.</p>
<p class="code">
void papplSystemSetAdminGroup(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">Admin group</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the group name used for administrative requests such as
adding or deleting a printer.<br>
<br>
</p><blockquote>
Note: The administrative group is only used when the PAM authorization
service is also set when the system is created.</blockquote>
<h3 class="function"><a id="papplSystemSetAuthCallback">papplSystemSetAuthCallback</a></h3>
<p class="description">Set an authentication callback for the specified scheme.</p>
<p class="code">
void papplSystemSetAuthCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *auth_scheme, <a href="#pappl_auth_cb_t">pappl_auth_cb_t</a> auth_cb, void *auth_cbdata);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>auth_scheme</th>
<td class="description">Authentication scheme</td></tr>
<tr><th>auth_cb</th>
<td class="description">Callback function</td></tr>
<tr><th>auth_cbdata</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the authentication callback that is used for Client
requests.  The authentication callback is used for every Client request
containing the WWW-Authenticate header (<code>HTTP_FIELD_WWW_AUTHENTICATE</code>).
The callback returns one of the following status codes:

</p><ul>
<li><code>HTTP_STATUS_CONTINUE</code> if the authentication succeeded,
</li>
<li><code>HTTP_STATUS_UNAUTHORIZED</code> if the authentication failed, or
</li>
<li><code>HTTP_STATUS_FORBIDDEN</code> if the authentication succeeded but the user is
  not part of the specified group.</li>
</ul>
<h3 class="function"><a id="papplSystemSetContact">papplSystemSetContact</a></h3>
<p class="description">Set the &quot;system-contact&quot; value.</p>
<p class="code">
void papplSystemSetContact(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_contact_t">pappl_contact_t</a> *contact);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>contact</th>
<td class="description">Contact</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the system contact value.</p>
<h3 class="function"><a id="papplSystemSetDNSSDName">papplSystemSetDNSSDName</a></h3>
<p class="description">Set the DNS-SD service name.</p>
<p class="code">
void papplSystemSetDNSSDName(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">DNS-SD service name or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the DNS-SD service name of the system.  If <code>NULL</code>, the
DNS-SD registration is removed.</p>
<h3 class="function"><a id="papplSystemSetDefaultPrintGroup">papplSystemSetDefaultPrintGroup</a></h3>
<p class="description">Set the default print group.</p>
<p class="code">
void papplSystemSetDefaultPrintGroup(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">Default print group or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the default group name used for print requests.<br>
<br>
</p><blockquote>
Note: The default print group is only used when the PAM authorization
service is also set when the system is created.</blockquote>
<h3 class="function"><a id="papplSystemSetDefaultPrinterID">papplSystemSetDefaultPrinterID</a></h3>
<p class="description">Set the &quot;default-printer-id&quot; value.</p>
<p class="code">
void papplSystemSetDefaultPrinterID(<a href="#pappl_system_t">pappl_system_t</a> *system, int default_printer_id);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>default_printer_id</th>
<td class="description">&quot;default-printer-id&quot; value</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the default printer using its unique positive integer
identifier.</p>
<h3 class="function"><a id="papplSystemSetEventCallback">papplSystemSetEventCallback</a></h3>
<p class="description">Set a callback for monitoring system events.</p>
<p class="code">
void papplSystemSetEventCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_event_cb_t">pappl_event_cb_t</a> event_cb, void *event_data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>event_cb</th>
<td class="description">Event callback function</td></tr>
<tr><th>event_data</th>
<td class="description">Event callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets a callback function to receive event notifications from
the system.</p>
<h3 class="function"><a id="papplSystemSetFooterHTML">papplSystemSetFooterHTML</a></h3>
<p class="description">Set the footer HTML for the web interface.</p>
<p class="code">
void papplSystemSetFooterHTML(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *html);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>html</th>
<td class="description">Footer HTML or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the footer HTML for the web interface.<br>
<br>
</p><blockquote>
Note: The footer HTML can only be set prior to calling
<a href="#papplSystemRun"><code>papplSystemRun</code></a>.</blockquote>
<h3 class="function"><a id="papplSystemSetGeoLocation">papplSystemSetGeoLocation</a></h3>
<p class="description">Set the geographic location string.</p>
<p class="code">
void papplSystemSetGeoLocation(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">&quot;geo:&quot; URI or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the geographic location of the system as a &quot;geo:&quot; URI.
If <code>NULL</code>, the location is cleared.</p>
<h3 class="function"><a id="papplSystemSetHostName">papplSystemSetHostName</a></h3>
<p class="description">Set the system hostname.</p>
<p class="code">
void papplSystemSetHostName(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">Hostname or <code>NULL</code> for default</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the system hostname.  If <code>NULL</code>, the default hostname
is used.</p>
<h3 class="function"><a id="papplSystemSetLocation">papplSystemSetLocation</a></h3>
<p class="description">Set the system location string, if any.</p>
<p class="code">
void papplSystemSetLocation(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">Location or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the human-readable location of the system.  If <code>NULL</code>,
the location is cleared.</p>
<h3 class="function"><a id="papplSystemSetLogLevel">papplSystemSetLogLevel</a></h3>
<p class="description">Set the system log level</p>
<p class="code">
void papplSystemSetLogLevel(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_loglevel_t">pappl_loglevel_t</a> loglevel);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>loglevel</th>
<td class="description">Log Level</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the log level as an enumeration.</p>
<h3 class="function"><a id="papplSystemSetMIMECallback">papplSystemSetMIMECallback</a></h3>
<p class="description">Set the MIME typing callback for the system.</p>
<p class="code">
void papplSystemSetMIMECallback(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_mime_cb_t">pappl_mime_cb_t</a> cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets a custom MIME typing callback for the system.  The MIME
typing callback extends the built-in MIME typing support for other media
types that are supported by the application, typically vendor print formats.<br>
<br>
The callback function receives a buffer containing the initial bytes of the
document data, the length of the buffer, and the callback data.  It can then
return <code>NULL</code> if the content is not recognized or a constant string
containing the MIME media type, for example &quot;application/vnd.hp-pcl&quot; for
HP PCL print data.</p>
<h3 class="function"><a id="papplSystemSetMaxClients">papplSystemSetMaxClients</a></h3>
<p class="description">Set the maximum number of clients.</p>
<p class="code">
void papplSystemSetMaxClients(<a href="#pappl_system_t">pappl_system_t</a> *system, int max_clients);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>max_clients</th>
<td class="description">Maximum number of clients or <code>0</code> for auto</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the maximum number of simultaneous clients that are
allowed by the system from 0 (auto) to 32768 (half of the available TCP
port numbers).<br>
<br>
The default maximum number of clients is based on available system resources.</p>
<h3 class="function"><a id="papplSystemSetMaxImageSize">papplSystemSetMaxImageSize</a></h3>
<p class="description">Set the maximum allowed JPEG/PNG image sizes.</p>
<p class="code">
void papplSystemSetMaxImageSize(<a href="#pappl_system_t">pappl_system_t</a> *system, size_t max_size, int max_width, int max_height);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>max_size</th>
<td class="description">Maximum image size (uncompressed) or <code>0</code> for default</td></tr>
<tr><th>max_width</th>
<td class="description">Maximum image width in columns or <code>0</code> for default</td></tr>
<tr><th>max_height</th>
<td class="description">Maximum image height in lines or <code>0</code> for default</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the maximum size allowed for JPEG and PNG images.  The
default limits are 16384x16384 and 1/10th the maximum memory the current
process can use or 1GiB, whichever is less.</p>
<h3 class="function"><a id="papplSystemSetMaxLogSize">papplSystemSetMaxLogSize</a></h3>
<p class="description">Set the maximum log file size in bytes.</p>
<p class="code">
void papplSystemSetMaxLogSize(<a href="#pappl_system_t">pappl_system_t</a> *system, size_t maxsize);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>maxsize</th>
<td class="description">Maximum log size in bytes or <code>0</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the maximum log file size in bytes, which is only used
when logging directly to a file.  When the limit is reached, the current log
file is renamed to &quot;filename.O&quot; and a new log file is created.  Set the
maximum size to <code>0</code> to disable log file rotation.<br>
<br>
The default maximum log file size is 1MiB or <code>1048576</code> bytes.</p>
<h3 class="function"><a id="papplSystemSetMaxSubscriptions">papplSystemSetMaxSubscriptions</a></h3>
<p class="description">Set the maximum number of event subscriptions.</p>
<p class="code">
void papplSystemSetMaxSubscriptions(<a href="#pappl_system_t">pappl_system_t</a> *system, size_t max_subscriptions);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>max_subscriptions</th>
<td class="description">Maximum number of subscriptions or <code>0</code> for no limit</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function Sets the maximum number of event subscriptions that are
allowed.  A maximum of <code>0</code> means there is no limit.<br>
<br>
The default maximum number of event subscriptions is <code>100</code>.</p>
<h3 class="function"><a id="papplSystemSetNetworkCallbacks">papplSystemSetNetworkCallbacks</a></h3>
<p class="description">Set the network configuration callbacks.</p>
<p class="code">
void papplSystemSetNetworkCallbacks(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_network_get_cb_t">pappl_network_get_cb_t</a> get_cb, <a href="#pappl_network_set_cb_t">pappl_network_set_cb_t</a> set_cb, void *cb_data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>get_cb</th>
<td class="description">&quot;Get networks&quot; callback</td></tr>
<tr><th>set_cb</th>
<td class="description">&quot;Set networks&quot; callback</td></tr>
<tr><th>cb_data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the network configuration callbacks for a system.  The
&quot;get&quot; callback reads the configuration of all network interfaces and stores
them in an array of <a href="#pappl_network_t"><code>pappl_network_t</code></a> structures that is passed to the
callback.  The &quot;set&quot; callback writes the configuration of all network
interfaces and returns a boolean value indicating whether the configuration
has been written successfully.</p>
<h3 class="function"><a id="papplSystemSetNextPrinterID">papplSystemSetNextPrinterID</a></h3>
<p class="description">Set the next &quot;printer-id&quot; value.</p>
<p class="code">
void papplSystemSetNextPrinterID(<a href="#pappl_system_t">pappl_system_t</a> *system, int next_printer_id);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>next_printer_id</th>
<td class="description">Next &quot;printer-id&quot; value</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the unique positive integer identifier that will be used
for the next printer that is created.  It is typically only called as part
of restoring the state of a system.<br>
<br>
</p><blockquote>
Note: The next printer ID can only be set prior to calling
<a href="#papplSystemRun"><code>papplSystemRun</code></a>.</blockquote>
<h3 class="function"><a id="papplSystemSetOperationCallback">papplSystemSetOperationCallback</a></h3>
<p class="description">Set the IPP operation callback.</p>
<p class="code">
void papplSystemSetOperationCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_ipp_op_cb_t">pappl_ipp_op_cb_t</a> cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets a custom IPP operation handler for the system that is
called for any IPP operations that are not handled by the built-in IPP
services.<br>
<br>
</p><blockquote>
Note: The operation callback can only be set prior to calling
<a href="#papplSystemRun"><code>papplSystemRun</code></a>.</blockquote>
<h3 class="function"><a id="papplSystemSetOrganization">papplSystemSetOrganization</a></h3>
<p class="description">Set the system organization string, if any.</p>
<p class="code">
void papplSystemSetOrganization(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">Organization or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the organization name for the system.  If <code>NULL</code>, the
name is cleared.</p>
<h3 class="function"><a id="papplSystemSetOrganizationalUnit">papplSystemSetOrganizationalUnit</a></h3>
<p class="description">Set the system organizational unit
                                       string, if any.</p>
<p class="code">
void papplSystemSetOrganizationalUnit(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">Organizational unit or <code>NULL</code> for none</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the organizational unit name for the system.  If <code>NULL</code>,
the name is cleared.</p>
<h3 class="function"><a id="papplSystemSetPassword">papplSystemSetPassword</a></h3>
<p class="description">Set the access password hash string.</p>
<p class="code">
void papplSystemSetPassword(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *hash);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>hash</th>
<td class="description">Hash string</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the hash for the web access password.  The hash string is
generated using the <a href="#papplSystemHashPassword"><code>papplSystemHashPassword</code></a> function.<br>
<br>
</p><blockquote>
Note: The access password is only used when the PAM authentication service
is not set.</blockquote>
<h3 class="function"><a id="papplSystemSetPrinterDrivers">papplSystemSetPrinterDrivers</a></h3>
<p class="description">Set the list of drivers and the driver
                                   callbacks.</p>
<p class="code">
void papplSystemSetPrinterDrivers(<a href="#pappl_system_t">pappl_system_t</a> *system, int num_drivers, <a href="#pappl_pr_driver_t">pappl_pr_driver_t</a> *drivers, <a href="#pappl_pr_autoadd_cb_t">pappl_pr_autoadd_cb_t</a> autoadd_cb, <a href="#pappl_pr_create_cb_t">pappl_pr_create_cb_t</a> create_cb, <a href="#pappl_pr_driver_cb_t">pappl_pr_driver_cb_t</a> driver_cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>num_drivers</th>
<td class="description">Number of drivers</td></tr>
<tr><th>drivers</th>
<td class="description">Drivers</td></tr>
<tr><th>autoadd_cb</th>
<td class="description">Auto-add callback function or <code>NULL</code> if none</td></tr>
<tr><th>create_cb</th>
<td class="description">Printer creation callback function or <code>NULL</code> if none</td></tr>
<tr><th>driver_cb</th>
<td class="description">Driver initialization callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the lists of printer drivers, the optional auto-add
callback function, the optional creation callback, and the required driver
initialization callback function.<br>
<br>
The auto-add callback (&quot;autoadd_cb&quot;) finds a compatible driver name for the
specified printer.  It is used when the client or user specifies the &quot;auto&quot;
driver name, and for the &quot;autoadd&quot; sub-command for the <code>papplMainloop</code> API.<br>
<br>
The creation callback (&quot;create_cb&quot;) is called at the end of printer creation
to make any common changes or additions to a new printer.  It is typically
used to add extra web pages, add per-printer static resources, and/or
initialize the contact and location information.<br>
<br>
The driver initialization callback (&quot;driver_cb&quot;) is called to initialize the
<code>pappl_pr_driver_data_t</code> structure, which provides all of the printer
capabilities and callbacks for printing.</p>
<h3 class="function"><a id="papplSystemSetSaveCallback">papplSystemSetSaveCallback</a></h3>
<p class="description">Set the save callback.</p>
<p class="code">
void papplSystemSetSaveCallback(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_save_cb_t">pappl_save_cb_t</a> cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>cb</th>
<td class="description">Callback function</td></tr>
<tr><th>data</th>
<td class="description">Callback data</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets a callback that is used to periodically save the current
system state.  Typically the callback function (&quot;cb&quot;) is
<a href="#papplSystemSaveState"><code>papplSystemSaveState</code></a> and the callback data (&quot;data&quot;) is the name of
the state file:

<pre>
papplSystemSetSaveCallback(system, (pappl_save_cb_t)papplSystemSaveState,
    (void *)filename);
</pre>

</p><blockquote>
Note: The save callback can only be set prior to calling
<a href="#papplSystemRun"><code>papplSystemRun</code></a>.</blockquote>
<h3 class="function"><a id="papplSystemSetUUID">papplSystemSetUUID</a></h3>
<p class="description">Set the system UUID.</p>
<p class="code">
void papplSystemSetUUID(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *value);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>value</th>
<td class="description">UUID</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the system UUID value, overriding the default (generated)
value.  It is typically used when restoring the state of a previous
incarnation of the system.<br>
<br>
</p><blockquote>
Note: The UUID can only be set prior to calling <a href="#papplSystemRun"><code>papplSystemRun</code></a>.</blockquote>
<h3 class="function"><a id="papplSystemSetVersions">papplSystemSetVersions</a></h3>
<p class="description">Set the firmware names and versions.</p>
<p class="code">
void papplSystemSetVersions(<a href="#pappl_system_t">pappl_system_t</a> *system, int num_versions, <a href="#pappl_version_t">pappl_version_t</a> *versions);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>num_versions</th>
<td class="description">Number of versions</td></tr>
<tr><th>versions</th>
<td class="description">Firmware versions</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the names and versions of each firmware/software component
of the printer application.</p>
<h3 class="function"><a id="papplSystemSetWiFiCallbacks">papplSystemSetWiFiCallbacks</a></h3>
<p class="description">Set Wi-Fi callbacks.</p>
<p class="code">
void papplSystemSetWiFiCallbacks(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_wifi_join_cb_t">pappl_wifi_join_cb_t</a> join_cb, <a href="#pappl_wifi_list_cb_t">pappl_wifi_list_cb_t</a> list_cb, <a href="#pappl_wifi_status_cb_t">pappl_wifi_status_cb_t</a> status_cb, void *data);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
<tr><th>join_cb</th>
<td class="description">Join callback</td></tr>
<tr><th>list_cb</th>
<td class="description">List callback</td></tr>
<tr><th>status_cb</th>
<td class="description">Status callback</td></tr>
<tr><th>data</th>
<td class="description">Callback data pointer</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function sets the 802.11 Wi-Fi interface callbacks for the system.  The
&quot;join_cb&quot; is used to join a Wi-Fi network, the &quot;list_cb&quot; is used to list
available networks, and the &quot;status_cb&quot; is used to query the current Wi-Fi
network connection status and Secure Set Identifier (SSID).  The &quot;join_cb&quot;
and &quot;status_cb&quot; functions are used to support getting and setting the IPP
&quot;printer-wifi-state&quot;, &quot;printer-wifi-ssid&quot;, and &quot;printer-wifi-password&quot;
attributes, while the &quot;list_cb&quot; function enables changing the Wi-Fi network
from the network web interface, if enabled.<br>
<br>
Note: The Wi-Fi callbacks can only be set prior to calling
<a href="#papplSystemRun"><code>papplSystemRun</code></a>.</p>
<h3 class="function"><a id="papplSystemShutdown">papplSystemShutdown</a></h3>
<p class="description">Shutdown the system.</p>
<p class="code">
void papplSystemShutdown(<a href="#pappl_system_t">pappl_system_t</a> *system);</p>
<h4 class="parameters">Parameters</h4>
<table class="list"><tbody>
<tr><th>system</th>
<td class="description">System</td></tr>
</tbody></table>
<h4 class="discussion">Discussion</h4>
<p class="discussion">This function tells the system to perform an orderly shutdown of all printers
and to terminate the main loop.</p>
<h2 class="title"><a id="TYPES">Data Types</a></h2>
<h3 class="typedef"><a id="pappl_auth_cb_t">pappl_auth_cb_t</a></h3>
<p class="description">Authentication callback</p>
<p class="code">
typedef http_status_t (*pappl_auth_cb_t)(<a href="#pappl_client_t">pappl_client_t</a> *client, const char *group, gid_t groupid, void *cb_data);
</p>
<h3 class="typedef"><a id="pappl_client_t">pappl_client_t</a></h3>
<p class="description">Client connection object</p>
<p class="code">
typedef struct _pappl_client_s pappl_client_t;
</p>
<h3 class="typedef"><a id="pappl_color_mode_t">pappl_color_mode_t</a></h3>
<p class="description">Bitfield for IPP &quot;print-color-mode&quot; values</p>
<p class="code">
typedef unsigned pappl_color_mode_t;
</p>
<h3 class="typedef"><a id="pappl_contact_t">pappl_contact_t</a></h3>
<p class="description">Contact information</p>
<p class="code">
typedef struct <a href="#pappl_contact_s">pappl_contact_s</a> pappl_contact_t;
</p>
<h3 class="typedef"><a id="pappl_content_t">pappl_content_t</a></h3>
<p class="description">Bitfield for IPP &quot;print-content-optimize&quot; values</p>
<p class="code">
typedef unsigned pappl_content_t;
</p>
<h3 class="typedef"><a id="pappl_default_cb_t">pappl_default_cb_t</a></h3>
<p class="description">papplIterateDefaults callback</p>
<p class="code">
typedef void (*pappl_default_cb_t)(ipp_attribute_t *attr, void *data);
</p>
<h3 class="typedef"><a id="pappl_devclose_cb_t">pappl_devclose_cb_t</a></h3>
<p class="description">Device close callback</p>
<p class="code">
typedef void (*pappl_devclose_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device);
</p>
<h3 class="typedef"><a id="pappl_deverror_cb_t">pappl_deverror_cb_t</a></h3>
<p class="description">Device error callback</p>
<p class="code">
typedef void (*pappl_deverror_cb_t)(const char *message, void *err_data);
</p>
<h3 class="typedef"><a id="pappl_device_cb_t">pappl_device_cb_t</a></h3>
<p class="description">Device callback - return <code>true</code> to stop, <code>false</code> to continue</p>
<p class="code">
typedef bool (*pappl_device_cb_t)(const char *device_info, const char *device_uri, const char *device_id, void *data);
</p>
<h3 class="typedef"><a id="pappl_device_t">pappl_device_t</a></h3>
<p class="description">Device connection object</p>
<p class="code">
typedef struct _pappl_device_s pappl_device_t;
</p>
<h3 class="typedef"><a id="pappl_devid_cb_t">pappl_devid_cb_t</a></h3>
<p class="description">Device ID callback</p>
<p class="code">
typedef char *(*pappl_devid_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device, char *buffer, size_t bufsize);
</p>
<h3 class="typedef"><a id="pappl_devlist_cb_t">pappl_devlist_cb_t</a></h3>
<p class="description">Device list callback</p>
<p class="code">
typedef bool (*pappl_devlist_cb_t)(<a href="#pappl_device_cb_t">pappl_device_cb_t</a> cb, void *data, <a href="#pappl_deverror_cb_t">pappl_deverror_cb_t</a> err_cb, void *err_data);
</p>
<h3 class="typedef"><a id="pappl_devmetrics_t">pappl_devmetrics_t</a></h3>
<p class="description">Device metrics</p>
<p class="code">
typedef struct <a href="#pappl_devmetrics_s">pappl_devmetrics_s</a> pappl_devmetrics_t;
</p>
<h3 class="typedef"><a id="pappl_devopen_cb_t">pappl_devopen_cb_t</a></h3>
<p class="description">Device open callback</p>
<p class="code">
typedef bool (*pappl_devopen_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device, const char *device_uri, const char *name);
</p>
<h3 class="typedef"><a id="pappl_devread_cb_t">pappl_devread_cb_t</a></h3>
<p class="description">Device read callback</p>
<p class="code">
typedef ssize_t (*pappl_devread_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device, void *buffer, size_t bytes);
</p>
<h3 class="typedef"><a id="pappl_devstatus_cb_t">pappl_devstatus_cb_t</a></h3>
<p class="description">Device status callback</p>
<p class="code">
typedef <a href="#pappl_preason_t">pappl_preason_t</a> (*pappl_devstatus_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device);
</p>
<h3 class="typedef"><a id="pappl_devsupplies_cb_t">pappl_devsupplies_cb_t</a></h3>
<p class="description">Device supplies callback</p>
<p class="code">
typedef int (*pappl_devsupplies_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device, int max_supplies, <a href="#pappl_supply_t">pappl_supply_t</a> *supplies);
</p>
<h3 class="typedef"><a id="pappl_devtype_t">pappl_devtype_t</a></h3>
<p class="description">Device type bitfield</p>
<p class="code">
typedef unsigned pappl_devtype_t;
</p>
<h3 class="typedef"><a id="pappl_devwrite_cb_t">pappl_devwrite_cb_t</a></h3>
<p class="description">Device write callback</p>
<p class="code">
typedef ssize_t (*pappl_devwrite_cb_t)(<a href="#pappl_device_t">pappl_device_t</a> *device, const void *buffer, size_t bytes);
</p>
<h3 class="typedef"><a id="pappl_dither_t[16][16]">pappl_dither_t[16][16]</a></h3>
<p class="description">16x16 dither array</p>
<p class="code">
typedef unsigned char pappl_dither_t[16][16];
</p>
<h3 class="typedef"><a id="pappl_duplex_t">pappl_duplex_t</a></h3>
<p class="description">Duplex printing support</p>
<p class="code">
typedef enum <a href="#pappl_duplex_e">pappl_duplex_e</a> pappl_duplex_t;
</p>
<h3 class="typedef"><a id="pappl_event_cb_t">pappl_event_cb_t</a></h3>
<p class="description">System event callback</p>
<p class="code">
typedef void (*pappl_event_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, <a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_event_t">pappl_event_t</a> event, void *data);
</p>
<h3 class="typedef"><a id="pappl_event_t">pappl_event_t</a></h3>
<p class="description">Bitfield for IPP &quot;notify-events&quot; attribute</p>
<p class="code">
typedef unsigned int pappl_event_t;
</p>
<h3 class="typedef"><a id="pappl_finishings_t">pappl_finishings_t</a></h3>
<p class="description">Bitfield for IPP &quot;finishings&quot; values</p>
<p class="code">
typedef unsigned pappl_finishings_t;
</p>
<h3 class="typedef"><a id="pappl_icon_t">pappl_icon_t</a></h3>
<p class="description">Printer PNG icon structure</p>
<p class="code">
typedef struct <a href="#pappl_icon_s">pappl_icon_s</a> pappl_icon_t;
</p>
<h3 class="typedef"><a id="pappl_identify_actions_t">pappl_identify_actions_t</a></h3>
<p class="description">Bitfield for IPP &quot;identify-actions&quot; values</p>
<p class="code">
typedef unsigned pappl_identify_actions_t;
</p>
<h3 class="typedef"><a id="pappl_ipp_op_cb_t">pappl_ipp_op_cb_t</a></h3>
<p class="description">IPP operation callback function</p>
<p class="code">
typedef bool (*pappl_ipp_op_cb_t)(<a href="#pappl_client_t">pappl_client_t</a> *client, void *data);
</p>
<h3 class="typedef"><a id="pappl_job_cb_t">pappl_job_cb_t</a></h3>
<p class="description">papplIterateXxxJobs callback function</p>
<p class="code">
typedef void (*pappl_job_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, void *data);
</p>
<h3 class="typedef"><a id="pappl_job_t">pappl_job_t</a></h3>
<p class="description">Job object</p>
<p class="code">
typedef struct _pappl_job_s pappl_job_t;
</p>
<h3 class="typedef"><a id="pappl_jreason_t">pappl_jreason_t</a></h3>
<p class="description">Bitfield for IPP &quot;job-state-reasons&quot; values</p>
<p class="code">
typedef unsigned int pappl_jreason_t;
</p>
<h3 class="typedef"><a id="pappl_kind_t">pappl_kind_t</a></h3>
<p class="description">Bitfield for IPP &quot;printer-kind&quot; values</p>
<p class="code">
typedef unsigned pappl_kind_t;
</p>
<h3 class="typedef"><a id="pappl_label_mode_t">pappl_label_mode_t</a></h3>
<p class="description">Bitfield for IPP &quot;label-mode-xxx&quot; values</p>
<p class="code">
typedef unsigned short pappl_label_mode_t;
</p>
<h3 class="typedef"><a id="pappl_loc_t">pappl_loc_t</a></h3>
<p class="description">Localization data</p>
<p class="code">
typedef struct _pappl_loc_s pappl_loc_t;
</p>
<h3 class="typedef"><a id="pappl_loglevel_t">pappl_loglevel_t</a></h3>
<p class="description">Log levels</p>
<p class="code">
typedef enum <a href="#pappl_loglevel_e">pappl_loglevel_e</a> pappl_loglevel_t;
</p>
<h3 class="typedef"><a id="pappl_loptions_t">pappl_loptions_t</a></h3>
<p class="description">Bitfield for link options</p>
<p class="code">
typedef unsigned short pappl_loptions_t;
</p>
<h3 class="typedef"><a id="pappl_media_col_t">pappl_media_col_t</a></h3>
<p class="description">Media details structure</p>
<p class="code">
typedef struct <a href="#pappl_media_col_s">pappl_media_col_s</a> pappl_media_col_t;
</p>
<h3 class="typedef"><a id="pappl_media_tracking_t">pappl_media_tracking_t</a></h3>
<p class="description">Bitfield for IPP &quot;media-tracking&quot; values</p>
<p class="code">
typedef unsigned short pappl_media_tracking_t;
</p>
<h3 class="typedef"><a id="pappl_mime_cb_t">pappl_mime_cb_t</a></h3>
<p class="description">MIME typing callback function</p>
<p class="code">
typedef const char *(*pappl_mime_cb_t)(const unsigned char *header, size_t headersize, void *data);
</p>
<h3 class="typedef"><a id="pappl_mime_filter_cb_t">pappl_mime_filter_cb_t</a></h3>
<p class="description">Filter callback function</p>
<p class="code">
typedef bool (*pappl_mime_filter_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_device_t">pappl_device_t</a> *device, void *data);
</p>
<h3 class="typedef"><a id="pappl_ml_subcmd_cb_t">pappl_ml_subcmd_cb_t</a></h3>
<p class="description">Sub-command callback</p>
<p class="code">
typedef int (*pappl_ml_subcmd_cb_t)(const char *base_name, int num_options, cups_option_t *options, int num_files, char **files, void *data);
</p>
<h3 class="typedef"><a id="pappl_ml_system_cb_t">pappl_ml_system_cb_t</a></h3>
<p class="description">System callback</p>
<p class="code">
typedef <a href="#pappl_system_t">pappl_system_t</a> *(*pappl_ml_system_cb_t)(int num_options, cups_option_t *options, void *data);
</p>
<h3 class="typedef"><a id="pappl_ml_usage_cb_t">pappl_ml_usage_cb_t</a></h3>
<p class="description">Program usage callback</p>
<p class="code">
typedef void (*pappl_ml_usage_cb_t)(void *data);
</p>
<h3 class="typedef"><a id="pappl_netconf_t">pappl_netconf_t</a></h3>
<p class="description">Network configuration mode</p>
<p class="code">
typedef enum <a href="#pappl_netconf_e">pappl_netconf_e</a> pappl_netconf_t;
</p>
<h3 class="typedef"><a id="pappl_network_get_cb_t">pappl_network_get_cb_t</a></h3>
<p class="description">Get networks callback</p>
<p class="code">
typedef size_t (*pappl_network_get_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *cb_data, size_t max_networks, <a href="#pappl_network_t">pappl_network_t</a> *networks);
</p>
<h3 class="typedef"><a id="pappl_network_set_cb_t">pappl_network_set_cb_t</a></h3>
<p class="description">Set networks callback</p>
<p class="code">
typedef bool (*pappl_network_set_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *cb_data, size_t num_networks, <a href="#pappl_network_t">pappl_network_t</a> *networks);
</p>
<h3 class="typedef"><a id="pappl_network_t">pappl_network_t</a></h3>
<p class="description">Network interface information</p>
<p class="code">
typedef struct <a href="#pappl_network_s">pappl_network_s</a> pappl_network_t;
</p>
<h3 class="typedef"><a id="pappl_pr_autoadd_cb_t">pappl_pr_autoadd_cb_t</a></h3>
<p class="description">Auto-add callback</p>
<p class="code">
typedef const char *(*pappl_pr_autoadd_cb_t)(const char *device_info, const char *device_uri, const char *device_id, void *data);
</p>
<h3 class="typedef"><a id="pappl_pr_create_cb_t">pappl_pr_create_cb_t</a></h3>
<p class="description">Printer creation callback</p>
<p class="code">
typedef void (*pappl_pr_create_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, void *data);
</p>
<h3 class="typedef"><a id="pappl_pr_delete_cb_t">pappl_pr_delete_cb_t</a></h3>
<p class="description">Printer deletion callback</p>
<p class="code">
typedef void (*pappl_pr_delete_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a> *data);
</p>
<h3 class="typedef"><a id="pappl_pr_driver_cb_t">pappl_pr_driver_cb_t</a></h3>
<p class="description">Driver callback function</p>
<p class="code">
typedef bool (*pappl_pr_driver_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, const char *driver_name, const char *device_uri, const char *device_id, <a href="#pappl_pr_driver_data_t">pappl_pr_driver_data_t</a> *driver_data, ipp_t **driver_attrs, void *data);
</p>
<h3 class="typedef"><a id="pappl_pr_driver_data_t">pappl_pr_driver_data_t</a></h3>
<p class="description">Print driver data</p>
<p class="code">
typedef struct <a href="#pappl_pr_driver_data_s">pappl_pr_driver_data_s</a> pappl_pr_driver_data_t;
</p>
<h3 class="typedef"><a id="pappl_pr_driver_t">pappl_pr_driver_t</a></h3>
<p class="description">Printer driver information</p>
<p class="code">
typedef struct <a href="#pappl_pr_driver_s">pappl_pr_driver_s</a> pappl_pr_driver_t;
</p>
<h3 class="typedef"><a id="pappl_pr_identify_cb_t">pappl_pr_identify_cb_t</a></h3>
<p class="description">Identify-Printer callback</p>
<p class="code">
typedef void (*pappl_pr_identify_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_identify_actions_t">pappl_identify_actions_t</a> actions, const char *message);
</p>
<h3 class="typedef"><a id="pappl_pr_options_t">pappl_pr_options_t</a></h3>
<p class="description">Combined print job options</p>
<p class="code">
typedef struct <a href="#pappl_pr_options_s">pappl_pr_options_s</a> pappl_pr_options_t;
</p>
<h3 class="typedef"><a id="pappl_pr_printfile_cb_t">pappl_pr_printfile_cb_t</a></h3>
<p class="description">Print a &quot;raw&quot; job callback</p>
<p class="code">
typedef bool (*pappl_pr_printfile_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, <a href="#pappl_device_t">pappl_device_t</a> *device);
</p>
<h3 class="typedef"><a id="pappl_pr_rendjob_cb_t">pappl_pr_rendjob_cb_t</a></h3>
<p class="description">End a raster job callback</p>
<p class="code">
typedef bool (*pappl_pr_rendjob_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, <a href="#pappl_device_t">pappl_device_t</a> *device);
</p>
<h3 class="typedef"><a id="pappl_pr_rendpage_cb_t">pappl_pr_rendpage_cb_t</a></h3>
<p class="description">End a raster page callback</p>
<p class="code">
typedef bool (*pappl_pr_rendpage_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, <a href="#pappl_device_t">pappl_device_t</a> *device, unsigned page);
</p>
<h3 class="typedef"><a id="pappl_pr_rstartjob_cb_t">pappl_pr_rstartjob_cb_t</a></h3>
<p class="description">Start a raster job callback</p>
<p class="code">
typedef bool (*pappl_pr_rstartjob_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, <a href="#pappl_device_t">pappl_device_t</a> *device);
</p>
<h3 class="typedef"><a id="pappl_pr_rstartpage_cb_t">pappl_pr_rstartpage_cb_t</a></h3>
<p class="description">Start a raster page callback</p>
<p class="code">
typedef bool (*pappl_pr_rstartpage_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, <a href="#pappl_device_t">pappl_device_t</a> *device, unsigned page);
</p>
<h3 class="typedef"><a id="pappl_pr_rwriteline_cb_t">pappl_pr_rwriteline_cb_t</a></h3>
<p class="description">Write a line of raster graphics callback</p>
<p class="code">
typedef bool (*pappl_pr_rwriteline_cb_t)(<a href="#pappl_job_t">pappl_job_t</a> *job, <a href="#pappl_pr_options_t">pappl_pr_options_t</a> *options, <a href="#pappl_device_t">pappl_device_t</a> *device, unsigned y, const unsigned char *line);
</p>
<h3 class="typedef"><a id="pappl_pr_status_cb_t">pappl_pr_status_cb_t</a></h3>
<p class="description">Update printer status callback</p>
<p class="code">
typedef bool (*pappl_pr_status_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer);
</p>
<h3 class="typedef"><a id="pappl_pr_testpage_cb_t">pappl_pr_testpage_cb_t</a></h3>
<p class="description">Print a test page callback</p>
<p class="code">
typedef const char *(*pappl_pr_testpage_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, char *buffer, size_t bufsize);
</p>
<h3 class="typedef"><a id="pappl_pr_usb_cb_t">pappl_pr_usb_cb_t</a></h3>
<p class="description">Raw USB IO callback</p>
<p class="code">
typedef ssize_t (*pappl_pr_usb_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, <a href="#pappl_device_t">pappl_device_t</a> *device, void *buffer, size_t bufsize, size_t bytes, void *data);
</p>
<h3 class="typedef"><a id="pappl_preason_t">pappl_preason_t</a></h3>
<p class="description">Bitfield for IPP &quot;printer-state-reasons&quot; values</p>
<p class="code">
typedef unsigned int pappl_preason_t;
</p>
<h3 class="typedef"><a id="pappl_printer_cb_t">pappl_printer_cb_t</a></h3>
<p class="description">Printer iterator callback function</p>
<p class="code">
typedef void (*pappl_printer_cb_t)(<a href="#pappl_printer_t">pappl_printer_t</a> *printer, void *data);
</p>
<h3 class="typedef"><a id="pappl_printer_t">pappl_printer_t</a></h3>
<p class="description">Printer object</p>
<p class="code">
typedef struct _pappl_printer_s pappl_printer_t;
</p>
<h3 class="typedef"><a id="pappl_raster_type_t">pappl_raster_type_t</a></h3>
<p class="description">Bitfield for IPP &quot;pwg-raster-document-type-supported&quot; values</p>
<p class="code">
typedef unsigned pappl_raster_type_t;
</p>
<h3 class="typedef"><a id="pappl_resource_cb_t">pappl_resource_cb_t</a></h3>
<p class="description">Dynamic resource callback function</p>
<p class="code">
typedef bool (*pappl_resource_cb_t)(<a href="#pappl_client_t">pappl_client_t</a> *client, void *data);
</p>
<h3 class="typedef"><a id="pappl_save_cb_t">pappl_save_cb_t</a></h3>
<p class="description">Save callback function</p>
<p class="code">
typedef bool (*pappl_save_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *data);
</p>
<h3 class="typedef"><a id="pappl_scaling_t">pappl_scaling_t</a></h3>
<p class="description">Bitfield for IPP &quot;print-scaling&quot; values</p>
<p class="code">
typedef unsigned pappl_scaling_t;
</p>
<h3 class="typedef"><a id="pappl_sides_t">pappl_sides_t</a></h3>
<p class="description">Bitfield for IPP &quot;sides&quot; values</p>
<p class="code">
typedef unsigned pappl_sides_t;
</p>
<h3 class="typedef"><a id="pappl_soptions_t">pappl_soptions_t</a></h3>
<p class="description">Bitfield for system options</p>
<p class="code">
typedef unsigned pappl_soptions_t;
</p>
<h3 class="typedef"><a id="pappl_subscription_t">pappl_subscription_t</a></h3>
<p class="description">Subscription object</p>
<p class="code">
typedef struct _pappl_subscription_s pappl_subscription_t;
</p>
<h3 class="typedef"><a id="pappl_supply_color_t">pappl_supply_color_t</a></h3>
<p class="description">&quot;printer-supply&quot; color values</p>
<p class="code">
typedef enum <a href="#pappl_supply_color_e">pappl_supply_color_e</a> pappl_supply_color_t;
</p>
<h3 class="typedef"><a id="pappl_supply_t">pappl_supply_t</a></h3>
<p class="description">Supply data</p>
<p class="code">
typedef struct <a href="#pappl_supply_s">pappl_supply_s</a> pappl_supply_t;
</p>
<h3 class="typedef"><a id="pappl_supply_type_t">pappl_supply_type_t</a></h3>
<p class="description">IPP &quot;printer-supply&quot; type values</p>
<p class="code">
typedef enum <a href="#pappl_supply_type_e">pappl_supply_type_e</a> pappl_supply_type_t;
</p>
<h3 class="typedef"><a id="pappl_system_t">pappl_system_t</a></h3>
<p class="description">System object</p>
<p class="code">
typedef struct _pappl_system_s pappl_system_t;
</p>
<h3 class="typedef"><a id="pappl_timer_cb_t">pappl_timer_cb_t</a></h3>
<p class="description">Timer callback function</p>
<p class="code">
typedef bool (*pappl_timer_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *cb_data);
</p>
<h3 class="typedef"><a id="pappl_uoptions_t">pappl_uoptions_t</a></h3>
<p class="description">USB gadget options bitfield</p>
<p class="code">
typedef unsigned pappl_uoptions_t;
</p>
<h3 class="typedef"><a id="pappl_version_t">pappl_version_t</a></h3>
<p class="description">Firmware version information</p>
<p class="code">
typedef struct <a href="#pappl_version_s">pappl_version_s</a> pappl_version_t;
</p>
<h3 class="typedef"><a id="pappl_wifi_join_cb_t">pappl_wifi_join_cb_t</a></h3>
<p class="description">Wi-Fi join callback</p>
<p class="code">
typedef bool (*pappl_wifi_join_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *data, const char *ssid, const char *psk);
</p>
<h3 class="typedef"><a id="pappl_wifi_list_cb_t">pappl_wifi_list_cb_t</a></h3>
<p class="description">Wi-Fi list callback</p>
<p class="code">
typedef int (*pappl_wifi_list_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *data, cups_dest_t **ssids);
</p>
<h3 class="typedef"><a id="pappl_wifi_state_t">pappl_wifi_state_t</a></h3>
<p class="description">&quot;printer-wifi-state&quot; values</p>
<p class="code">
typedef enum <a href="#pappl_wifi_state_e">pappl_wifi_state_e</a> pappl_wifi_state_t;
</p>
<h3 class="typedef"><a id="pappl_wifi_status_cb_t">pappl_wifi_status_cb_t</a></h3>
<p class="description">Wi-Fi status callback</p>
<p class="code">
typedef <a href="#pappl_wifi_t">pappl_wifi_t</a> *(*pappl_wifi_status_cb_t)(<a href="#pappl_system_t">pappl_system_t</a> *system, void *data, <a href="#pappl_wifi_t">pappl_wifi_t</a> *wifi_data);
</p>
<h3 class="typedef"><a id="pappl_wifi_t">pappl_wifi_t</a></h3>
<p class="description">Wi-Fi status/configuration information</p>
<p class="code">
typedef struct <a href="#pappl_wifi_s">pappl_wifi_s</a> pappl_wifi_t;
</p>
<h2 class="title"><a id="STRUCTURES">Structures</a></h2>
<h3 class="struct"><a id="pappl_contact_s">pappl_contact_s</a></h3>
<p class="description">Contact information</p>
<p class="code">struct pappl_contact_s {<br>
&#160;&#160;&#160;&#160;char email[256];<br>
&#160;&#160;&#160;&#160;char name[256];<br>
&#160;&#160;&#160;&#160;char telephone[256];<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>email[256] </th>
<td class="description">Contact email address</td></tr>
<tr><th>name[256] </th>
<td class="description">Contact name</td></tr>
<tr><th>telephone[256] </th>
<td class="description">Contact phone number</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_devmetrics_s">pappl_devmetrics_s</a></h3>
<p class="description">Device metrics</p>
<p class="code">struct pappl_devmetrics_s {<br>
&#160;&#160;&#160;&#160;size_t read_bytes;<br>
&#160;&#160;&#160;&#160;size_t read_msecs;<br>
&#160;&#160;&#160;&#160;size_t read_requests;<br>
&#160;&#160;&#160;&#160;size_t status_msecs;<br>
&#160;&#160;&#160;&#160;size_t status_requests;<br>
&#160;&#160;&#160;&#160;size_t write_bytes;<br>
&#160;&#160;&#160;&#160;size_t write_msecs;<br>
&#160;&#160;&#160;&#160;size_t write_requests;<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>read_bytes </th>
<td class="description">Total number of bytes read</td></tr>
<tr><th>read_msecs </th>
<td class="description">Total number of milliseconds spent reading</td></tr>
<tr><th>read_requests </th>
<td class="description">Total number of read requests</td></tr>
<tr><th>status_msecs </th>
<td class="description">Total number of milliseconds spent getting status</td></tr>
<tr><th>status_requests </th>
<td class="description">Total number of status requests</td></tr>
<tr><th>write_bytes </th>
<td class="description">Total number of bytes written</td></tr>
<tr><th>write_msecs </th>
<td class="description">Total number of milliseconds spent writing</td></tr>
<tr><th>write_requests </th>
<td class="description">Total number of write requests</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_icon_s">pappl_icon_s</a></h3>
<p class="description">Printer PNG icon structure</p>
<p class="code">struct pappl_icon_s {<br>
&#160;&#160;&#160;&#160;const void *data;<br>
&#160;&#160;&#160;&#160;size_t datalen;<br>
&#160;&#160;&#160;&#160;char filename[256];<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>data </th>
<td class="description">PNG icon data, if any</td></tr>
<tr><th>datalen </th>
<td class="description">Size of PNG icon data</td></tr>
<tr><th>filename[256] </th>
<td class="description">External filename, if any</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_media_col_s">pappl_media_col_s</a></h3>
<p class="description">Media details structure</p>
<p class="code">struct pappl_media_col_s {<br>
&#160;&#160;&#160;&#160;int bottom_margin;<br>
&#160;&#160;&#160;&#160;int left_margin;<br>
&#160;&#160;&#160;&#160;int left_offset;<br>
&#160;&#160;&#160;&#160;int right_margin;<br>
&#160;&#160;&#160;&#160;int size_length;<br>
&#160;&#160;&#160;&#160;char size_name[64];<br>
&#160;&#160;&#160;&#160;int size_width;<br>
&#160;&#160;&#160;&#160;char source[64];<br>
&#160;&#160;&#160;&#160;int top_margin;<br>
&#160;&#160;&#160;&#160;int top_offset;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_media_tracking_t">pappl_media_tracking_t</a> tracking;<br>
&#160;&#160;&#160;&#160;char type[64];<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>bottom_margin </th>
<td class="description">Bottom margin in hundredths of millimeters</td></tr>
<tr><th>left_margin </th>
<td class="description">Left margin in hundredths of millimeters</td></tr>
<tr><th>left_offset </th>
<td class="description">Left offset in hundredths of millimeters</td></tr>
<tr><th>right_margin </th>
<td class="description">Right margin in hundredths of millimeters</td></tr>
<tr><th>size_length </th>
<td class="description">Height in hundredths of millimeters</td></tr>
<tr><th>size_name[64] </th>
<td class="description">PWG media size name</td></tr>
<tr><th>size_width </th>
<td class="description">Width in hundredths of millimeters</td></tr>
<tr><th>source[64] </th>
<td class="description">PWG media source name</td></tr>
<tr><th>top_margin </th>
<td class="description">Top margin in hundredths of millimeters</td></tr>
<tr><th>top_offset </th>
<td class="description">Top offset in hundredths of millimeters</td></tr>
<tr><th>tracking </th>
<td class="description">Media tracking</td></tr>
<tr><th>type[64] </th>
<td class="description">PWG media type name</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_network_s">pappl_network_s</a></h3>
<p class="description">Network interface information</p>
<p class="code">struct pappl_network_s {<br>
&#160;&#160;&#160;&#160;http_addr_t addr4;<br>
&#160;&#160;&#160;&#160;http_addr_t addr6;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_netconf_t">pappl_netconf_t</a> config4;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_netconf_t">pappl_netconf_t</a> config6;<br>
&#160;&#160;&#160;&#160;http_addr_t dns[2];<br>
&#160;&#160;&#160;&#160;char domain[64];<br>
&#160;&#160;&#160;&#160;http_addr_t gateway4;<br>
&#160;&#160;&#160;&#160;http_addr_t gateway6;<br>
&#160;&#160;&#160;&#160;char ident[256];<br>
&#160;&#160;&#160;&#160;http_addr_t linkaddr6;<br>
&#160;&#160;&#160;&#160;http_addr_t mask4;<br>
&#160;&#160;&#160;&#160;char name[64];<br>
&#160;&#160;&#160;&#160;unsigned prefix6;<br>
&#160;&#160;&#160;&#160;bool up;<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>addr4 </th>
<td class="description">IPv4 address</td></tr>
<tr><th>addr6 </th>
<td class="description">IPv6 address</td></tr>
<tr><th>config4 </th>
<td class="description">IPv4 configuration mode</td></tr>
<tr><th>config6 </th>
<td class="description">IPv6 configuration mode</td></tr>
<tr><th>dns[2] </th>
<td class="description">DNS server addresses, if any</td></tr>
<tr><th>domain[64] </th>
<td class="description">Domain name, if any</td></tr>
<tr><th>gateway4 </th>
<td class="description">IPv4 router/gateway address</td></tr>
<tr><th>gateway6 </th>
<td class="description">IPv6 router address</td></tr>
<tr><th>ident[256] </th>
<td class="description">Interface identifier</td></tr>
<tr><th>linkaddr6 </th>
<td class="description">IPv6 link-local address (read-only)</td></tr>
<tr><th>mask4 </th>
<td class="description">IPv4 netmask</td></tr>
<tr><th>name[64] </th>
<td class="description">Interface name</td></tr>
<tr><th>prefix6 </th>
<td class="description">IPv6 prefix length</td></tr>
<tr><th>up </th>
<td class="description">Is this interface up (read-only)?</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_pr_driver_data_s">pappl_pr_driver_data_s</a></h3>
<p class="description">Printer driver data</p>
<p class="code">struct pappl_pr_driver_data_s {<br>
&#160;&#160;&#160;&#160;const char *bin[PAPPL_MAX_BIN];<br>
&#160;&#160;&#160;&#160;int bin_default;<br>
&#160;&#160;&#160;&#160;bool borderless;<br>
&#160;&#160;&#160;&#160;int bottom_top;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_color_mode_t">pappl_color_mode_t</a> color_default;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_color_mode_t">pappl_color_mode_t</a> color_supported;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_content_t">pappl_content_t</a> content_default;<br>
&#160;&#160;&#160;&#160;int darkness_configured;<br>
&#160;&#160;&#160;&#160;int darkness_default;<br>
&#160;&#160;&#160;&#160;int darkness_supported;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_delete_cb_t">pappl_pr_delete_cb_t</a> delete_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_duplex_t">pappl_duplex_t</a> duplex;<br>
&#160;&#160;&#160;&#160;void *extension;<br>
&#160;&#160;&#160;&#160;const char *features[PAPPL_MAX_VENDOR];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_finishings_t">pappl_finishings_t</a> finishings;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_raster_type_t">pappl_raster_type_t</a> force_raster_type;<br>
&#160;&#160;&#160;&#160;const char *format;<br>
&#160;&#160;&#160;&#160;pappl_dither_t gdither;<br>
&#160;&#160;&#160;&#160;bool has_supplies;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_icon_t">pappl_icon_t</a> icons[3];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_identify_cb_t">pappl_pr_identify_cb_t</a> identify_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_identify_actions_t">pappl_identify_actions_t</a> identify_default;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_identify_actions_t">pappl_identify_actions_t</a> identify_supported;<br>
&#160;&#160;&#160;&#160;bool input_face_up;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_kind_t">pappl_kind_t</a> kind;<br>
&#160;&#160;&#160;&#160;int left_offset_supported[2];<br>
&#160;&#160;&#160;&#160;int left_right;<br>
&#160;&#160;&#160;&#160;char make_and_model[128];<br>
&#160;&#160;&#160;&#160;const char *media[PAPPL_MAX_MEDIA];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_media_col_t">pappl_media_col_t</a> media_default;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_media_col_t">pappl_media_col_t</a> media_ready[PAPPL_MAX_SOURCE];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_label_mode_t">pappl_label_mode_t</a> mode_configured;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_label_mode_t">pappl_label_mode_t</a> mode_supported;<br>
&#160;&#160;&#160;&#160;int num_bin;<br>
&#160;&#160;&#160;&#160;int num_features;<br>
&#160;&#160;&#160;&#160;int num_media;<br>
&#160;&#160;&#160;&#160;int num_resolution;<br>
&#160;&#160;&#160;&#160;int num_source;<br>
&#160;&#160;&#160;&#160;int num_type;<br>
&#160;&#160;&#160;&#160;int num_vendor;<br>
&#160;&#160;&#160;&#160;ipp_orient_t orient_default;<br>
&#160;&#160;&#160;&#160;bool output_face_up;<br>
&#160;&#160;&#160;&#160;pappl_dither_t pdither;<br>
&#160;&#160;&#160;&#160;int ppm;<br>
&#160;&#160;&#160;&#160;int ppm_color;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_printfile_cb_t">pappl_pr_printfile_cb_t</a> printfile_cb;<br>
&#160;&#160;&#160;&#160;ipp_quality_t quality_default;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_raster_type_t">pappl_raster_type_t</a> raster_types;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_rendjob_cb_t">pappl_pr_rendjob_cb_t</a> rendjob_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_rendpage_cb_t">pappl_pr_rendpage_cb_t</a> rendpage_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_rstartjob_cb_t">pappl_pr_rstartjob_cb_t</a> rstartjob_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_rstartpage_cb_t">pappl_pr_rstartpage_cb_t</a> rstartpage_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_rwriteline_cb_t">pappl_pr_rwriteline_cb_t</a> rwriteline_cb;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_scaling_t">pappl_scaling_t</a> scaling_default;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_sides_t">pappl_sides_t</a> sides_default;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_sides_t">pappl_sides_t</a> sides_supported;<br>
&#160;&#160;&#160;&#160;const char *source[PAPPL_MAX_SOURCE];<br>
&#160;&#160;&#160;&#160;int speed_default;<br>
&#160;&#160;&#160;&#160;int speed_supported[2];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_status_cb_t">pappl_pr_status_cb_t</a> status_cb;<br>
&#160;&#160;&#160;&#160;int tear_offset_configured;<br>
&#160;&#160;&#160;&#160;int tear_offset_supported[2];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_pr_testpage_cb_t">pappl_pr_testpage_cb_t</a> testpage_cb;<br>
&#160;&#160;&#160;&#160;int top_offset_supported[2];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_media_tracking_t">pappl_media_tracking_t</a> tracking_supported;<br>
&#160;&#160;&#160;&#160;const char *type[PAPPL_MAX_TYPE];<br>
&#160;&#160;&#160;&#160;const char *vendor[PAPPL_MAX_VENDOR];<br>
&#160;&#160;&#160;&#160;int x_default;<br>
&#160;&#160;&#160;&#160;int x_resolution[PAPPL_MAX_RESOLUTION];<br>
&#160;&#160;&#160;&#160;int y_default;<br>
&#160;&#160;&#160;&#160;int y_resolution[PAPPL_MAX_RESOLUTION];<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>bin[PAPPL_MAX_BIN] </th>
<td class="description">Output bins</td></tr>
<tr><th>bin_default </th>
<td class="description">Default output bin</td></tr>
<tr><th>borderless </th>
<td class="description">Borderless margins supported?</td></tr>
<tr><th>bottom_top </th>
<td class="description">Bottom and top margins in hundredths of millimeters</td></tr>
<tr><th>color_default </th>
<td class="description">&quot;print-color-mode-default&quot; value</td></tr>
<tr><th>color_supported </th>
<td class="description">&quot;print-color-mode&quot; values</td></tr>
<tr><th>content_default </th>
<td class="description">&quot;print-content-default&quot; value</td></tr>
<tr><th>darkness_configured </th>
<td class="description">printer-darkness-configured</td></tr>
<tr><th>darkness_default </th>
<td class="description">print-darkness-default</td></tr>
<tr><th>darkness_supported </th>
<td class="description">printer/print-darkness-supported (0 for none)</td></tr>
<tr><th>delete_cb </th>
<td class="description">Printer deletion callback</td></tr>
<tr><th>duplex </th>
<td class="description">Duplex printing modes supported</td></tr>
<tr><th>extension </th>
<td class="description">Extension data (managed by driver)</td></tr>
<tr><th>features[PAPPL_MAX_VENDOR] </th>
<td class="description">&quot;ipp-features-supported&quot; values</td></tr>
<tr><th>finishings </th>
<td class="description">&quot;finishings-supported&quot; values</td></tr>
<tr><th>force_raster_type </th>
<td class="description">Force a particular raster type?</td></tr>
<tr><th>format </th>
<td class="description">Printer-specific format</td></tr>
<tr><th>gdither </th>
<td class="description">'auto', 'text', and 'graphic' dither array</td></tr>
<tr><th>has_supplies </th>
<td class="description">Printer has supplies to report</td></tr>
<tr><th>icons[3] </th>
<td class="description">&quot;printer-icons&quot; values</td></tr>
<tr><th>identify_cb </th>
<td class="description">Identify-Printer callback</td></tr>
<tr><th>identify_default </th>
<td class="description">&quot;identify-actions-default&quot; values</td></tr>
<tr><th>identify_supported </th>
<td class="description">&quot;identify-actions-supported&quot; values</td></tr>
<tr><th>input_face_up </th>
<td class="description">Does input media come in face-up?</td></tr>
<tr><th>kind </th>
<td class="description">&quot;printer-kind&quot; values</td></tr>
<tr><th>left_offset_supported[2] </th>
<td class="description">media-left-offset-supported (0,0 for none)</td></tr>
<tr><th>left_right </th>
<td class="description">Left and right margins in hundredths of millimeters</td></tr>
<tr><th>make_and_model[128] </th>
<td class="description">&quot;printer-make-and-model&quot; value</td></tr>
<tr><th>media[PAPPL_MAX_MEDIA] </th>
<td class="description">Supported media</td></tr>
<tr><th>media_default </th>
<td class="description">Default media</td></tr>
<tr><th>media_ready[PAPPL_MAX_SOURCE] </th>
<td class="description">Ready media</td></tr>
<tr><th>mode_configured </th>
<td class="description">label-mode-configured</td></tr>
<tr><th>mode_supported </th>
<td class="description">label-mode-supported</td></tr>
<tr><th>num_bin </th>
<td class="description">Number of output bins</td></tr>
<tr><th>num_features </th>
<td class="description">Number of &quot;ipp-features-supported&quot; values</td></tr>
<tr><th>num_media </th>
<td class="description">Number of supported media</td></tr>
<tr><th>num_resolution </th>
<td class="description">Number of printer resolutions</td></tr>
<tr><th>num_source </th>
<td class="description">Number of media sources (trays/rolls)</td></tr>
<tr><th>num_type </th>
<td class="description">Number of media types</td></tr>
<tr><th>num_vendor </th>
<td class="description">Number of vendor attributes</td></tr>
<tr><th>orient_default </th>
<td class="description">&quot;orientation-requested-default&quot; value</td></tr>
<tr><th>output_face_up </th>
<td class="description">Does output media come out face-up?</td></tr>
<tr><th>pdither </th>
<td class="description">'photo' dither array</td></tr>
<tr><th>ppm </th>
<td class="description">&quot;pages-per-minute&quot; value</td></tr>
<tr><th>ppm_color </th>
<td class="description">&quot;pages-per-minute-color&quot; value, if any</td></tr>
<tr><th>printfile_cb </th>
<td class="description">Print (raw) file callback</td></tr>
<tr><th>quality_default </th>
<td class="description">&quot;print-quality-default&quot; value</td></tr>
<tr><th>raster_types </th>
<td class="description">&quot;pwg-raster-document-type-supported&quot; values</td></tr>
<tr><th>rendjob_cb </th>
<td class="description">End raster job callback</td></tr>
<tr><th>rendpage_cb </th>
<td class="description">End raster page callback</td></tr>
<tr><th>rstartjob_cb </th>
<td class="description">Start raster job callback</td></tr>
<tr><th>rstartpage_cb </th>
<td class="description">Start raster page callback</td></tr>
<tr><th>rwriteline_cb </th>
<td class="description">Write raster line callback</td></tr>
<tr><th>scaling_default </th>
<td class="description">&quot;print-scaling-default&quot; value</td></tr>
<tr><th>sides_default </th>
<td class="description">&quot;sides-default&quot; value</td></tr>
<tr><th>sides_supported </th>
<td class="description">&quot;sides-supported&quot; values</td></tr>
<tr><th>source[PAPPL_MAX_SOURCE] </th>
<td class="description">Media sources</td></tr>
<tr><th>speed_default </th>
<td class="description">print-speed-default</td></tr>
<tr><th>speed_supported[2] </th>
<td class="description">print-speed-supported (0,0 for none)</td></tr>
<tr><th>status_cb </th>
<td class="description">Status callback</td></tr>
<tr><th>tear_offset_configured </th>
<td class="description">label-tear-offset-configured</td></tr>
<tr><th>tear_offset_supported[2] </th>
<td class="description">label-tear-offset-supported (0,0 for none)</td></tr>
<tr><th>testpage_cb </th>
<td class="description">Test page callback</td></tr>
<tr><th>top_offset_supported[2] </th>
<td class="description">media-top-offset-supported (0,0 for none)</td></tr>
<tr><th>tracking_supported </th>
<td class="description">media-tracking-supported</td></tr>
<tr><th>type[PAPPL_MAX_TYPE] </th>
<td class="description">Media types</td></tr>
<tr><th>vendor[PAPPL_MAX_VENDOR] </th>
<td class="description">Vendor attribute names</td></tr>
<tr><th>x_default </th>
<td class="description">Default horizontal resolution</td></tr>
<tr><th>x_resolution[PAPPL_MAX_RESOLUTION] </th>
<td class="description">Horizontal printer resolutions</td></tr>
<tr><th>y_default </th>
<td class="description">Default vertical resolution</td></tr>
<tr><th>y_resolution[PAPPL_MAX_RESOLUTION] </th>
<td class="description">Vertical printer resolutions</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_pr_driver_s">pappl_pr_driver_s</a></h3>
<p class="description">Printer driver information</p>
<p class="code">struct pappl_pr_driver_s {<br>
&#160;&#160;&#160;&#160;const char *description;<br>
&#160;&#160;&#160;&#160;const char *device_id;<br>
&#160;&#160;&#160;&#160;void *extension;<br>
&#160;&#160;&#160;&#160;const char *name;<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>description </th>
<td class="description">Driver description (usually the make and model)</td></tr>
<tr><th>device_id </th>
<td class="description">IEEE-1284 device ID</td></tr>
<tr><th>extension </th>
<td class="description">Extension data pointer</td></tr>
<tr><th>name </th>
<td class="description">Driver name</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_pr_options_s">pappl_pr_options_s</a></h3>
<p class="description">Combined print job options</p>
<p class="code">struct pappl_pr_options_s {<br>
&#160;&#160;&#160;&#160;int copies;<br>
&#160;&#160;&#160;&#160;int darkness_configured;<br>
&#160;&#160;&#160;&#160;pappl_dither_t dither;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_finishings_t">pappl_finishings_t</a> finishings;<br>
&#160;&#160;&#160;&#160;unsigned first_page;<br>
&#160;&#160;&#160;&#160;cups_page_header_t header;<br>
&#160;&#160;&#160;&#160;unsigned last_page;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_media_col_t">pappl_media_col_t</a> media;<br>
&#160;&#160;&#160;&#160;unsigned num_pages;<br>
&#160;&#160;&#160;&#160;int num_vendor;<br>
&#160;&#160;&#160;&#160;ipp_orient_t orientation_requested;<br>
&#160;&#160;&#160;&#160;char output_bin[64];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_color_mode_t">pappl_color_mode_t</a> print_color_mode;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_content_t">pappl_content_t</a> print_content_optimize;<br>
&#160;&#160;&#160;&#160;int print_darkness;<br>
&#160;&#160;&#160;&#160;ipp_quality_t print_quality;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_scaling_t">pappl_scaling_t</a> print_scaling;<br>
&#160;&#160;&#160;&#160;int print_speed;<br>
&#160;&#160;&#160;&#160;int printer_resolution[2];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_sides_t">pappl_sides_t</a> sides;<br>
&#160;&#160;&#160;&#160;cups_option_t *vendor;<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>copies </th>
<td class="description">&quot;copies&quot; value</td></tr>
<tr><th>darkness_configured </th>
<td class="description">&quot;printer-darkness-configured&quot; value</td></tr>
<tr><th>dither </th>
<td class="description">Dither array, if any</td></tr>
<tr><th>finishings </th>
<td class="description">&quot;finishings&quot; value(s)</td></tr>
<tr><th>first_page </th>
<td class="description">First page in page-ranges, starting at 1</td></tr>
<tr><th>header </th>
<td class="description">Raster header</td></tr>
<tr><th>last_page </th>
<td class="description">Last page in page-ranges, starting at 1</td></tr>
<tr><th>media </th>
<td class="description">&quot;media&quot;/&quot;media-col&quot; value</td></tr>
<tr><th>num_pages </th>
<td class="description">Number of pages in job</td></tr>
<tr><th>num_vendor </th>
<td class="description">Number of vendor options</td></tr>
<tr><th>orientation_requested </th>
<td class="description">&quot;orientation-requested&quot; value</td></tr>
<tr><th>output_bin[64] </th>
<td class="description">&quot;output-bin&quot; value</td></tr>
<tr><th>print_color_mode </th>
<td class="description">&quot;print-color-mode&quot; value</td></tr>
<tr><th>print_content_optimize </th>
<td class="description">&quot;print-content-optimize&quot; value</td></tr>
<tr><th>print_darkness </th>
<td class="description">&quot;print-darkness&quot; value</td></tr>
<tr><th>print_quality </th>
<td class="description">&quot;print-quality&quot; value</td></tr>
<tr><th>print_scaling </th>
<td class="description">&quot;print-scaling&quot; value</td></tr>
<tr><th>print_speed </th>
<td class="description">&quot;print-speed&quot; value</td></tr>
<tr><th>printer_resolution[2] </th>
<td class="description">&quot;printer-resolution&quot; value in dots per inch</td></tr>
<tr><th>sides </th>
<td class="description">&quot;sides&quot; value</td></tr>
<tr><th>vendor </th>
<td class="description">Vendor options</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_supply_s">pappl_supply_s</a></h3>
<p class="description">Supply data</p>
<p class="code">struct pappl_supply_s {<br>
&#160;&#160;&#160;&#160;<a href="#pappl_supply_color_t">pappl_supply_color_t</a> color;<br>
&#160;&#160;&#160;&#160;char description[256];<br>
&#160;&#160;&#160;&#160;bool is_consumed;<br>
&#160;&#160;&#160;&#160;int level;<br>
&#160;&#160;&#160;&#160;<a href="#pappl_supply_type_t">pappl_supply_type_t</a> type;<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>color </th>
<td class="description">Color, if any</td></tr>
<tr><th>description[256] </th>
<td class="description">Description</td></tr>
<tr><th>is_consumed </th>
<td class="description">Is this a supply that is consumed?</td></tr>
<tr><th>level </th>
<td class="description">Level (0-100, -1 = unknown)</td></tr>
<tr><th>type </th>
<td class="description">Type</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_version_s">pappl_version_s</a></h3>
<p class="description">Firmware version information</p>
<p class="code">struct pappl_version_s {<br>
&#160;&#160;&#160;&#160;char name[64];<br>
&#160;&#160;&#160;&#160;char patches[64];<br>
&#160;&#160;&#160;&#160;char sversion[64];<br>
&#160;&#160;&#160;&#160;unsigned short version[4];<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>name[64] </th>
<td class="description">&quot;xxx-firmware-name&quot; value</td></tr>
<tr><th>patches[64] </th>
<td class="description">&quot;xxx-firmware-patches&quot; value</td></tr>
<tr><th>sversion[64] </th>
<td class="description">&quot;xxx-firmware-string-version&quot; value</td></tr>
<tr><th>version[4] </th>
<td class="description">&quot;xxx-firmware-version&quot; value</td></tr>
</tbody></table>
<h3 class="struct"><a id="pappl_wifi_s">pappl_wifi_s</a></h3>
<p class="description">Wi-Fi status/configuration information</p>
<p class="code">struct pappl_wifi_s {<br>
&#160;&#160;&#160;&#160;char ssid[128];<br>
&#160;&#160;&#160;&#160;<a href="#pappl_wifi_state_t">pappl_wifi_state_t</a> state;<br>
};</p>
<h4 class="members">Members</h4>
<table class="list"><tbody>
<tr><th>ssid[128] </th>
<td class="description">Current &quot;printer-wifi-ssid&quot; value</td></tr>
<tr><th>state </th>
<td class="description">Current &quot;printer-wifi-state&quot; value</td></tr>
</tbody></table>
<h2 class="title"><a id="ENUMERATIONS">Constants</a></h2>
<h3 class="enumeration"><a id="pappl_color_mode_e">pappl_color_mode_e</a></h3>
<p class="description">IPP &quot;print-color-mode&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_COLOR_MODE_AUTO </th><td class="description">'auto' - Automatic color/monochrome print mode</td></tr>
<tr><th>PAPPL_COLOR_MODE_AUTO_MONOCHROME </th><td class="description">'auto-monochrome' - Automatic monochrome/process monochrome print mode</td></tr>
<tr><th>PAPPL_COLOR_MODE_BI_LEVEL </th><td class="description">'bi-level' - B&amp;W (threshold) print mode</td></tr>
<tr><th>PAPPL_COLOR_MODE_COLOR </th><td class="description">'color' - Full color print mode</td></tr>
<tr><th>PAPPL_COLOR_MODE_MONOCHROME </th><td class="description">'monochrome' - Grayscale print mode using 1 color</td></tr>
<tr><th>PAPPL_COLOR_MODE_PROCESS_MONOCHROME </th><td class="description">'process-monochrome' - Grayscale print mode using multiple colors</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_content_e">pappl_content_e</a></h3>
<p class="description">IPP &quot;print-content-optimize&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_CONTENT_AUTO </th><td class="description">'auto': Automatically determine content</td></tr>
<tr><th>PAPPL_CONTENT_GRAPHIC </th><td class="description">'graphic': Optimize for vector graphics</td></tr>
<tr><th>PAPPL_CONTENT_PHOTO </th><td class="description">'photo': Optimize for photos/continuous tone images</td></tr>
<tr><th>PAPPL_CONTENT_TEXT </th><td class="description">'text': Optimize for text</td></tr>
<tr><th>PAPPL_CONTENT_TEXT_AND_GRAPHIC </th><td class="description">'text-and-graphic': Optimize for text and vector graphics</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_devtype_e">pappl_devtype_e</a></h3>
<p class="description">Device type bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_DEVTYPE_ALL </th><td class="description">All printers</td></tr>
<tr><th>PAPPL_DEVTYPE_CUSTOM_LOCAL </th><td class="description">Local printer using a custom interface or protocol</td></tr>
<tr><th>PAPPL_DEVTYPE_CUSTOM_NETWORK </th><td class="description">Network printer using a custom interface or protocol</td></tr>
<tr><th>PAPPL_DEVTYPE_DNS_SD </th><td class="description">Network printers discovered via DNS-SD/mDNS</td></tr>
<tr><th>PAPPL_DEVTYPE_FILE </th><td class="description">Local file/directory</td></tr>
<tr><th>PAPPL_DEVTYPE_LOCAL </th><td class="description">All local printers</td></tr>
<tr><th>PAPPL_DEVTYPE_NETWORK </th><td class="description">All network printers</td></tr>
<tr><th>PAPPL_DEVTYPE_SNMP </th><td class="description">Network printers discovered via SNMP</td></tr>
<tr><th>PAPPL_DEVTYPE_SOCKET </th><td class="description">Network printers using raw socket</td></tr>
<tr><th>PAPPL_DEVTYPE_USB </th><td class="description">USB printers</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_duplex_e">pappl_duplex_e</a></h3>
<p class="description">Duplex printing support</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_DUPLEX_FLIPPED </th><td class="description">Duplex with flipped back sides</td></tr>
<tr><th>PAPPL_DUPLEX_MANUAL_TUMBLE </th><td class="description">Duplex with back side rotated 180 degrees for short-edge duplex</td></tr>
<tr><th>PAPPL_DUPLEX_NONE </th><td class="description">No duplex printing support</td></tr>
<tr><th>PAPPL_DUPLEX_NORMAL </th><td class="description">Duplex with normal back sides</td></tr>
<tr><th>PAPPL_DUPLEX_ROTATED </th><td class="description">Duplex with back side rotated 180 degrees for long-edge duplex</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_event_e">pappl_event_e</a></h3>
<p class="description">IPP &quot;notify-events&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_EVENT_ALL </th><td class="description">All events</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_ALL </th><td class="description">All 'document-xxx' events</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_COMPLETED </th><td class="description">'document-completed'</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_CONFIG_CHANGED </th><td class="description">'document-config-changed'</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_CREATED </th><td class="description">'document-created'</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_FETCHABLE </th><td class="description">'document-fetchable'</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_STATE_ALL </th><td class="description">All 'document-xxx' state events</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_STATE_CHANGED </th><td class="description">'document-state-changed'</td></tr>
<tr><th>PAPPL_EVENT_DOCUMENT_STOPPED </th><td class="description">'document-stopped'</td></tr>
<tr><th>PAPPL_EVENT_JOB_ALL </th><td class="description">All 'job-xxx' events</td></tr>
<tr><th>PAPPL_EVENT_JOB_COMPLETED </th><td class="description">'job-completed'</td></tr>
<tr><th>PAPPL_EVENT_JOB_CONFIG_CHANGED </th><td class="description">'job-config-changed'</td></tr>
<tr><th>PAPPL_EVENT_JOB_CREATED </th><td class="description">'job-created'</td></tr>
<tr><th>PAPPL_EVENT_JOB_FETCHABLE </th><td class="description">'job-fetchable'</td></tr>
<tr><th>PAPPL_EVENT_JOB_PROGRESS </th><td class="description">'job-progress'</td></tr>
<tr><th>PAPPL_EVENT_JOB_STATE_ALL </th><td class="description">All 'job-xxx' state events</td></tr>
<tr><th>PAPPL_EVENT_JOB_STATE_CHANGED </th><td class="description">'job-state-changed'</td></tr>
<tr><th>PAPPL_EVENT_JOB_STOPPED </th><td class="description">'job-stopped'</td></tr>
<tr><th>PAPPL_EVENT_NONE </th><td class="description">'none'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_ALL </th><td class="description">All 'printer-xxx' events</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_CONFIG_ALL </th><td class="description">All 'printer-xxx' configuration events</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_CONFIG_CHANGED </th><td class="description">'printer-config-changed'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_CREATED </th><td class="description">'printer-created'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_DELETED </th><td class="description">'printer-deleted'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_FINISHINGS_CHANGED </th><td class="description">'printer-finishings-changed'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_MEDIA_CHANGED </th><td class="description">'printer-media-changed'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_QUEUE_ORDER_CHANGED </th><td class="description">'printer-queue-order-changed'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_RESTARTED </th><td class="description">'printer-restarted'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_SHUTDOWN </th><td class="description">'printer-shutdown'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_STATE_ALL </th><td class="description">All 'printer-xxx' state events</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_STATE_CHANGED </th><td class="description">'printer-state-changed'</td></tr>
<tr><th>PAPPL_EVENT_PRINTER_STOPPED </th><td class="description">'printer-stopped'</td></tr>
<tr><th>PAPPL_EVENT_RESOURCE_CANCELED </th><td class="description">'resource-canceled'</td></tr>
<tr><th>PAPPL_EVENT_RESOURCE_CONFIG_CHANGED </th><td class="description">'resource-config-changed'</td></tr>
<tr><th>PAPPL_EVENT_RESOURCE_CREATED </th><td class="description">'resource-created'</td></tr>
<tr><th>PAPPL_EVENT_RESOURCE_INSTALLED </th><td class="description">'resource-installed'</td></tr>
<tr><th>PAPPL_EVENT_RESOURCE_STATE_CHANGED </th><td class="description">'resource-state-changed'</td></tr>
<tr><th>PAPPL_EVENT_SYSTEM_CONFIG_CHANGED </th><td class="description">'system-config-changed'</td></tr>
<tr><th>PAPPL_EVENT_SYSTEM_STATE_CHANGED </th><td class="description">'system-state-changed'</td></tr>
<tr><th>PAPPL_EVENT_SYSTEM_STOPPED </th><td class="description">'system-stopped'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_finishings_e">pappl_finishings_e</a></h3>
<p class="description">IPP &quot;finishings&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_FINISHINGS_NONE </th><td class="description">'none'</td></tr>
<tr><th>PAPPL_FINISHINGS_PUNCH </th><td class="description">'punch'</td></tr>
<tr><th>PAPPL_FINISHINGS_STAPLE </th><td class="description">'staple'</td></tr>
<tr><th>PAPPL_FINISHINGS_TRIM </th><td class="description">'trim'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_identify_actions_e">pappl_identify_actions_e</a></h3>
<p class="description">IPP &quot;identify-actions&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_IDENTIFY_ACTIONS_DISPLAY </th><td class="description">'display': Display a message</td></tr>
<tr><th>PAPPL_IDENTIFY_ACTIONS_FLASH </th><td class="description">'flash': Flash the display or a light</td></tr>
<tr><th>PAPPL_IDENTIFY_ACTIONS_NONE </th><td class="description">No actions</td></tr>
<tr><th>PAPPL_IDENTIFY_ACTIONS_SOUND </th><td class="description">'sound': Make a sound</td></tr>
<tr><th>PAPPL_IDENTIFY_ACTIONS_SPEAK </th><td class="description">'speak': Speak a message</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_jreason_e">pappl_jreason_e</a></h3>
<p class="description">IPP &quot;job-state-reasons&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_JREASON_ABORTED_BY_SYSTEM </th><td class="description">'aborted-by-system'</td></tr>
<tr><th>PAPPL_JREASON_COMPRESSION_ERROR </th><td class="description">'compression-error'</td></tr>
<tr><th>PAPPL_JREASON_DOCUMENT_FORMAT_ERROR </th><td class="description">'document-format-error'</td></tr>
<tr><th>PAPPL_JREASON_DOCUMENT_PASSWORD_ERROR </th><td class="description">'document-password-error'</td></tr>
<tr><th>PAPPL_JREASON_DOCUMENT_PERMISSION_ERROR </th><td class="description">'document-permission-error'</td></tr>
<tr><th>PAPPL_JREASON_DOCUMENT_UNPRINTABLE_ERROR </th><td class="description">'document-unprintable-error'</td></tr>
<tr><th>PAPPL_JREASON_ERRORS_DETECTED </th><td class="description">'errors-detected'</td></tr>
<tr><th>PAPPL_JREASON_JOB_CANCELED_AT_DEVICE </th><td class="description">'job-canceled-at-device'</td></tr>
<tr><th>PAPPL_JREASON_JOB_CANCELED_BY_USER </th><td class="description">'job-canceled-by-user'</td></tr>
<tr><th>PAPPL_JREASON_JOB_COMPLETED_SUCCESSFULLY </th><td class="description">'job-completed-successfully'</td></tr>
<tr><th>PAPPL_JREASON_JOB_COMPLETED_WITH_ERRORS </th><td class="description">'job-completed-with-errors'</td></tr>
<tr><th>PAPPL_JREASON_JOB_COMPLETED_WITH_WARNINGS </th><td class="description">'job-completed-with-warnings'</td></tr>
<tr><th>PAPPL_JREASON_JOB_DATA_INSUFFICIENT </th><td class="description">'job-data-insufficient'</td></tr>
<tr><th>PAPPL_JREASON_JOB_HOLD_UNTIL_SPECIFIED </th><td class="description">'job-hold-until-specified'</td></tr>
<tr><th>PAPPL_JREASON_JOB_INCOMING </th><td class="description">'job-incoming'</td></tr>
<tr><th>PAPPL_JREASON_JOB_PRINTING </th><td class="description">'job-printing'</td></tr>
<tr><th>PAPPL_JREASON_JOB_QUEUED </th><td class="description">'job-queued'</td></tr>
<tr><th>PAPPL_JREASON_JOB_SPOOLING </th><td class="description">'job-spooling'</td></tr>
<tr><th>PAPPL_JREASON_NONE </th><td class="description">'none'</td></tr>
<tr><th>PAPPL_JREASON_PRINTER_STOPPED </th><td class="description">'printer-stopped'</td></tr>
<tr><th>PAPPL_JREASON_PRINTER_STOPPED_PARTLY </th><td class="description">'printer-stopped-partly'</td></tr>
<tr><th>PAPPL_JREASON_PROCESSING_TO_STOP_POINT </th><td class="description">'processing-to-stop-point'</td></tr>
<tr><th>PAPPL_JREASON_QUEUED_IN_DEVICE </th><td class="description">'queued-in-device'</td></tr>
<tr><th>PAPPL_JREASON_WARNINGS_DETECTED </th><td class="description">'warnings-detected'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_kind_e">pappl_kind_e</a></h3>
<p class="description">IPP &quot;printer-kind&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_KIND_DISC </th><td class="description">'disc'</td></tr>
<tr><th>PAPPL_KIND_DOCUMENT </th><td class="description">'document'</td></tr>
<tr><th>PAPPL_KIND_ENVELOPE </th><td class="description">'envelope'</td></tr>
<tr><th>PAPPL_KIND_LABEL </th><td class="description">'label'</td></tr>
<tr><th>PAPPL_KIND_LARGE_FORMAT </th><td class="description">'large-format'</td></tr>
<tr><th>PAPPL_KIND_PHOTO </th><td class="description">'photo'</td></tr>
<tr><th>PAPPL_KIND_POSTCARD </th><td class="description">'postcard'</td></tr>
<tr><th>PAPPL_KIND_RECEIPT </th><td class="description">'receipt'</td></tr>
<tr><th>PAPPL_KIND_ROLL </th><td class="description">'roll'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_label_mode_e">pappl_label_mode_e</a></h3>
<p class="description">IPP &quot;label-mode-xxx&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_LABEL_MODE_APPLICATOR </th><td class="description">'applicator'</td></tr>
<tr><th>PAPPL_LABEL_MODE_CUTTER </th><td class="description">'cutter'</td></tr>
<tr><th>PAPPL_LABEL_MODE_CUTTER_DELAYED </th><td class="description">'cutter-delayed'</td></tr>
<tr><th>PAPPL_LABEL_MODE_KIOSK </th><td class="description">'kiosk'</td></tr>
<tr><th>PAPPL_LABEL_MODE_PEEL_OFF </th><td class="description">'peel-off'</td></tr>
<tr><th>PAPPL_LABEL_MODE_PEEL_OFF_PREPEEL </th><td class="description">'peel-off-prepeel'</td></tr>
<tr><th>PAPPL_LABEL_MODE_REWIND </th><td class="description">'rewind'</td></tr>
<tr><th>PAPPL_LABEL_MODE_RFID </th><td class="description">'rfid'</td></tr>
<tr><th>PAPPL_LABEL_MODE_TEAR_OFF </th><td class="description">'tear-off'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_loglevel_e">pappl_loglevel_e</a></h3>
<p class="description">Log levels</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_LOGLEVEL_DEBUG </th><td class="description">Debug message</td></tr>
<tr><th>PAPPL_LOGLEVEL_ERROR </th><td class="description">Error message</td></tr>
<tr><th>PAPPL_LOGLEVEL_FATAL </th><td class="description">Fatal message</td></tr>
<tr><th>PAPPL_LOGLEVEL_INFO </th><td class="description">Informational message</td></tr>
<tr><th>PAPPL_LOGLEVEL_UNSPEC </th><td class="description">Not specified</td></tr>
<tr><th>PAPPL_LOGLEVEL_WARN </th><td class="description">Warning message</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_loptions_e">pappl_loptions_e</a></h3>
<p class="description">Link option bits</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_LOPTIONS_CONFIGURATION </th><td class="description">Link shown in configuration section</td></tr>
<tr><th>PAPPL_LOPTIONS_HTTPS_REQUIRED </th><td class="description">Link requires HTTPS</td></tr>
<tr><th>PAPPL_LOPTIONS_JOB </th><td class="description">Link shown in job(s) section</td></tr>
<tr><th>PAPPL_LOPTIONS_LOGGING </th><td class="description">Link shown in logging section</td></tr>
<tr><th>PAPPL_LOPTIONS_NAVIGATION </th><td class="description">Link shown in navigation bar</td></tr>
<tr><th>PAPPL_LOPTIONS_NETWORK </th><td class="description">Link shown in network section</td></tr>
<tr><th>PAPPL_LOPTIONS_OTHER </th><td class="description">Link shown in other section</td></tr>
<tr><th>PAPPL_LOPTIONS_PRINTER </th><td class="description">Link shown in printer(s) section</td></tr>
<tr><th>PAPPL_LOPTIONS_SECURITY </th><td class="description">Link shown in security section</td></tr>
<tr><th>PAPPL_LOPTIONS_STATUS </th><td class="description">Link shown in status section</td></tr>
<tr><th>PAPPL_LOPTIONS_TLS </th><td class="description">Link shown in TLS section</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_media_tracking_e">pappl_media_tracking_e</a></h3>
<p class="description">IPP &quot;media-tracking&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_MEDIA_TRACKING_CONTINUOUS </th><td class="description">'continuous'</td></tr>
<tr><th>PAPPL_MEDIA_TRACKING_GAP </th><td class="description">'gap'</td></tr>
<tr><th>PAPPL_MEDIA_TRACKING_MARK </th><td class="description">'mark'</td></tr>
<tr><th>PAPPL_MEDIA_TRACKING_WEB </th><td class="description">'web'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_netconf_e">pappl_netconf_e</a></h3>
<p class="description">Network configuration mode</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_NETCONF_DHCP </th><td class="description">Full DHCP</td></tr>
<tr><th>PAPPL_NETCONF_DHCP_MANUAL </th><td class="description">DHCP with manual IP address</td></tr>
<tr><th>PAPPL_NETCONF_MANUAL </th><td class="description">Manual IP, netmask, and router</td></tr>
<tr><th>PAPPL_NETCONF_OFF </th><td class="description">Turn network interface off</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_preason_e">pappl_preason_e</a></h3>
<p class="description">IPP &quot;printer-state-reasons&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_PREASON_COVER_OPEN </th><td class="description">'cover-open'</td></tr>
<tr><th>PAPPL_PREASON_DEVICE_STATUS </th><td class="description">Supported <a href="#papplDeviceGetStatus"><code>papplDeviceGetStatus</code></a> bits</td></tr>
<tr><th>PAPPL_PREASON_DOOR_OPEN </th><td class="description">'door-open'</td></tr>
<tr><th>PAPPL_PREASON_IDENTIFY_PRINTER_REQUESTED </th><td class="description">'identify-printer-requested'</td></tr>
<tr><th>PAPPL_PREASON_INPUT_TRAY_MISSING </th><td class="description">'input-tray-missing'</td></tr>
<tr><th>PAPPL_PREASON_MARKER_SUPPLY_EMPTY </th><td class="description">'marker-supply-empty'</td></tr>
<tr><th>PAPPL_PREASON_MARKER_SUPPLY_LOW </th><td class="description">'marker-supply-low'</td></tr>
<tr><th>PAPPL_PREASON_MARKER_WASTE_ALMOST_FULL </th><td class="description">'marker-waste-almost-full'</td></tr>
<tr><th>PAPPL_PREASON_MARKER_WASTE_FULL </th><td class="description">'marker-waste-full'</td></tr>
<tr><th>PAPPL_PREASON_MEDIA_EMPTY </th><td class="description">'media-empty'</td></tr>
<tr><th>PAPPL_PREASON_MEDIA_JAM </th><td class="description">'media-jam'</td></tr>
<tr><th>PAPPL_PREASON_MEDIA_LOW </th><td class="description">'media-low'</td></tr>
<tr><th>PAPPL_PREASON_MEDIA_NEEDED </th><td class="description">'media-needed'</td></tr>
<tr><th>PAPPL_PREASON_NONE </th><td class="description">'none'</td></tr>
<tr><th>PAPPL_PREASON_OFFLINE </th><td class="description">'offline'</td></tr>
<tr><th>PAPPL_PREASON_OTHER </th><td class="description">'other'</td></tr>
<tr><th>PAPPL_PREASON_SPOOL_AREA_FULL </th><td class="description">'spool-area-full'</td></tr>
<tr><th>PAPPL_PREASON_TONER_EMPTY </th><td class="description">'toner-empty'</td></tr>
<tr><th>PAPPL_PREASON_TONER_LOW </th><td class="description">'toner-low'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_raster_type_e">pappl_raster_type_e</a></h3>
<p class="description">IPP &quot;pwg-raster-document-type-supported&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_PWG_RASTER_TYPE_ADOBE_RGB_16 </th><td class="description">16-bit per component AdobeRGB</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_ADOBE_RGB_8 </th><td class="description">8-bit per component AdobeRGB</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_BLACK_1 </th><td class="description">1-bit (device) black</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_BLACK_16 </th><td class="description">16-bit (device) black</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_BLACK_8 </th><td class="description">8-bit (device) black</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_CMYK_16 </th><td class="description">16-bit per component (device) CMYK</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_CMYK_8 </th><td class="description">8-bit per component (device) CMYK</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_NONE </th><td class="description">Do not force a particular raster type</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_RGB_16 </th><td class="description">16-bit per component (device) RGB</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_RGB_8 </th><td class="description">8-bit per component (device) RGB</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_SGRAY_16 </th><td class="description">16-bit grayscale with 2.2 gamma</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_SGRAY_8 </th><td class="description">8-bit grayscale with 2.2 gamma</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_SRGB_16 </th><td class="description">16-bit per component sRGB</td></tr>
<tr><th>PAPPL_PWG_RASTER_TYPE_SRGB_8 </th><td class="description">8-bit per component sRGB</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_scaling_e">pappl_scaling_e</a></h3>
<p class="description">IPP &quot;print-scaling&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_SCALING_AUTO </th><td class="description">'auto': Scale to fit (non-borderless) or fill (borderless) if larger, otherwise center</td></tr>
<tr><th>PAPPL_SCALING_AUTO_FIT </th><td class="description">'auto-fit': Scale to fit if larger, otherwise center</td></tr>
<tr><th>PAPPL_SCALING_FILL </th><td class="description">'fill': Scale to fill the media</td></tr>
<tr><th>PAPPL_SCALING_FIT </th><td class="description">'fit': Scale to fit within margins</td></tr>
<tr><th>PAPPL_SCALING_NONE </th><td class="description">'none': No scaling (center/crop)</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_sides_e">pappl_sides_e</a></h3>
<p class="description">IPP &quot;sides&quot; bit values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_SIDES_ONE_SIDED </th><td class="description">'one-sided'</td></tr>
<tr><th>PAPPL_SIDES_TWO_SIDED_LONG_EDGE </th><td class="description">'two-sided-long-edge'</td></tr>
<tr><th>PAPPL_SIDES_TWO_SIDED_SHORT_EDGE </th><td class="description">'two-sided-short-edge'</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_soptions_e">pappl_soptions_e</a></h3>
<p class="description">System option bits</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_SOPTIONS_DNSSD_HOST </th><td class="description">Use hostname in DNS-SD service names instead of serial number/UUID</td></tr>
<tr><th>PAPPL_SOPTIONS_MULTI_QUEUE </th><td class="description">Support multiple printers</td></tr>
<tr><th>PAPPL_SOPTIONS_NONE </th><td class="description">No options</td></tr>
<tr><th>PAPPL_SOPTIONS_NO_TLS <span class="info">&#160;PAPPL 1.1&#160;</span></th><td class="description">Disable TLS support </td></tr>
<tr><th>PAPPL_SOPTIONS_RAW_SOCKET </th><td class="description">Accept jobs via raw sockets</td></tr>
<tr><th>PAPPL_SOPTIONS_USB_PRINTER </th><td class="description">Accept jobs via USB for default printer (embedded Linux only)</td></tr>
<tr><th>PAPPL_SOPTIONS_WEB_INTERFACE </th><td class="description">Enable the standard web pages</td></tr>
<tr><th>PAPPL_SOPTIONS_WEB_LOG </th><td class="description">Enable the log file page</td></tr>
<tr><th>PAPPL_SOPTIONS_WEB_NETWORK </th><td class="description">Enable the network settings page</td></tr>
<tr><th>PAPPL_SOPTIONS_WEB_REMOTE </th><td class="description">Allow remote queue management (vs. localhost only)</td></tr>
<tr><th>PAPPL_SOPTIONS_WEB_SECURITY </th><td class="description">Enable the user/password settings page</td></tr>
<tr><th>PAPPL_SOPTIONS_WEB_TLS </th><td class="description">Enable the TLS settings page</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_supply_color_e">pappl_supply_color_e</a></h3>
<p class="description">&quot;printer-supply&quot; color values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_SUPPLY_COLOR_BLACK </th><td class="description">Black ink/toner (photo or matte)</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_CYAN </th><td class="description">Cyan ink/toner</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_GRAY </th><td class="description">Gray ink (sometimes marketed as light gray)</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_GREEN </th><td class="description">Green ink</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_LIGHT_CYAN </th><td class="description">Light cyan ink</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_LIGHT_GRAY </th><td class="description">Light gray ink (sometimes marketed as light light gray)</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_LIGHT_MAGENTA </th><td class="description">Light magenta ink</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_MAGENTA </th><td class="description">Magenta ink/toner</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_MULTIPLE </th><td class="description">Multiple-color ink</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_NO_COLOR </th><td class="description">No color (waste tank, etc.)</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_ORANGE </th><td class="description">Orange ink</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_VIOLET </th><td class="description">Violet ink</td></tr>
<tr><th>PAPPL_SUPPLY_COLOR_YELLOW </th><td class="description">Yellow ink/toner</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_supply_type_e">pappl_supply_type_e</a></h3>
<p class="description">IPP &quot;printer-supply&quot; type values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_SUPPLY_TYPE_BANDING_SUPPLY </th><td class="description">Banding finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_BINDING_SUPPLY </th><td class="description">Binding finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_CLEANER_UNIT </th><td class="description">Cleaning unit</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_CORONA_WIRE </th><td class="description">Corona wire (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_COVERS </th><td class="description">Cover finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_DEVELOPER </th><td class="description">Developer supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_FUSER </th><td class="description">Fuser (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_FUSER_CLEANING_PAD </th><td class="description">Fuser cleaning pad (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_FUSER_OIL </th><td class="description">Fuser oil supply (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_FUSER_OILER </th><td class="description">Fuser oiler (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_FUSER_OIL_WICK </th><td class="description">Fuser oil wick (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_GLUE_WATER_ADDITIVE </th><td class="description">Glue water additive</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_INK </th><td class="description">Ink supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_INK_CARTRIDGE </th><td class="description">Ink cartridge</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_INK_RIBBON </th><td class="description">Ink ribbon supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_INSERTS </th><td class="description">Insert finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_OPC </th><td class="description">Optical photoconductor (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_OTHER </th><td class="description">Other supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_PAPER_WRAP </th><td class="description">Wrap finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_RIBBON_WAX </th><td class="description">Wax ribbon supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_SHRINK_WRAP </th><td class="description">Shrink wrap</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_SOLID_WAX </th><td class="description">Solid wax supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_STAPLES </th><td class="description">Staple finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_STITCHING_WIRE </th><td class="description">Staple/stitch finisher supplies</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_TONER </th><td class="description">Toner supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_TONER_CARTRIDGE </th><td class="description">Toner cartridge</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_TRANSFER_UNIT </th><td class="description">Transfer unit (laser printers)</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_UNKNOWN </th><td class="description">Unknown supply</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_WASTE_INK </th><td class="description">Waste ink</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_WASTE_PAPER </th><td class="description">Waste paper</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_WASTE_TONER </th><td class="description">Waste toner</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_WASTE_WATER </th><td class="description">Waste water</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_WASTE_WAX </th><td class="description">Waste wax</td></tr>
<tr><th>PAPPL_SUPPLY_TYPE_WATER </th><td class="description">Water supply</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_uoptions_e">pappl_uoptions_e</a></h3>
<p class="description">USB gadget options</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_UOPTIONS_ETHERNET </th><td class="description">Include USB ethernet gadget</td></tr>
<tr><th>PAPPL_UOPTIONS_NONE </th><td class="description">No options (just USB printer)</td></tr>
<tr><th>PAPPL_UOPTIONS_SERIAL </th><td class="description">Include USB serial gadget</td></tr>
<tr><th>PAPPL_UOPTIONS_STORAGE </th><td class="description">Include USB mass storage gadget</td></tr>
<tr><th>PAPPL_UOPTIONS_STORAGE_READONLY </th><td class="description">USB mass storage gadget is read-only</td></tr>
<tr><th>PAPPL_UOPTIONS_STORAGE_REMOVABLE </th><td class="description">USB mass storage gadget is removable</td></tr>
</tbody></table>
<h3 class="enumeration"><a id="pappl_wifi_state_e">pappl_wifi_state_e</a></h3>
<p class="description">&quot;printer-wifi-state&quot; values</p>
<h4 class="constants">Constants</h4>
<table class="list"><tbody>
<tr><th>PAPPL_WIFI_STATE_CANNOT_JOIN </th><td class="description">'cannot-join'</td></tr>
<tr><th>PAPPL_WIFI_STATE_JOINING </th><td class="description">'joining'</td></tr>
<tr><th>PAPPL_WIFI_STATE_NOT_CONFIGURED </th><td class="description">'not-configured'</td></tr>
<tr><th>PAPPL_WIFI_STATE_NOT_VISIBLE </th><td class="description">'not-visible'</td></tr>
<tr><th>PAPPL_WIFI_STATE_OFF </th><td class="description">'off'</td></tr>
<tr><th>PAPPL_WIFI_STATE_ON </th><td class="description">'on'</td></tr>
</tbody></table>
</div>
</body>
</html>
